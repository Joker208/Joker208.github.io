[{"title":"Golang Docker host","date":"2020-05-15T16:00:00.000Z","path":"2020/05/16/Golang docker host/","text":"é—®é¢˜æè¿°åœ¨dockerçš„alpineå®¹å™¨ä¸­ä½¿ç”¨httpclientå‘å¦ä¸€ä¸ªå®¹å™¨å‘èµ·httpè¯·æ±‚ 1response, err := httpClient.Do(request) ç¨‹åºåº”è¯¥ä¼šä½¿ç”¨/etc/hostsä¸­é…ç½®çš„IPï¼Œä½†å®é™…ä½¿å¹¶æ²¡æœ‰ï¼Œå¯¼è‡´æ²¡æœ‰è¿”å›ç»“æœ ç»æŸ¥è¯å‘ç°ç¨‹åºä½¿ç”¨äº†ä»dns serverä¸­æŸ¥è¯¢åˆ°çš„ip è§£å†³æ–¹æ³•è¿›å…¥å®¹å™¨æ·»åŠ nsswitch.confæ–‡ä»¶ 1echo &quot;hosts: files dns&quot; &gt; /etc/nsswitch.conf é—®é¢˜åŸå›  golangç¨‹åºè§£æåŸŸåæ—¶é»˜è®¤ä½¿ç”¨/etc/nsswitch.confæ–‡ä»¶ä¸­çš„è§£æé¡ºåºï¼Œå¦‚æœnsswitch.confæ–‡ä»¶ä¸å­˜åœ¨ï¼Œåˆ™ä¼˜å…ˆä½¿ç”¨dnsæœåŠ¡å™¨è§£æåŸŸå golangç¨‹åºè§£æåŸŸåæ—¶æŒ‰ç…§etc/nsswitch.confæ–‡ä»¶ä¸­çš„é¡ºåºè§£æï¼Œå¦‚æœnsswitch.confä¸å­˜åœ¨ï¼Œåˆ™ä¼˜å…ˆä½¿ç”¨dnsè§£æåŸŸå å‚è€ƒèµ„æ–™ https://github.com/golang/go/issues/22846 https://www.lijiaocn.com/%E9%97%AE%E9%A2%98/2017/11/09/problem-docker-not-use-hosts-file.html https://blog.csdn.net/u010278923/article/details/79179779 https://blog.csdn.net/huangruifeng/article/details/96594065","tags":[{"name":"Golang","slug":"Golang","permalink":"https://joker208.github.io/tags/Golang/"},{"name":"Docker","slug":"Docker","permalink":"https://joker208.github.io/tags/Docker/"},{"name":"host","slug":"host","permalink":"https://joker208.github.io/tags/host/"}]},{"title":"gorm save updateåŒºåˆ«","date":"2020-03-22T16:00:00.000Z","path":"2020/03/23/gorm save updateåŒºåˆ«/","text":"åœ¨ç¨‹åºé‡Œä½¿ç”¨gormçš„updateæ›´æ–°æ•°æ®çš„æ—¶å€™ï¼Œå‘ç°æœ‰éƒ¨åˆ†æ•°æ®æ²¡æœ‰ä¿®æ”¹æˆåŠŸã€‚ å½“ä½¿ç”¨Updatesæ›´æ–°ç»“æ„ä½“çš„æ—¶å€™ï¼Œå½“ç»“æ„ä½“çš„å€¼æ˜¯â€â€æˆ–è€…0ï¼Œfalseç­‰ï¼Œè¿™äº›å€¼ä¼šè¢«å¿½ç•¥æ‰ã€‚ å¦‚æœéœ€è¦æ›´æ–°å…¨éƒ¨å­—æ®µå»ºè®®ä½¿ç”¨Saveæ–¹æ³•ã€‚ ä¸‹é¢æ˜¯å®˜æ–¹çš„è¯´æ˜æ–‡æ¡£ï¼š Update Changed Fields If you only want to update changed Fields, you could use Update, Updates 12345678910111213141516171819// Update single attribute if it is changed db.Model(&amp;user).Update(\"name\", \"hello\") //// UPDATE users SET name='hello', updated_at='2013-11-17 21:34:10' WHERE id=111; // Update single attribute with combined conditions db.Model(&amp;user).Where(\"active = ?\", true).Update(\"name\", \"hello\") //// UPDATE users SET name='hello', updated_at='2013-11-17 21:34:10' WHERE id=111 AND active=true; // Update multiple attributes with `map`, will only update those changed fieldsdb.Model(&amp;user).Updates(map[string]interface&#123;&#125;&#123;\"name\": \"hello\", \"age\": 18, \"actived\": false&#125;) //// UPDATE users SET name='hello', age=18, actived=false, updated_at='2013-11-17 21:34:10' WHERE id=111; // Update multiple attributes with `struct`, will only update those changed &amp; non blank fields db.Model(&amp;user).Updates(User&#123;Name: \"hello\", Age: 18&#125;) //// UPDATE users SET name='hello', age=18, updated_at = '2013-11-17 21:34:10' WHERE id = 111; // WARNING when update with struct, GORM will only update those fields that with non blank value // For below Update, nothing will be updated as \"\", 0, false are blank values of their types db.Model(&amp;user).Updates(User&#123;Name: \"\", Age: 0, Actived: false&#125;) // WARNING when update with struct, GORM will only update those fields that with non blank value // For below Update, nothing will be updated as â€œâ€, 0, false are blank values of their types å½“ç”¨ç»“æ„ä½“æ›´æ–°çš„æ—¶å€™ï¼Œå½“ç»“æ„ä½“çš„å€¼æ˜¯â€â€æˆ–è€…0ï¼Œfalseç­‰ï¼Œè¿™äº›å€¼ä¼šè¢«å¿½ç•¥æ‰ã€‚ å¦‚æœéœ€è¦æ›´æ–°å…¨éƒ¨å­—æ®µå»ºè®®ä½¿ç”¨saveæ–¹æ³• Update All Fields Save will include all fields when perform the Updating SQL, even it is not changed 12345db.First(&amp;user) user.Name = \"jinzhu 2\" user.Age = 100 db.Save(&amp;user) //// UPDATE users SET name='jinzhu 2', age=100, birthday='2016-01-01', updated_at = '2013-11-17 21:34:10' WHERE id=11 å‚è€ƒèµ„æ–™ å®˜æ–¹æ–‡æ¡£ï¼šhttp://gorm.io/docs/update.html https://www.jianshu.com/p/e8502adac645 https://www.cnblogs.com/oxspirt/p/11240527.html","tags":[{"name":"Golang","slug":"Golang","permalink":"https://joker208.github.io/tags/Golang/"},{"name":"gorm","slug":"gorm","permalink":"https://joker208.github.io/tags/gorm/"}]},{"title":"ERROR 2059(HY000) Authentication plugin 'caching_sha2_password' cannot be loaded","date":"2020-03-17T16:00:00.000Z","path":"2020/03/18/ERROR 2059/","text":"å‡ºç°è¿™ä¸ªåŸå› æ˜¯mysql8 ä¹‹å‰çš„ç‰ˆæœ¬ä¸­åŠ å¯†è§„åˆ™æ˜¯mysql_native_passwordï¼Œè€Œåœ¨mysql8ä¹‹å,åŠ å¯†è§„åˆ™æ˜¯caching_sha2_passwordï¼Œè§£å†³é—®é¢˜æ–¹æ³•æœ‰ä¸¤ç§ï¼Œä¸€ç§æ˜¯å‡çº§navicaté©±åŠ¨ï¼Œä¸€ç§æ˜¯æŠŠmysqlç”¨æˆ·ç™»å½•å¯†ç åŠ å¯†è§„åˆ™è¿˜åŸæˆmysql_native_passwordã€‚ é—®é¢˜ï¼šè¿æ¥Dockerå¯åŠ¨çš„mysqlå‡ºç°ï¼šERROR 2059 (HY000): Authentication plugin â€˜caching_sha2_passwordâ€™ cannot be loaded 1234C:\\mysqldata&gt;mysql -h 127.0.0.1 -P 13306 -uroot -pEnter password: ****ERROR 2059 (HY000): Authentication plugin &apos;caching_sha2_password&apos; cannot be loaded: Ã•Ã’Â²Â»ÂµÂ½Ã–Â¸Â¶Â¨ÂµÃ„Ã„Â£Â¿Ã©Â¡Â£ è§£å†³ä¹Ÿå¾ˆç®€å• è§£å†³æ–¹æ¡ˆï¼š è¿›å…¥mysqlå®¹å™¨ 1docker exec -it mysql01 /bin/bash è¿›å…¥mysql 1mysql -uroot -pxxx ä¿®æ”¹å¯†ç  1ALTER USER &apos;root&apos;@&apos;%&apos; IDENTIFIED WITH mysql_native_password BY &apos;xxxx&apos;;","tags":[{"name":"MySQL","slug":"MySQL","permalink":"https://joker208.github.io/tags/MySQL/"}]},{"title":"openvpné…ç½®","date":"2020-03-15T16:00:00.000Z","path":"2020/03/16/openvpné…ç½®/","text":"æ­å»ºå¥½æœåŠ¡å™¨ä»¥åéœ€è¦ç»å¸¸ç»´æŠ¤ï¼Œæœ‰æ—¶å€™æœåŠ¡å™¨å¾ˆéš¾è¿œç¨‹è®¿é—®åˆ°ï¼Œå¯ä»¥æ­å»ºopenVPNä»£ç†ï¼Œè¿™æ ·ç»´æŠ¤æœåŠ¡å™¨å°±å¾ˆæ–¹ä¾¿äº†ï¼Œè¿™é‡Œä»‹ç»ä¸€ä¸‹openVPNå®¢æˆ·ç«¯çš„å®‰è£…æ–¹æ³•ã€‚ Windowså¹³å°ä¸‹è½½å®¢æˆ·ç«¯ å®˜æ–¹ä¸‹è½½åœ°å€é¡µé¢ å®¢æˆ·ç«¯é€‰æ‹© å®˜ç½‘æä¾›ä¸¤ç§Windowsçš„å®¢æˆ·ç«¯ï¼Œæ ¹æ®è‡ªå·±çš„Windowsç‰ˆæœ¬å®‰è£…å³å¯ openvpn-install-2.4.8-I602-Win7.exe openvpn-install-2.4.8-I602-Win10.exe å®‰è£…OpenVPN åŒå‡»ä¸‹è½½å¥½çš„exeæ–‡ä»¶ ä¸€è·¯ä¸‹ä¸€æ­¥ç›´è‡³å®‰è£…å®Œæˆ è·å–OpenVPNé…ç½®æ–‡ä»¶ OpenVPNçš„å®¢æˆ·ç«¯é…ç½®æ–‡ä»¶ä¸º*.ovpn åœ¨ä½¿ç”¨è¯ä¹¦è®¤è¯çš„æƒ…å†µä¸‹ï¼Œåœ¨ovpnæ–‡ä»¶åŒä¸€ä¸ªç›®å½•ä¸‹é¢ä¼šæœ‰ *.crt *.key ca.crt å†å¼€å¯äº†tls-authæ—¶è¿˜ä¼šæœ‰ta.keyæ–‡ä»¶ è¯ä¹¦æ–‡ä»¶å¯ä»¥å†…åµŒåˆ°ovpnæ–‡ä»¶ä¸­ï¼Œå› æ­¤æœ‰æ—¶å€™ä¼šåªæœ‰ä¸€ä¸ªovpnæ–‡ä»¶ é…ç½®æ–‡ä»¶ä½¿ç”¨æ–¹å¼ ç›´æ¥åŒå‡»ovpnæ–‡ä»¶ Windowsç‰ˆOpenVPNå®¢æˆ·ç«¯å®‰è£…å®Œæˆä¹‹åï¼Œä¼šè‡ªåŠ¨å…³è”ovpnæ–‡ä»¶ï¼ŒåŒå‡»å³å¯æ‰“å¼€OpenVPN å¤åˆ¶åˆ°é…ç½®ç›®å½• OpenVPNé»˜è®¤ä¼šä»è¿™ä¸¤ä¸ªç›®å½•æ‰¾é…ç½®æ–‡ä»¶ï¼Œå¯ä»¥å­˜åœ¨å¤šä¸ªä¸åŒçš„ovpné…ç½® C:\\Program Files\\OpenVPN\\config C:\\User\\ç”¨æˆ·å\\OpenVPN\\configï¼ˆé€šè¿‡åŒå‡»ovpnçš„æ–¹å¼ä¼šæŠŠovpnæ‹·è´åˆ°è¿™ä¸ªç›®å½•ï¼‰ è¿æ¥OpenVPNæœåŠ¡å™¨ åŒå‡»æ¡Œé¢çš„OpenVPN GUIå›¾æ ‡ åœ¨ä»»åŠ¡æ å³ä¸‹è§’é€šçŸ¥æ ä¸­æ‰¾åˆ°OpenVPNçš„å›¾æ ‡ï¼Œå³é”® ç‚¹å‡»è¿æ¥ï¼Œåœ¨æœ‰å¤šä¸ªovpné…ç½®æ—¶ï¼Œå¯ä»¥æ ¹æ®åå­—é€‰æ‹©ä¸åŒçš„ovpné…ç½®ï¼Œç„¶åç‚¹å‡»è¿æ¥ è¿æ¥è¿‡ç¨‹ä¼šå‡ºç°å¾ˆå¤šæ—¥å¿—ï¼Œè¿æ¥æˆåŠŸåï¼Œå³ä¸‹è§’ä¼šæç¤ºè¿æ¥æˆåŠŸ å¼€æœºè‡ªå¯åŠ¨ æŠŠ ovpn é…ç½®æ–‡ä»¶æ”¾åœ¨ C:\\Program Files\\OpenVPN\\config è¿è¡Œ services.msc æ‰¾åˆ° OpenVPNService ï¼Œç‚¹å‡» å³é”® ï¼Œé€‰æ‹© å±æ€§ æŠŠå¯åŠ¨ç±»å‹æ”¹ä¸º è‡ªåŠ¨ ï¼Œç‚¹å‡» å¯åŠ¨ ï¼Œç‚¹å‡» ç¡®å®š Linuxå¹³å° è¿™é‡Œä»¥CentOS-7.7ä¸ºä¾‹ï¼ŒYUMæºè‡ªå¸¦äº†OpenVPN-2.4.8 å®‰è£…å®¢æˆ·ç«¯ yum install -y openvpn è·å–é…ç½®æ–‡ä»¶ CentOS-7.7å®‰è£…OpenVPNä¹‹åç³»ç»ŸæœåŠ¡ä¼šè¯†åˆ«*.confçš„æ–‡ä»¶ é…ç½®æ–‡ä»¶è·ŸWindowså¹³å°åªæœ‰æ‰©å±•åçš„åŒºåˆ«ï¼Œå¯ä»¥ç›´æ¥æŠŠWindowså¹³å°çš„ovpnæ–‡ä»¶æ”¹åä¸ºconfæ–‡ä»¶ å¤åˆ¶åˆ°é…ç½®ç›®å½• CentOS-7.7å®‰è£…OpenVPNä¹‹åä¼šåœ¨/etc/openvpnä¸‹åˆ›å»ºclientå’Œserverç›®å½• å¯åŠ¨OpenVPNå®¢æˆ·ç«¯æœåŠ¡ ä»¥é…ç½®æ–‡ä»¶abc.confä¸ºä¾‹ systemctl start openvpn-client@abc.service å¼€æœºè‡ªå¯åŠ¨ systemctl enable openvpn-client@abc.service MacOSå¹³å°ç³»ç»Ÿè¦æ±‚ OS X 10.8 Mountain Lion OS X 10.9 Mavericks OS X 10.10 Yosemite OS X 10.11 El Capitan macOS 10.12 Sierra macOS 10.13 High Sierra macOS 10.14 Mojave ä¸‹è½½å®¢æˆ·ç«¯ å®˜ç½‘ä¸‹è½½é¡µé¢ é‡Œé¢æœ‰å‡ ä¸ªå®¢æˆ·ç«¯å¯ä»¥é€‰æ‹© OpenVPN Connect Client for macOS version 2.7.1.100 OpenVPN Connect for macOS version 3.1.0 (885) beta Tunnelblick ä»¥ä¸Šä¸‹è½½åˆ°çš„éƒ½æ˜¯dmgæ–‡ä»¶ï¼Œç›´æ¥å®‰è£… æ–‡ç« å‚è€ƒ OpenVPNå®¢æˆ·ç«¯(Windows/Linux/MacOS)è¿æ¥OpenVPNæœåŠ¡å™¨","tags":[{"name":"Linux","slug":"Linux","permalink":"https://joker208.github.io/tags/Linux/"},{"name":"openVPN","slug":"openVPN","permalink":"https://joker208.github.io/tags/openVPN/"}]},{"title":"sshç™»é™†å¿½ç•¥known_hostsæ–‡ä»¶","date":"2020-03-04T16:00:00.000Z","path":"2020/03/05/sshç™»é™†å¿½ç•¥known_hostsæ–‡ä»¶/","text":"åœ¨å¹³æ—¶å·¥ä½œä¸­ï¼Œéœ€è¦SSHç™»é™†åˆ°åˆ«çš„Linuxä¸»æœºä¸Šå»ï¼Œä½†æœ‰æ—¶å€™SSHç™»é™†ä¼šè¢«ç¦æ­¢ å¹¶å¼¹å‡ºå¦‚ä¸‹ç±»ä¼¼æç¤ºï¼š @@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@ WARNING: REMOTE HOST IDENTIFICATION HAS CHANGED! @@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@IT IS POSSIBLE THAT SOMEONE IS DOING SOMETHING NASTY!Someone could be eavesdropping on you right now (man-in-the-middle attack)!It is also possible that the RSA host key has just been changed.The fingerprint for the RSA key sent by the remote host is36:68:a6:e6:43:34:6b:82:d7:f4:df:1f:c2:e7:37:cc.Please contact your system administrator.Add correct host key in /u/xlian008/.ssh/known_hosts to get rid of this message.Offending key in /u/xlian008/.ssh/known_hosts:2RSA host key for 135.1.35.130 has changed and you have requested strict checking.Host key verification failed. æ¯”è¾ƒå¥‡æ€ªï¼Œäºæ˜¯ç ”ç©¶äº†ä¸€ä¸‹ã€‚ sshä¼šæŠŠä½ æ¯ä¸ªä½ è®¿é—®è¿‡è®¡ç®—æœºçš„å…¬é’¥(public key)éƒ½è®°å½•åœ¨~/.ssh/known_hostsã€‚å½“ä¸‹æ¬¡è®¿é—®ç›¸åŒè®¡ç®—æœºæ—¶ï¼ŒOpenSSHä¼šæ ¸å¯¹å…¬é’¥ã€‚å¦‚æœå…¬é’¥ä¸åŒï¼ŒOpenSSHä¼šå‘å‡ºè­¦å‘Šï¼Œ é¿å…ä½ å—åˆ°DNS Hijackä¹‹ç±»çš„æ”»å‡»ã€‚æˆ‘åœ¨ä¸Šé¢åˆ—å‡ºçš„æƒ…å†µï¼Œå°±æ˜¯è¿™ç§æƒ…å†µã€‚ åŸå› ï¼šä¸€å°ä¸»æœºä¸Šæœ‰å¤šä¸ªLinuxç³»ç»Ÿï¼Œä¼šç»å¸¸åˆ‡æ¢ï¼Œé‚£ä¹ˆè¿™äº›ç³»ç»Ÿä½¿ç”¨åŒä¸€ipï¼Œç™»å½•è¿‡ä¸€æ¬¡åå°±ä¼šæŠŠsshä¿¡æ¯è®°å½•åœ¨æœ¬åœ°çš„~/.ssh/known_hsotsæ–‡ä»¶ä¸­ï¼Œåˆ‡æ¢è¯¥ç³»ç»Ÿåå†ç”¨sshè®¿é—®è¿™å°ä¸»æœºå°±ä¼šå‡ºç°å†²çªè­¦å‘Šï¼Œéœ€è¦æ‰‹åŠ¨åˆ é™¤ä¿®æ”¹known_hsotsé‡Œé¢çš„å†…å®¹ã€‚ æœ‰ä»¥ä¸‹ä¸¤ä¸ªè§£å†³æ–¹æ¡ˆï¼š æ‰‹åŠ¨åˆ é™¤ä¿®æ”¹known_hsotsé‡Œé¢çš„å†…å®¹ï¼› ä¿®æ”¹é…ç½®æ–‡ä»¶â€œ~/.ssh/configâ€ï¼ŒåŠ ä¸Šè¿™ä¸¤è¡Œï¼Œé‡å¯æœåŠ¡å™¨ã€‚ StrictHostKeyChecking no UserKnownHostsFile /dev/null ä¼˜ç¼ºç‚¹ï¼š éœ€è¦æ¯æ¬¡æ‰‹åŠ¨åˆ é™¤æ–‡ä»¶å†…å®¹ï¼Œä¸€äº›è‡ªåŠ¨åŒ–è„šæœ¬çš„æ— æ³•è¿è¡Œï¼ˆåœ¨SSHç™»é™†æ—¶å¤±è´¥ï¼‰ï¼Œä½†æ˜¯å®‰å…¨æ€§é«˜ï¼› SSHç™»é™†æ—¶ä¼šå¿½ç•¥known_hsotsçš„è®¿é—®ï¼Œä½†æ˜¯å®‰å…¨æ€§ä½ï¼› æ–‡ç« å‚è€ƒ https://blog.csdn.net/yasaken/article/details/7348441","tags":[{"name":"Linux","slug":"Linux","permalink":"https://joker208.github.io/tags/Linux/"}]},{"title":"crontabç”¨æ³•æ€»ç»“","date":"2020-02-03T06:25:08.000Z","path":"2020/02/03/crontabç”¨æ³•æ€»ç»“/","text":"æ­å»ºå¥½æœåŠ¡å™¨ä»¥åï¼Œç»å¸¸éœ€è¦å¼€å¯ä¸€äº›å®šæ—¶ä»»åŠ¡ï¼Œä¾‹å¦‚å®šæ—¶æ ¡å¯¹æ—¶é—´ å€Ÿç€è¿™ä¸ªæœºä¼šæ€»ç»“ä¸€ä¸‹crontabå®šæ—¶ä»»åŠ¡çš„ç”¨æ³• crondä»‹ç»crond å’Œcrontabæ˜¯ä¸å¯åˆ†å‰²çš„ã€‚crontabæ˜¯ä¸€ä¸ªå‘½ä»¤ï¼Œå¸¸è§äºUnixå’Œç±»Unixçš„æ“ä½œç³»ç»Ÿä¹‹ä¸­ï¼Œç”¨äºè®¾ç½®å‘¨æœŸæ€§è¢«æ‰§è¡Œçš„æŒ‡ä»¤ã€‚è¯¥å‘½ä»¤ä»æ ‡å‡†è¾“å…¥è®¾å¤‡è¯»å–æŒ‡ä»¤ï¼Œå¹¶å°†å…¶å­˜æ”¾äºâ€œcrontabâ€æ–‡ä»¶ä¸­ï¼Œä»¥ä¾›ä¹‹åè¯»å–å’Œæ‰§è¡Œã€‚è¯¥è¯æ¥æºäºå¸Œè…Šè¯­chronos(Ï‡ÏÏŒÎ½Î¿Ï‚)ï¼ŒåŸæ„æ˜¯æ—¶é—´ã€‚ è€Œcrondæ­£æ˜¯å®ƒçš„å®ˆæŠ¤è¿›ç¨‹ã€‚cronæœåŠ¡æ˜¯ä¸€ä¸ªå®šæ—¶æ‰§è¡Œçš„æœåŠ¡ï¼Œå¯ä»¥é€šè¿‡crontab å‘½ä»¤æ·»åŠ æˆ–è€…ç¼–è¾‘éœ€è¦å®šæ—¶æ‰§è¡Œçš„ä»»åŠ¡ã€‚ å®‰è£… å¹¶è®¾ç½®å¼€æœºè‡ªå¯ 1234yum install crontabs systemctl enable crond systemctl start crond systemctl stop crond è®¾ç½®å®šæ—¶ä»»åŠ¡ 1vi /etc/crontab æ‰“å¼€åæ˜¾ç¤º SHELL=/bin/bash PATH=/sbin:/bin:/usr/sbin:/usr/bin MAILTO=root # For details see man 4 crontabs # Example of job definition: # .â€”â€”â€”â€”â€”- minute (0 - 59) è¡¨ç¤ºåˆ†é’Ÿ1ï½59 æ¯åˆ†é’Ÿç”¨æˆ–è€… /1è¡¨ç¤º # | .â€”â€”â€”â€”- hour (0 - 23) è¡¨ç¤ºå°æ—¶1ï½23ï¼ˆ0è¡¨ç¤º0ç‚¹ï¼‰ # | | .â€”â€”â€”- day of month (1 - 31) è¡¨ç¤ºæ—¥æœŸ1ï½31 # | | | .â€”â€”- month (1 - 12) OR jan,feb,mar,apr â€¦ æœˆä»½1ï½12(å¯ä»¥ä½¿ç”¨è‹±æ–‡ç®€å†™) # | | | | .â€”- day of week (0 - 6) (Sunday=0 or 7)OR sun,mon,tue,wed,thu,fri,satæ˜ŸæœŸ0ï½6(0æˆ–7è¡¨ç¤ºæ˜ŸæœŸå¤©)(å¯ä»¥ä½¿ç”¨è‹±æ–‡ç®€å†™) # | | | | | # * user-name command to be executed è¡¨ç¤ºè¿è¡Œçš„å‘½ä»¤ 12#åŠ è½½ä»»åŠ¡,ä½¿ä¹‹ç”Ÿæ•ˆ crontab /etc/crontab crontab /etc/crontab åŠ è½½ä»»åŠ¡çš„åŸç†å¯ä»¥ç†è§£ä¸º æŠŠ/etc/crontabæ–‡ä»¶é‡Œé¢çš„å†…å®¹å¤åˆ¶åˆ°crontabçš„æ‰§è¡Œåˆ—è¡¨é‡Œï¼Œæ‰§è¡Œåˆ—è¡¨é‡Œçš„å†…å®¹å¯èƒ½å’Œ/etc/crontabæ–‡ä»¶çš„å†…å®¹ä¸€æ ·ï¼Œä½†æ˜¯è¿™ä¸¤ä¸ªä¸œè¥¿æ­£å¸¸æƒ…å†µä¸‹ä¸ä¼šäº’ç›¸å½±å“ï¼Œåªæœ‰åœ¨æ‰§è¡Œcrontab /etc/crontabæ—¶æ‰ä¼šæŠŠå†…å®¹å¤åˆ¶è¿‡å» crontabçš„æ‰§è¡Œåˆ—è¡¨ä¸­çš„å†…å®¹å¯ä»¥ä½¿ç”¨ä»¥ä¸‹è¯­å¥ç›´æ¥æ“ä½œ 12345678#æŸ¥çœ‹ä»»åŠ¡ crontab -l #ç¼–è¾‘crontab crontab -e #åˆ é™¤ï¼ˆä¸ä¼šåˆ é™¤/etc/crontabå†…å®¹ï¼Œåªåˆ é™¤å½“å‰å·²åŠ è½½çš„ä»»åŠ¡ï¼‰ crontab -r #æ·»åŠ ï¼ˆä¸ä¼šæ·»åŠ /etc/crontabå†…å®¹ï¼Œç›´æ¥æ·»åŠ ä»»åŠ¡ï¼‰crontab -e crondä¸‰ç§è®¾ç½®æ–¹å¼ ç¬¬ä¸€ç§ åœ¨/etc/crontabä¸‹è®¾ç½®ï¼ŒæŒ‡å®šç”¨æˆ·åçš„ vimå‘½ä»¤è¿›å…¥/etc/crontab åœ¨æœ€åä¸€è¡ŒåŠ ä¸Šæ‰§è¡Œçš„å‘½ä»¤ï¼ˆéœ€è¦æŒ‡å®šç”¨æˆ·åï¼‰ crontab /etc/crontabæˆ–è€…é‡å¯crontabï¼Œä½¿é…ç½®ç”Ÿæ•ˆ ç¬¬äºŒç§ ç›´æ¥ç”¨crontab -eï¼Œä¸éœ€è¦æŒ‡å®šç”¨æˆ·ï¼Œå¦‚æœæ˜¯rootæƒé™ï¼Œé»˜è®¤æ˜¯rootå®šæ—¶çš„ crontab -eè¿›å…¥ ç›´æ¥è¾“å…¥æ‰§è¡Œçš„å‘½ä»¤ ï¼ˆå¯ä»¥ä¸æŒ‡å®šç”¨æˆ·ï¼‰ ä¿å­˜é€€å‡ºï¼ˆé…ç½®å·²ç»ç”Ÿæ•ˆï¼‰ ç¬¬ä¸‰ç§ ç›´æ¥å†™å…¥/var/spool/cron/root vi /var/spool/cron/root ä¿å­˜é€€å‡ºï¼ˆé…ç½®å·²ç»ç”Ÿæ•ˆï¼‰ è®¾ç½®æ—¶é—´æ ¼å¼ä¸¾ä¾‹ å‘ç°ç½‘ä¸Šæœ‰å¾ˆå¤šé”™è¯¯çš„å†™æ³• é”™è¯¯è¯´æ³•ï¼š æ¯ä¸€å°æ—¶é‡å¯apache * /1 /usr/local/etc/rc.d/lighttpd restart æ­£ç¡®è¯´æ³•ï¼š æ¯ä¸€å°æ—¶é‡å¯apache(é”™è¯¯çš„) *ä»£è¡¨æ¯åˆ†é’Ÿå°±æ‰§è¡Œä¸€æ¬¡ï¼Œè¯­å¥çš„æ„æ€ä¸ºæ¯å°æ—¶çš„æ¯åˆ†é’Ÿéƒ½åœ¨æ‰§è¡Œé‡å¯apache * /1 /usr/local/etc/rc.d/lighttpd restart å…¶å®ï¼Œä¸‹é¢çš„ä¸¤ç§å†™æ³•æ•ˆæœç›¸åŒ * /1 /usr/local/etc/rc.d/lighttpd restart * /usr/local/etc/rc.d/lighttpd restart å¦å¤–ï¼Œæ³¨æ„åŒºåˆ†æ¯å°æ—¶æ‰§è¡Œä»»åŠ¡çš„å†™æ³• 0 # é”™è¯¯ /60 * # æ­£ç¡® ç¬¬ä¸€ä¸ªå†™æ³•æ˜¯åœ¨æ¯å°æ—¶çš„0åˆ†æ‰§è¡Œï¼Œä¸ä»»åŠ¡çš„å¼€å§‹æ—¶é—´æ— å…³ ç¬¬äºŒä¸ªå†™æ³•æ˜¯ä»æ‰§è¡Œä»»åŠ¡çš„æ—¶é—´ç‚¹å¼€å§‹ï¼Œæ¯éš”ä¸€å°æ—¶æ‰§è¡Œä¸€æ¬¡ å…¶ä»–ç”¨æ³• #æ¯å¤©ï¼Œæ¯30åˆ†é’Ÿæ‰§è¡Œä¸€æ¬¡ mycommandå‘½ä»¤ /30 root /usr/local/mycommand.sh #æ¯å¤©å‡Œæ™¨ä¸‰ç‚¹ï¼Œæ‰§è¡Œå‘½ä»¤è„šæœ¬ï¼ŒPS:è¿™é‡Œç”±äºç¬¬ä¸€ä¸ªçš„åˆ†é’Ÿæ²¡æœ‰è®¾ç½®ï¼Œé‚£ä¹ˆå°±ä¼šæ¯å¤©å‡Œæ™¨3ç‚¹çš„æ¯åˆ†é’Ÿéƒ½æ‰§è¡Œä¸€æ¬¡å‘½ä»¤ 3 root /usr/local/mycommand.sh #è¿™æ ·å°±æ˜¯æ¯å¤©å‡Œæ™¨ä¸‰ç‚¹æ•´æ‰§è¡Œä¸€æ¬¡å‘½ä»¤è„šæœ¬ 0 3 root /usr/local/mycommand.sh #æ¯å¤©11ç‚¹åˆ°13ç‚¹ä¹‹é—´ï¼Œæ¯10åˆ†é’Ÿæ‰§è¡Œä¸€æ¬¡å‘½ä»¤è„šæœ¬ /10 11-13 root /usr/local/mycommand.sh #æ¯å°æ—¶çš„10-30åˆ†é’Ÿï¼Œæ¯åˆ†é’Ÿæ‰§è¡Œä¸€æ¬¡å‘½ä»¤è„šæœ¬ï¼Œå…±æ‰§è¡Œ20æ¬¡ 10-30 root /usr/local/mycommand.sh #æ¯å°æ—¶çš„10,30åˆ†é’Ÿï¼Œåˆ†åˆ«æ‰§è¡Œä¸€æ¬¡å‘½ä»¤è„šæœ¬ï¼Œå…±æ‰§è¡Œ2æ¬¡ 10,30 root /usr/local/mycommand.sh é™„ä¸Šcrontabæµ‹è¯•æ–¹æ³• æ€è·¯ï¼šå°†å½“å‰æ—¶é—´è¾“å…¥åˆ°æ—¥å¿—ä¸­ DATEVAR=date * root /bin/echo $($DATEVAR) &gt;&gt; /tmp/crontab.log æ–‡ç« å‚è€ƒ https://www.cnblogs.com/emanlee/p/10293762.html https://www.jb51.net/article/117241.htm https://www.cnblogs.com/p0st/p/9482167.html https://blog.csdn.net/liu0808/article/details/80668705 https://www.cnblogs.com/p0st/p/9482167.html http://www.voidcn.com/article/p-epupsmuh-bty.html","tags":[{"name":"crontab","slug":"crontab","permalink":"https://joker208.github.io/tags/crontab/"},{"name":"Linux","slug":"Linux","permalink":"https://joker208.github.io/tags/Linux/"}]},{"title":"Dockerè®¿é—®å®¿ä¸»æœºç«¯å£","date":"2019-12-19T06:25:08.000Z","path":"2019/12/19/Dockerè®¿é—®å®¿ä¸»æœºç«¯å£/","text":"Dockerå®¹å™¨æœ‰çš„æ—¶å€™éœ€è¦è®¿é—®å®¿ä¸»æœºçš„æœåŠ¡ï¼Œä½†æ˜¯127.0.0.1å¹¶ä¸æ˜¯å®¿ä¸»æœºè€Œæ˜¯Dockerè‡ªå·±çš„æœåŠ¡ï¼Œå¯ä»¥ç”¨ä¸‹é¢çš„è¯­å¥æŸ¥è¯¢å®¿ä¸»æœºçš„ipï¼š 1ip addr show docker0 | grep -Po &apos;inet \\K[\\d.]+&apos; å¾—åˆ°çš„ipåœ°å€ä¸º172.17.42.1 ç»è¿‡æµ‹è¯•å‘ç°è¿™ä¸ªåœ°å€æ˜¯å›ºå®šçš„ï¼Œæ¯ä¸€ä¸ªDockerå®¹å™¨éƒ½æ˜¯è¿™ä¸ªip ä»¥ä¸‹ä¸ºstackoverflowåŸæ–‡çš„é—®é¢˜å’Œè§£ç­”ï¼š I have a docker container running jenkins. As part of the build process, I need to access a web server that is run locally on the host machine. Is there a way the host web server (which can be configured to run on a port) can be exposed to the jenkins container? EDIT: Iâ€™m running docker natively on a Linux machine. UPDATE: In addition to @larsks answer below, to get the IP address of the Host IP from the host machine, I do the following: 1ip addr show docker0 | grep -Po &apos;inet \\K[\\d.]+&apos; 172.17.42.1 When running Docker natively on Linux, you can access host services using the IP address of the docker0 interface. From inside the container, this will be your default route. For example, on my system: 12345678910111213$ ip addr show docker0 7: docker0: &lt;NO-CARRIER,BROADCAST,MULTICAST,UP&gt; mtu 1500 qdisc noqueue state DOWN group default link/ether 00:00:00:00:00:00 brd ff:ff:ff:ff:ff:ff inet 172.17.0.1/16 brd 172.17.255.255 scope global docker0 valid_lft forever preferred_lft forever inet6 fe80::f4d2:49ff:fedd:28a0/64 scope link valid_lft forever preferred_lft forever And inside a container: 123# ip route show default via 172.17.0.1 dev eth0 172.17.0.0/16 dev eth0 src 172.17.0.4 Itâ€™s fairly easy to extract this IP address using a simple shell script: 123#!/bin/sh hostip=$(ip route show | awk &apos;/default/ &#123;print $3&#125;&apos;) echo $hostip You may need to modify the iptables rules on your host to permit connections from Docker containers. Something like this will do the trick: 1\\# iptables -A INPUT -i docker0 -j ACCEPT This would permit access to any ports on the host from Docker containers. Note that: iptables rules are ordered, and this rule may or may not do the right thing depending on what other rules come before it. you will only be able to access host services that are either (a) listening on INADDR_ANY (aka 0.0.0.0) or that are explicitly listening on the docker0 interface. æ–‡ç« å‚è€ƒ https://stackoverflow.com/questions/31324981/how-to-access-host-port-from-docker-container","tags":[{"name":"docker","slug":"docker","permalink":"https://joker208.github.io/tags/docker/"}]},{"title":"æœåŠ¡å™¨å…¨å±€ä»£ç†","date":"2019-08-15T06:25:08.000Z","path":"2019/08/15/æœåŠ¡å™¨å…¨å±€ä»£ç†/","text":"ä¸ºäº†ç»™æœåŠ¡å™¨æ›´æ–°ä¸€äº›åº”ç”¨ éœ€è¦ç»™æœåŠ¡å™¨ç§‘å­¦ä¸Šç½‘å¹¶å¼€å¯å…¨å±€ä»£ç† sså®¢æˆ·ç«¯å®‰è£… pip install shadowsocks sudo vi /etc/shadowsocks.json { â€‹ â€œserverâ€:â€103.16.229.46â€, â€‹ â€œserver_portâ€:5432, â€‹ â€œlocal_addressâ€: â€œ127.0.0.1â€, â€‹ â€œlocal_portâ€:1080, â€‹ â€œpasswordâ€:â€biubiubiu~â€, â€‹ â€œtimeoutâ€:300, â€‹ â€œmethodâ€:â€aes-256-cfbâ€ } å®¢æˆ¶ç«¯å¯åŠ¨æˆ–è€…åœæ­¢ssæœåŠ¡ã€‚ sslocal -c /etc/shadowsocks.json -d start sslocal -c /etc/shadowsocks.json -d stop privoxyå®‰è£…wget https://nchc.dl.sourceforge.net/project/ijbswa/Sources/3.0.26%20%28stable%29/privoxy-3.0.26-stable-src.tar.gz tar xf privoxy-3.0.26-stable-src.tar.gz cd privoxy-3.0.26-stable useradd privoxy autoheader &amp;&amp; autoconf ./configure make &amp;&amp; make install sudo vim /usr/local/etc/privoxy/config ä¿®æ”¹ listen-address 127.0.0.1:8118 forward-socks5t / 127.0.0.1:1080 . sudo vim /etc/profile æ·»åŠ ä»¥ä¸‹å‡ è¡Œï¼š export http_proxy=http://127.0.0.1:8118 export ftp_proxy=http://127.0.0.1:8118 source /etc/profile service privoxy start éªŒè¯curl http://httpbin.org/ip","tags":[{"name":"ss","slug":"ss","permalink":"https://joker208.github.io/tags/ss/"},{"name":"ä»£ç†","slug":"ä»£ç†","permalink":"https://joker208.github.io/tags/ä»£ç†/"}]},{"title":"é©¬æ¥è¥¿äºšæ—…æ¸¸æ”»ç•¥","date":"2019-07-08T07:08:21.000Z","path":"2019/07/08/é©¬æ¥è¥¿äºšæ—…è¡Œæ”»ç•¥/","text":"é©¬æ¥è¥¿äºšåŒäººæ—…è¡Œæ³¨æ„äº‹é¡¹ï¼š æ’å¤´ä¸åŒ æ²¡æœ‰æ—¶å·® è´§å¸å…‘æ¢ï¼š1MYR=1.7RMB åœ°é“ä¹˜åä»·æ ¼ï¼Œäº¤é€šä»·æ ¼ äºšè¡Œé£æœºå¼€çš„å¾ˆè¶³ï¼Œåé£æœºéœ€è¦å¸¦è¡£æœ ç­¾è¯/æœºç¥¨é¢„å®š æå‰å‡†å¤‡ç”µè¯å¡ æ½œæ°´æå‰å‡†å¤‡ï¼ˆæ°´æ¯æœã€è„šè¹¼ç­‰ï¼‰ æ•´ä½“è¡Œç¨‹æ¦‚è§ˆï¼š 9/30-10/1 å¹¿å·-&gt;å‰éš†å¡ é£æœº 10/2 å‰éš†å¡-&gt;æ–—æ¹– é£æœº 10/2 æ–— æ¹–-&gt;ä»™æœ¬é‚£ åè½¦ï¼ˆæœºåœºæ‰“è½¦ï¼Œ25MYR/äººï¼‰ 10/6-10/7 å‰éš†å¡-&gt;å¹¿å· ä»·æ ¼ï¼šÂ¥2100*2=Â¥4200ï¼ˆå¾€è¿”ï¼‰ å‰éš†å¡ï¼š**è´¹ç”¨æ€»è®¡ï¼šÂ¥1000** åŒå­å¡”ï¼š ç”¨æ—¶1-3å°æ—¶ äº¤é€šï¼šå‰å¾€å›½å®¶çŸ³æ²¹å…¬å¸åŒå­å¡”ï¼Œå¯ä¹˜Putraçº¿è½»è½¨ç›´è¾¾åº•å±‚ï¼›æˆ–ä¹˜LRTåˆ°KLCCç«™ï¼Œå‡ºç«™ä¾¿å¯åˆ°è¾¾KLCCå•†åœºå†… é—¨ç¥¨ï¼š MYR 80 = Â¥140 *2=Â¥280 å¼€æ”¾æ—¶é—´ï¼š09:00-21:00,åœæ­¢å…¥åœºæ—¶é—´:20:30 å†å²ï¼šå»ºæˆäº1997å¹´ï¼Œæ˜¯ä¸€åº§è¶…ç»å…¸ç°ä»£çš„å»ºç­‘ç‰©ï¼Œä¹Ÿæ˜¯ç›®å‰å…¨ä¸–ç•Œæœ€é«˜çš„ä¸¤åº§ç›¸è¿å»ºç­‘ç‰©ã€‚è¿™åº§ç¾è½®ç¾å¥‚çš„ç‰¹å‡ºå»ºç­‘ç‰©çš„å»ºç­‘ç†å¿µæ˜¯ç”±ä¼Šæ–¯å…°5å¤§æ”¯æŸ±æ€æƒ³æ‰€æ¿€å‘è€Œæ¥çš„ï¼Œå…±88å±‚æ¥¼é«˜ã€‚åŒå³°å¡”å†…è®¾æœ‰å›½æ²¹äº¤å“ä¹å…ï¼Œæ˜¯é©¬æ¥è¥¿äºšäº¤å“ä¹é˜ŸåŠå›½æ²¹è¡¨æ¼”è‰ºæœ¯å›¢ä¾‹å¸¸ç»ƒä¹ åŠè¡¨æ¼”çš„åœºæ‰€ã€‚ç™»ä¸ŠåŒå¡”å¤§æ¥¼ï¼Œæ•´ä¸ªå‰éš†å¡å¸‚ç§€ä¸½é£å…‰å°½æ”¶çœ¼åº•ï¼Œå°¤å…¶æ˜¯åœ¨æ™šä¸Šç¯å…‰ç’€ç’¨çš„æ—¶å€™ï¼Œæ™¯è‰²å°¤ä¸ºå£®ç¾ã€‚ å®‰æ’ï¼šçœ‹çœ‹å‰éš†å¡æ™¯è‰²ï¼Œé€›é€›è¡—ã€‚åˆé¤å°±åœ¨è¿™å„¿åƒå•¦ å›½å®¶æ¸…çœŸå¯ºï¼šç”¨æ—¶1-3å°æ—¶ï¼ˆç”·å£«ã€å¥³å£«éœ€ç©¿é•¿è¡£ï¼‰ äº¤é€šï¼šå›½å®¶æ¸…çœŸå¯ºä½äºå‰éš†å¡çš„Jl Perdanaè¡—ï¼Œå‰éš†å¡è€ç«è½¦ç«™è¾¹ä¸Šï¼Œå¯æ­¥è¡Œå‰å¾€ é—¨ç¥¨ï¼šå…è´¹ï¼ˆtips: åœ¨æ­£é—¨å…¥å£å¤„ä½œè®¿å®¢ç™»è®°ï¼‰ å¼€æ”¾æ—¶é—´ï¼šå‘¨ä¸€-å‘¨å››ï¼š09:00-12:00ï¼›å‘¨äº”ï¼š17:30-18:30ï¼›å‘¨å…­-å‘¨æ—¥ï¼š15:00-16:00 å†å²ï¼šå»ºäº1974å¹´ï¼Œå¯å®¹çº³8000äººåŒæ—¶ç¥ˆç¥·ï¼Œæœ€ä»¤äººç©ç›®ä¹‹å¤„åˆ™åœ¨äºå…¶å±‚å çš„ä¼çŠ¶å±‹é¡¶ã€‚å›æ•™å ‚çš„ä¸»è¦åœ†é¡¶å¤„æœ‰18é¢—æ˜Ÿï¼Œä»£è¡¨é©¬æ¥13å·å±åŠå›æ•™çš„5å¤§æ”¯æŸ±ã€‚ä»¤äººæƒŠå¹çš„æ˜¯å…¶å¤šè¤¶ä¼å½¢å±‹é¡¶ï¼Œ73å…¬å°ºé«˜å°–å¡”æ›´ç›´æŒ‡è“å¤©ï¼Œç²¾è‡´å·ç„¶ã€‚å¯ºå†…ç»å ‚ã€èµ°å»Šã€å›¾ä¹¦å®¤ç­‰çš„è£…æ½¢ä¸éº¦åŠ çš„ä¸‰å¤§æ¸…çœŸå¯ºç›¸ä»¿ã€‚æ¯é€¢æ˜ŸæœŸäº”ä¸»éº»æ—¥ï¼Œè™”è¯šçš„æ•™å¾’ä»¬ä¾¿æ¶Œå‘è¿™é‡Œåšç¥ˆç¥·ã€‚ å®‰æ’ï¼šæ„Ÿå—å®—æ•™æ–‡åŒ–ï¼Œä½“ä¼šå½“åœ°å®—æ•™ç‰¹è‰² ç‹¬ç«‹å¹¿åœºï¼šç”¨æ—¶1å°æ—¶ä»¥ä¸‹ äº¤é€šï¼šç‹¬ç«‹å¹¿åœºä½äºè‹ä¸¹é˜¿éƒ½æ²™æœ«å¤§å¦å¯¹é¢ï¼Œå¯ä¹˜åLRTé»„çº¿åˆ°Masjid Jamekç«™ï¼Œå†å‘è¥¿æ­¥è¡Œçº¦10-15åˆ†é’Ÿå³è¾¾ã€‚ é—¨ç¥¨ï¼šå…è´¹ å¼€æ”¾æ—¶é—´ï¼šå…¨å¤© å†å²ï¼šç‹¬ç«‹å¹¿åœºåè½äºè‹ä¸¹é˜¿éƒ½æ²™æœ«å¤§å¦å¯¹é¢ï¼Œç»¿è‰å¦‚èŒµçš„å¹¿åœºæå…·å†å²ä»·å€¼ã€‚ä¸ºçºªå¿µé©¬æ¥è¥¿äºšè„±ç¦»è‹±å›½ç»Ÿæ²»ç‹¬ç«‹è€Œå»ºï¼Œæ¯å¹´ä¼šåœ¨æ­¤ä¸¾åŠå›½åº†æ´»åŠ¨ã€‚å¹¿åœºå¯¹é¢æ˜¯åŸå¸‚é•¿å»Šï¼Œé—¨å£çš„â€œI LOVE KLâ€æ˜¯å…¶æ ‡å¿—æ€§logoã€‚å‘¨è¾¹æœ‰åœ£ç›ä¸½æ•™å ‚ã€å†å²åšç‰©é¦†ã€é›ªå…°èªä¿±ä¹éƒ¨ç­‰å¾ˆå¤šæ··åˆå„å›½ç‰¹è‰²çš„è€å¼å»ºç­‘ã€‚ å®‰æ’ï¼šéšä¾¿èµ°èµ° ä¸­å¤®å¸‚åœº äº¤é€šï¼šä¹˜åLRTé»„çº¿åˆ°Pasar Seniç«™ï¼Œå†å¾€åŒ—æ­¥è¡Œçº¦10åˆ†é’Ÿï¼›æˆ–ä¹˜åLRTé»„çº¿ï¼ˆæˆ–çº¢çº¿ï¼‰åˆ°Masjid Jamekç«™ï¼Œå†å¾€å—æ­¥è¡Œçº¦10åˆ†é’Ÿ æ— é—¨ç¥¨ å¼€æ”¾æ—¶é—´ï¼šæ—©ä¸Š10ç‚¹è‡³æ™šä¸Š10ç‚¹ å†å²ï¼šè¿‡å»æ˜¯å‰éš†å¡ä¸»è¦â€œæ¹¿å¸‚åœºâ€ï¼Œç°åœ¨è¿™ä¸ªéœ²å¤©é›†å¼çš„è‰ºæœ¯åŠæ‰‹å·¥è‰ºå“ä¸­å¿ƒï¼Œåˆ™æ±‡é›†äº†æœ¬åœ°è‰ºæœ¯å®¶ä¸å·¥åŒ çš„æ°ä½œï¼›æ—¢å¯å³æ—¶è®©ç”»å®¶ç»™ä½ ç”»å¼ è‚–åƒç”»ï¼Œä¹Ÿå¯æ…¢æ…¢æ¬£èµå’ŒæŒ‘é€‰çºªå¿µå“ï¼Œæ›´å¯åˆ°ä¼ ç»Ÿè¯æåº—æœç½—çè´µçš„è¯å“ã€‚ å®‰æ’ï¼šåˆ°å¤„çœ‹çœ‹é€›é€›ï¼Œä¹°ç‚¹ç‰¹è‰²å•†å“ã€‚åƒæ™šé¤ ä½å®¿ï¼ˆåŒå­å¡”å¯¹é¢æ°‘å®¿ï¼Œæ— è¾¹æ³³æ± ï¼‰ ä»·æ ¼ï¼šÂ¥500 å®‰æ’ï¼šæ™šä¸Šçœ‹ç²¾åŠ›ï¼Œæœ‰æ—¶é—´çš„è¯ï¼Œå°±å»æ— è¾¹æ³³æ± ç©ï¼Œæ²¡æ—¶é—´çš„è¯ç¬¬äºŒå¤©æ—©ä¸Šå»ï¼Œåœ¨æ— è¾¹æ³³æ± ç…§æ—¥å‡º 10/2å‰éš†å¡-&gt;æ–—æ¹–-&gt;ä»™æœ¬é‚£ è´¹ç”¨æ€»è®¡ï¼šÂ¥2000 è·¯ç¨‹ï¼šå‰éš†å¡-&gt;æ–—æ¹– é£æœºä¸¤å°æ—¶ï¼›æ–—æ¹–-&gt;ä»™æœ¬é‚£ æ±½è½¦1-2å°æ—¶ ä»·æ ¼ï¼šæœºç¥¨å¾€è¿”ï¼šÂ¥800*2=Â¥1600 è½¦è´¹ï¼šå•ç¨‹Â¥45*2=Â¥90ï¼› ä»™æœ¬é‚£ 10/2-10/3é•‡ä¸Šå‘†ä¸€å¤©ï¼Œé€›é€› ä½å®¿ï¼šÂ¥300 10/3-10/5ä»™æœ¬é‚£æ°´å±‹ï¼Œæ½œæ°´ ä½å®¿ï¼šÂ¥4500ï¼ˆä½¿ç”¨ä¿¡ç”¨å¡æœ‰1%æ‰‹ç»­è´¹ï¼‰ 10/5 å›å‰éš†å¡ è½¦è´¹ï¼šÂ¥100 10/6-10/7 å›å¹¿å·","tags":[{"name":"é©¬æ¥è¥¿äºšğŸ‡²ğŸ‡¾","slug":"é©¬æ¥è¥¿äºšğŸ‡²ğŸ‡¾","permalink":"https://joker208.github.io/tags/é©¬æ¥è¥¿äºšğŸ‡²ğŸ‡¾/"}]},{"title":"ä»¥å¤ªåŠå­¦ä¹ ç¬”è®°ï¼ˆåå…­ï¼‰","date":"2018-09-25T16:00:00.000Z","path":"2018/09/26/ä»¥å¤ªåŠå­¦ä¹ ç¬”è®°ï¼ˆåå…­ï¼‰/","text":"ä»¥å¤ªåŠæºç åˆ†æä»¥å¤ªåŠå…±è¯†ç®—æ³•åˆ†ä¸ºä¸¤ç±» Ethashç®—æ³• Cliqueç®—æ³• EthashEthashç®—æ³•ä¹Ÿå«åšæŒ–çŸ¿ç®—æ³•ï¼Œæ˜¯ä»¥å¤ªåŠåŸºäºPOWå·¥ä½œé‡è¯æ˜çš„å…±è¯†å¼•æ“ Ethashç®—æ³•è¿‡ç¨‹ï¼š é€šè¿‡æ‰«æå—å¤´ä¸ºæ¯ä¸ªåŒºå—è®¡ç®—å‡ºä¸€ä¸ªseed æ ¹æ®seedè®¡ç®—ä¸€ä¸ª16MBçš„ä¼ªéšæœºç¼“å­˜cacheï¼Œä¾›è½»å®¢æˆ·ç«¯ç¼“å­˜ ä»ç¼“å­˜cacheä¸­ç”Ÿæˆä¸€ä¸ªæ•°æ®é›†ï¼Œå®Œæ•´çš„å®¢æˆ·ç«¯å­˜å‚¨è¿™ä¸ªæ•°æ®é›† Ethashç®—æ³•åœ¨ä»¥å¤ªåŠä¸­ä½¿ç”¨Sealæ–¹æ³•å®ç° 1Seal(chain ChainReader, block *types.Block, stop &lt;-chan struct&#123;&#125;) (*types.Block, error)//è¯¥æ–¹æ³•é€šè¿‡è¾“å…¥ä¸€ä¸ªåŒ…å«æœ¬åœ°çŸ¿å·¥æŒ–å‡ºçš„æœ€é«˜åŒºå—åœ¨ä¸»å¹²ä¸Šç”Ÿæˆä¸€ä¸ªæ–°å— è¯¥æ–¹æ³•åŒ…å«çš„å‚æ•°æœ‰ChainReader Block stop ChainReader 1234567891011121314151617181920// å®šä¹‰äº†ä¸€äº›æ–¹æ³•ï¼Œç”¨äºåœ¨åŒºå—å¤´éªŒè¯ä»¥åŠå”å—éªŒè¯æœŸé—´ï¼Œè®¿é—®æœ¬åœ°åŒºå—é“¾ã€‚type ChainReader interface &#123; // è·å–åŒºå—é“¾çš„é“¾é…ç½® Config() *params.ChainConfig // ä»æœ¬åœ°é“¾è·å–å½“å‰å—å¤´ CurrentHeader() *types.Header // é€šè¿‡hashå’Œnumberä»ä¸»é“¾ä¸­è·å–ä¸€ä¸ªåŒºå—å¤´ GetHeader(hash common.Hash, number uint64) *types.Header // é€šè¿‡numberä»ä¸»é“¾ä¸­è·å–ä¸€ä¸ªåŒºå—å¤´ GetHeaderByNumber(number uint64) *types.Header // é€šè¿‡hashä»ä¸»é“¾ä¸­è·å–ä¸€ä¸ªåŒºå—å¤´ GetHeaderByHash(hash common.Hash) *types.Header // é€šè¿‡hashå’Œnumberä»ä¸»é“¾ä¸­è·å–ä¸€ä¸ªåŒºå— GetBlock(hash common.Hash, number uint64) *types.Block&#125; ChainReaderä¸»è¦ä½œç”¨æ˜¯è·å–header Block 1234567891011121314151617// Blockä»£è¡¨ä»¥å¤ªåŠåŒºå—é“¾ä¸­çš„ä¸€ä¸ªå®Œæ•´çš„åŒºå—type Block struct &#123; header *Header // åŒºå—åŒ…æ‹¬å¤´ uncles []*Header // å”å— transactions Transactions // äº¤æ˜“é›†åˆ // cachesç¼“å­˜ hash atomic.Value size atomic.Value // Tdç”¨äºcoreåŒ…å­˜å‚¨æ‰€æœ‰çš„é“¾ä¸Šçš„éš¾åº¦ td *big.Int // è¿™äº›å­—æ®µç”¨äºethåŒ…æ¥è·Ÿè¸ªinter-peerå†…éƒ¨ç«¯ç‚¹åŒºå—çš„æ¥æ›¿ ReceivedAt time.Time ReceivedFrom interface&#123;&#125;&#125; Blockå°±æ˜¯ä¸€ä¸ªå®Œæ•´çš„åŒºå—ï¼ŒåŒ…æ‹¬header uncles transactionç­‰é‡è¦ä¿¡æ¯ stop stopæ˜¯ä¸€ä¸ªç©ºç»“æ„ä½“ä½œä¸ºä¿¡å·æº Sealæ–¹æ³•çš„å®Œæ•´ä»£ç  123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960func (ethash *Ethash) Seal(chain consensus.ChainReader, block *types.Block, stop &lt;-chan struct&#123;&#125;) (*types.Block, error) &#123; // fakeæ¨¡å¼ç«‹å³è¿”å›0 nonce if ethash.fakeMode &#123; header := block.Header() header.Nonce, header.MixDigest = types.BlockNonce&#123;&#125;, common.Hash&#123;&#125; return block.WithSeal(header), nil &#125; // å…±äº«powçš„è¯ï¼Œåˆ™è½¬åˆ°å®ƒçš„å…±äº«å¯¹è±¡æ‰§è¡ŒSealæ“ä½œ if ethash.shared != nil &#123; return ethash.shared.Seal(chain, block, stop) &#125; // åˆ›å»ºä¸€ä¸ªrunnerä»¥åŠå®ƒæŒ‡æŒ¥çš„å¤šé‡æœç´¢çº¿ç¨‹ abort := make(chan struct&#123;&#125;) found := make(chan *types.Block) ethash.lock.Lock() // çº¿ç¨‹ä¸Šé”ï¼Œä¿è¯å†…å­˜çš„ç¼“å­˜ï¼ˆåŒ…å«æŒ–çŸ¿å­—æ®µï¼‰å®‰å…¨ threads := ethash.threads // æŒ–çŸ¿çš„çº¿ç¨‹s if ethash.rand == nil &#123;// randä¸ºç©ºï¼Œåˆ™ä¸ºethashçš„å­—æ®µrandèµ‹å€¼ // è·å¾—ç§å­ seed, err := crand.Int(crand.Reader, big.NewInt(math.MaxInt64)) if err != nil &#123;// æ‰§è¡Œå¤±è´¥ï¼Œæœ‰æŠ¥é”™ ethash.lock.Unlock() // å…ˆè§£é” return nil, err // ç¨‹åºä¸­æ­¢ï¼Œç›´æ¥è¿”å›ç©ºå—å’ŒæŠ¥é”™ä¿¡æ¯ &#125; ethash.rand = rand.New(rand.NewSource(seed.Int64())) // æ‰§è¡ŒæˆåŠŸï¼Œæ‹¿åˆ°åˆæ³•ç§å­seedï¼Œé€šè¿‡å…¶è·å¾—randå¯¹è±¡ï¼Œèµ‹å€¼ã€‚ &#125; ethash.lock.Unlock() // è§£é” if threads == 0 &#123;// æŒ–çŸ¿çº¿ç¨‹ç¼–å·ä¸º0ï¼Œåˆ™é€šè¿‡æ–¹æ³•è¿”å›å½“å‰ç‰©ç†ä¸Šå¯ç”¨CPUç¼–å· threads = runtime.NumCPU() &#125; if threads &lt; 0 &#123; // éæ³•ç»“æœ threads = 0 // ç½®ä¸º0ï¼Œå…è®¸åœ¨æœ¬åœ°æˆ–è¿œç¨‹æ²¡æœ‰é¢å¤–é€»è¾‘çš„æƒ…å†µä¸‹ï¼Œå–æ¶ˆæœ¬åœ°æŒ–çŸ¿æ“ä½œ &#125; var pend sync.WaitGroup // åˆ›å»ºä¸€ä¸ªå€’è®¡æ—¶é”å¯¹è±¡ï¼Œgoè¯­æ³•å‚ç…§ http://www.cnblogs.com/Evsward/p/goPipeline.html#sync.waitgroup for i := 0; i &lt; threads; i++ &#123; pend.Add(1) go func(id int, nonce uint64) &#123;// æ ¸å¿ƒä»£ç é€šè¿‡é—­åŒ…å¤šçº¿ç¨‹æŠ€æœ¯æ¥æ‰§è¡Œã€‚ defer pend.Done() ethash.mine(block, id, nonce, abort, found) // Sealæ ¸å¿ƒå·¥ä½œ &#125;(i, uint64(ethash.rand.Int63()))//é—­åŒ…ç¬¬äºŒä¸ªå‚æ•°è¡¨è¾¾å¼uint64(ethash.rand.Int63())é€šè¿‡ä¸Šé¢å‡†å¤‡å¥½çš„randå‡½æ•°éšæœºæ•°ç»“æœä½œä¸ºnonceå®å‚ä¼ å…¥æ–¹æ³•ä½“ &#125; // ç›´åˆ°sealæ“ä½œè¢«ä¸­æ­¢æˆ–è€…æ‰¾åˆ°äº†ä¸€ä¸ªnonceå€¼ï¼Œå¦åˆ™ä¸€ç›´ç­‰ var result *types.Block // å®šä¹‰ä¸€ä¸ªåŒºå—å¯¹è±¡resultï¼Œç”¨äºæ¥æ”¶æ“ä½œç»“æœå¹¶ä½œä¸ºè¿”å›å€¼è¿”å›ä¸Šä¸€å±‚ select &#123; // goè¯­æ³•å‚ç…§ http://www.cnblogs.com/Evsward/p/go.html#select case &lt;-stop: // å¤–éƒ¨æ„å¤–ä¸­æ­¢ï¼Œåœæ­¢æ‰€æœ‰æŒ–çŸ¿çº¿ç¨‹ close(abort) case result = &lt;-found: // å…¶ä¸­ä¸€ä¸ªçº¿ç¨‹æŒ–åˆ°æ­£ç¡®å—ï¼Œä¸­æ­¢å…¶ä»–æ‰€æœ‰çº¿ç¨‹ close(abort) case &lt;-ethash.update: // ethashå¯¹è±¡å‘ç”Ÿæ”¹å˜ï¼Œåœæ­¢å½“å‰æ‰€æœ‰æ“ä½œï¼Œé‡å¯å½“å‰æ–¹æ³• close(abort) pend.Wait() return ethash.Seal(chain, block, stop) &#125; // ç­‰å¾…æ‰€æœ‰çŸ¿å·¥åœæ­¢æˆ–è€…è¿”å›ä¸€ä¸ªåŒºå— pend.Wait() return result, nil&#125; åœ¨sealä¸­é¦–å…ˆè¿›è¡Œäº†çŠ¶æ€æ ¡éªŒå¹¶è¿›è¡Œå¯¹åº”çš„æµç¨‹æ¢³ç†ï¼Œå…¶ä¸­æœ€é‡è¦çš„æ˜¯mineæ–¹æ³• 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354// mineå‡½æ•°æ˜¯çœŸæ­£çš„powçŸ¿å·¥ï¼Œç”¨æ¥æœç´¢ä¸€ä¸ªnonceå€¼ï¼Œnonceå€¼å¼€å§‹äºseedå€¼ï¼Œseedå€¼æ˜¯èƒ½æœ€ç»ˆäº§ç”Ÿæ­£ç¡®çš„å¯åŒ¹é…å¯éªŒè¯çš„åŒºå—éš¾åº¦func (ethash *Ethash) mine(block *types.Block, id int, seed uint64, abort chan struct&#123;&#125;, found chan *types.Block) &#123; // ä»åŒºå—å¤´ä¸­æå–å‡ºä¸€äº›æ•°æ®ï¼Œæ”¾åœ¨ä¸€ä¸ªå…¨å±€å˜é‡åŸŸä¸­ var ( header = block.Header() hash = header.HashNoNonce().Bytes() target = new(big.Int).Div(maxUint256, header.Difficulty) // ç”¨æ¥éªŒè¯çš„target number = header.Number.Uint64() dataset = ethash.dataset(number) ) // å¼€å§‹ç”Ÿæˆéšæœºnonceå€¼çŸ¥é“æˆ‘ä»¬ä¸­æ­¢æˆ–è€…æˆåŠŸæ‰¾åˆ°äº†ä¸€ä¸ªåˆé€‚çš„å€¼ var ( attempts = int64(0) // åˆå§‹åŒ–ä¸€ä¸ªå°è¯•æ¬¡æ•°çš„å˜é‡ï¼Œä¸‹é¢ä¼šåˆ©ç”¨è¯¥å˜é‡è€ä¸€äº›èŠ±æª nonce = seed // åˆå§‹åŒ–ä¸ºseedå€¼ï¼Œåé¢æ¯æ¬¡å°è¯•ä»¥åä¼šç´¯åŠ  ) logger := log.New(\"miner\", id) logger.Trace(\"Started ethash search for new nonces\", \"seed\", seed) for &#123; select &#123; case &lt;-abort: // ä¸­æ­¢å‘½ä»¤ // æŒ–çŸ¿ä¸­æ­¢ï¼Œæ›´æ–°çŠ¶æ€ï¼Œä¸­æ­¢å½“å‰æ“ä½œï¼Œè¿”å›ç©º logger.Trace(\"Ethash nonce search aborted\", \"attempts\", nonce-seed) ethash.hashrate.Mark(attempts) return default: // é»˜è®¤æ‰§è¡Œ // æˆ‘ä»¬æ²¡å¿…è¦åœ¨æ¯ä¸€æ¬¡å°è¯•nonceå€¼çš„æ—¶å€™æ›´æ–°hashç‡ï¼Œå¯ä»¥åœ¨å°è¯•äº†2çš„Xæ¬¡æ–¹nonceå€¼ä»¥åå†æ›´æ–°å³å¯ attempts++ // é€šè¿‡æ¬¡æ•°attempæ¥æ§åˆ¶ if (attempts % (1 &lt;&lt; 15)) == 0 &#123;// è¿™é‡Œæ˜¯å®šçš„2çš„15æ¬¡æ–¹ ethash.hashrate.Mark(attempts) // æ»¡è¶³æ¡ä»¶äº†ä»¥åï¼Œè¦æ›´æ–°ethashçš„hashç‡å­—æ®µçš„çŠ¶æ€å€¼ attempts = 0 // é‡ç½®å°è¯•æ¬¡æ•° &#125; // ä¸ºè¿™ä¸ªnonceå€¼è®¡ç®—powå€¼ digest, result := hashimotoFull(dataset, hash, nonce) // è°ƒç”¨çš„hashimotoFullå‡½æ•°åœ¨æœ¬åŒ…çš„ç®—æ³•åº“ä¸­ if new(big.Int).SetBytes(result).Cmp(target) &lt;= 0 &#123; // éªŒè¯æ ‡å‡† // æ‰¾åˆ°æ­£ç¡®nonceå€¼ï¼Œåˆ›å»ºä¸€ä¸ªåŸºäºå®ƒçš„æ–°çš„åŒºå—å¤´ header = types.CopyHeader(header) header.Nonce = types.EncodeNonce(nonce) // å°†è¾“å…¥çš„æ•´å‹å€¼è½¬æ¢ä¸ºä¸€ä¸ªåŒºå—nonceå€¼ header.MixDigest = common.BytesToHash(digest) // å°†å­—èŠ‚æ•°ç»„è½¬æ¢ä¸ºHashå¯¹è±¡ã€Hashæ˜¯32ä½çš„æ ¹æ®ä»»æ„è¾“å…¥æ•°æ®çš„Keccak256å“ˆå¸Œç®—æ³•çš„è¿”å›å€¼ã€‘ // å°è£…è¿”å›ä¸€ä¸ªåŒºå— select &#123; case found &lt;- block.WithSeal(header): logger.Trace(\"Ethash nonce found and reported\", \"attempts\", nonce-seed, \"nonce\", nonce) case &lt;-abort: logger.Trace(\"Ethash nonce found but discarded\", \"attempts\", nonce-seed, \"nonce\", nonce) &#125; return &#125; nonce++ // ç´¯åŠ nonce &#125; &#125;&#125; mineæ–¹æ³•ä¸»è¦å°±æ˜¯å¯¹nonceçš„æ“ä½œï¼Œä»¥åŠå¯¹åŒºå—å¤´çš„é‡å»ºæ“ä½œ CliqueCliqueæ˜¯ä»¥å¤ªåŠåŸºäºæƒåˆ©è¯æ˜çš„POAå…±è¯†ç®—æ³• Cliqueé€šè¿‡å‡½æ•°Ethereum.StartMiningè¿›è¡Œåˆå§‹åŒ– 1234567891011121314151617181920212223func (s *Ethereum) StartMining(local bool) error &#123; eb, err := s.Etherbase()//ç”¨æˆ·åœ°å€ if err != nil &#123; log.Error(\"Cannot start mining without etherbase\", \"err\", err) return fmt.Errorf(\"etherbase missing: %v\", err) &#125; if clique, ok := s.engine.(*clique.Clique); ok &#123; //å¦‚æœæ˜¯cliqueå…±è¯†ç®—æ³• wallet, err := s.accountManager.Find(accounts.Account&#123;Address: eb&#125;) // æ ¹æ®ç”¨å®ƒèƒ¡åœ°å€è·å–walletå¯¹è±¡ if wallet == nil || err != nil &#123; log.Error(\"Etherbase account unavailable locally\", \"err\", err) return fmt.Errorf(\"signer missing: %v\", err) &#125; clique.Authorize(eb, wallet.SignHash) // æ³¨å…¥ç­¾åè€…ä»¥åŠwalletå¯¹è±¡è·å–ç­¾åæ–¹æ³• &#125; if local &#123; // å¦‚æœæœ¬åœ°CPUå·²å¼€å§‹æŒ–çŸ¿ï¼Œæˆ‘ä»¬å¯ä»¥ç¦ç”¨å¼•å…¥çš„äº¤æ˜“æ‹’ç»æœºåˆ¶æ¥åŠ é€ŸåŒæ­¥æ—¶é—´ã€‚CPUæŒ–çŸ¿åœ¨ä¸»ç½‘æ˜¯è’è¯çš„ï¼Œæ‰€ä»¥æ²¡æœ‰äººèƒ½ç¢°åˆ°è¿™ä¸ªè·¯å¾„ï¼Œç„¶è€Œä¸€æ—¦CPUæŒ–çŸ¿åŒæ­¥æ ‡å¿—å®Œæˆä»¥åï¼Œå°†ä¿è¯ç§ç½‘å·¥ä½œä¹Ÿåœ¨ä¸€ä¸ªç‹¬ç«‹çŸ¿å·¥ç»“ç‚¹ã€‚ atomic.StoreUint32(&amp;s.protocolManager.acceptTxs, 1) &#125; go s.miner.Start(eb) return nil&#125; Cliqueç®—æ³•åœ¨ä»¥å¤ªåŠä¸­ä¹Ÿæ˜¯é€šè¿‡sealæ¥å®ç° 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556575859606162//é€šè¿‡æœ¬åœ°ç­¾åè®¤è¯åˆ›å»ºå·²å¯†å°çš„åŒºå—func (c *Clique) Seal(chain consensus.ChainReader, block *types.Block, stop &lt;-chan struct&#123;&#125;) (*types.Block, error) &#123; header := block.Header() // ä¸å¯†å°åˆ›ä¸–å— number := header.Number.Uint64() if number == 0 &#123; return nil, errUnknownBlock &#125; // ä¸æ”¯æŒ0-periodçš„é“¾ï¼Œä¸æ”¯æŒç©ºå—å¯†å°ï¼Œæ²¡æœ‰å¥–åŠ±ä½†æ˜¯èƒ½å¤Ÿå¯†å° if c.config.Period == 0 &amp;&amp; len(block.Transactions()) == 0 &#123; return nil, errWaitTransactions &#125; // åœ¨æ•´ä¸ªå¯†å°åŒºå—çš„è¿‡ç¨‹ä¸­ä¸è¦æŒæœ‰signerç­¾åè€…å­—æ®µ c.lock.RLock() signer, signFn := c.signer, c.signFn //è·å–ç­¾åè€…å’Œç­¾åæ–¹æ³• c.lock.RUnlock() snap, err := c.snapshot(chain, number-1, header.ParentHash, nil) //è°ƒç”¨è·å–å¿«ç…§ if err != nil &#123; return nil, err &#125;//æ£€æŸ¥æˆ‘ä»¬æ˜¯å¦è¢«æˆæƒå»ç­¾åä¸€ä¸ªåŒºå— if _, authorized := snap.Signers[signer]; !authorized &#123; return nil, errUnauthorized &#125; // å¦‚æœæˆ‘ä»¬æ˜¯åœ¨â€˜æœ€è¿‘ç­¾åè€…â€™ä¸­åˆ™ç­‰å¾…ä¸‹ä¸€ä¸ªåŒºå— for seen, recent := range snap.Recents &#123; if recent == signer &#123; // å½“å‰ç­¾åè€…åœ¨â€˜æœ€è¿‘ç­¾åè€…â€™ä¸­ï¼Œå¦‚æœå½“å‰åŒºå—æ²¡æœ‰å‰”é™¤ä»–çš„è¯åªèƒ½ç­‰å¾…ï¼ˆè¿™é‡Œæ¶‰åŠåˆ°æœºä¼šå‡ç­‰ï¼‰ if limit := uint64(len(snap.Signers)/2 + 1); number &lt; limit || seen &gt; number-limit &#123; log.Info(\"Signed recently, must wait for others\") &lt;-stop return nil, nil &#125; &#125; &#125; // åè®®å·²ç»å…è®¸æˆ‘ä»¬æ¥ç­¾åè¿™ä¸ªåŒºå—ï¼Œç­‰å¾…æˆ‘ä»¬çš„æ—¶é—´ delay := time.Unix(header.Time.Int64(), 0).Sub(time.Now()) // nolint: gosimple if header.Difficulty.Cmp(diffNoTurn) == 0 &#123; // è¿™ä¸æ˜¯æˆ‘ä»¬çš„è½®æ¬¡æ¥ç­¾åï¼Œå»¶è¿Ÿä¸€ç‚¹ï¼Œéšæœºå»¶è¿Ÿï¼Œè¿™æ ·å¯¹äºæ¯ä¸€ä¸ªç­¾åè€…æ¥è¯´æ¥å…è®¸å¹¶å‘ç­¾å wiggle := time.Duration(len(snap.Signers)/2+1) * wiggleTime delay += time.Duration(rand.Int63n(int64(wiggle))) log.Trace(\"Out-of-turn signing requested\", \"wiggle\", common.PrettyDuration(wiggle)) &#125; log.Trace(\"Waiting for slot to sign and propagate\", \"delay\", common.PrettyDuration(delay)) select &#123; case &lt;-stop: return nil, nil case &lt;-time.After(delay): &#125; // é€šè¿‡signFnç­¾åå‡½æ•°å¼€å§‹ç­¾å sighash, err := signFn(accounts.Account&#123;Address: signer&#125;, sigHash(header).Bytes()) if err != nil &#123; return nil, err &#125; //å°†ç­¾åç»“æœæ›¿æ¢ä¿å­˜åœ¨åŒºå—å¤´çš„Extraå­—æ®µä¸­ copy(header.Extra[len(header.Extra)-extraSeal:], sighash) //é€šè¿‡åŒºå—å¤´é‡æ–°ç»„è£…ç”Ÿæˆä¸€ä¸ªåŒºå— return block.WithSeal(header), nil&#125; æ³¨æ„ä»¥ä¸‹å‡ ç‚¹ï¼š signerä¸åœ¨snapshotçš„signerä¸­ä¸å…è®¸ç­¾å signerä¸æ˜¯æœ¬åŒºå—çš„ç­¾åè€…éœ€è¦å»¶æ—¶éšæœºä¸€æ®µæ—¶å€™åå†ç­¾åï¼Œæ˜¯æœ¬åŒºå—çš„ç­¾åè€…åˆ™ç›´æ¥ç­¾å ç­¾åå­˜æ”¾åœ¨Extraçš„extraSealçš„65ä¸ªå­—èŠ‚ä¸­ ä¸ºäº†ä¿è¯æœºä¼šå‡ç­‰ï¼Œcliqueä¸­è§„å®šæ¯ä¸€ä¸ªè®¤è¯èŠ‚ç‚¹åœ¨è¿ç»­SIGNER_LIMITä¸ªåŒºå—ä¸­ï¼Œæœ€å¤šåªèƒ½ç­¾å‘ä¸€ä¸ªåŒºå—ï¼Œæ¯ä¸€è½®ä¸­ï¼Œæœ€å¤šåªæœ‰SIGNER_COUNT - SIGNER_LIMITä¸ªè®¤è¯èŠ‚ç‚¹å¯ä»¥å‚ä¸åŒºå—ç­¾å‘ ä¸ºäº†ä¿è¯è®¡ç®—éš¾åº¦ç›¸åŒï¼Œæ¯ä¸ªèŠ‚ç‚¹åœ¨ç­¾å‘æ—¶éƒ½ä¼šåˆ¤æ–­æœ¬èŠ‚ç‚¹æ˜¯ä¸æ˜¯æœ¬è½®çš„inturnèŠ‚ç‚¹ï¼Œè‹¥æ˜¯inturnèŠ‚ç‚¹ï¼Œåˆ™è¯¥èŠ‚ç‚¹äº§ç”Ÿçš„åŒºå—éš¾åº¦ä¸º2ï¼Œå¦åˆ™ä¸º1 æ–‡ç« æ¥æº https://blog.csdn.net/sportshark/article/details/51905955 https://blog.csdn.net/sportshark/article/details/51905965 https://blog.csdn.net/itcastcpp/article/details/80304343 https://www.cnblogs.com/Evsward/p/ethash.html https://www.cnblogs.com/Evsward/p/miner.html https://blog.csdn.net/ddffr/article/details/78773961 https://ethfans.org/posts/Clique-Consensus-Algorithm https://segmentfault.com/a/1190000014544347","tags":[{"name":"Golang","slug":"Golang","permalink":"https://joker208.github.io/tags/Golang/"},{"name":"ä»¥å¤ªåŠ","slug":"ä»¥å¤ªåŠ","permalink":"https://joker208.github.io/tags/ä»¥å¤ªåŠ/"}]},{"title":"ä»¥å¤ªåŠå­¦ä¹ ç¬”è®°ï¼ˆåäº”ï¼‰","date":"2018-09-23T16:00:00.000Z","path":"2018/09/24/ä»¥å¤ªåŠå­¦ä¹ ç¬”è®°ï¼ˆåäº”ï¼‰/","text":"ä»¥å¤ªåŠæ•°æ®å­˜å‚¨åŒºå—åŒºå—blockä¸»è¦ç”±headerå’Œbodyä¸¤éƒ¨åˆ†ç»„æˆ blockæºç  12345678910111213141516171819202122232425262728293031type Block struct &#123; header *Header //åŒºå—å¤´ uncles []*Header //å”èŠ‚ç‚¹ transactions Transactions //äº¤æ˜“æ•°ç»„ hash atomic.Value size atomic.Value td *big.Int //æ‰€æœ‰åŒºå—Difficultyä¹‹å’Œ ReceivedAt time.Time ReceivedFrom interface&#123;&#125;&#125;type Header struct &#123; ParentHash common.Hash //æŒ‡å‘çˆ¶åŒºå—çš„æŒ‡é’ˆ UncleHash common.Hash //blockä¸­å”å—æ•°ç»„çš„RLPå“ˆå¸Œå€¼ Coinbase common.Address //æŒ–å‡ºè¯¥åŒºå—çš„äººçš„åœ°å€ Root common.Hash //StateDBä¸­çš„stat trieçš„æ ¹èŠ‚ç‚¹çš„RLPå“ˆå¸Œå€¼ TxHash common.Hash //tx trieçš„æ ¹èŠ‚ç‚¹çš„å“ˆå¸Œå€¼ ReceiptHash common.Hash //receipt trieçš„æ ¹èŠ‚ç‚¹çš„å“ˆå¸Œå€¼ Bloom Bloom //å¸ƒéš†è¿‡æ»¤å™¨ï¼Œç”¨æ¥åˆ¤æ–­Logå¯¹è±¡æ˜¯å¦å­˜åœ¨ Difficulty *big.Int //éš¾åº¦ç³»æ•° Number *big.Int //åŒºå—åºå· GasLimit uint64 //åŒºå—å†…æ‰€æœ‰Gasæ¶ˆè€—çš„ç†è®ºä¸Šé™ GasUsed uint64 //åŒºå—å†…æ¶ˆè€—çš„æ€»Gas Time *big.Int //åŒºå—åº”è¯¥è¢«åˆ›å»ºçš„æ—¶é—´ Nonce BlockNonce //æŒ–çŸ¿å¿…é¡»çš„å€¼&#125;type Body struct &#123; Transactions []*Transaction //äº¤æ˜“çš„æ•°ç»„ Uncles []*Header&#125; MPTæ ‘MPTæ˜¯ä»¥å¤ªåŠè‡ªå®šä¹‰çš„æ ‘å½¢æ•°æ®ç»“æ„ Trieæ ‘ 123456type Trie struct &#123; root node //æ ¹èŠ‚ç‚¹ db Database //æ•°æ®åº“ç›¸å…³ originalRoot common.Hash //åˆæ¬¡åˆ›å»ºtrieæ—¶å€™éœ€è¦ç”¨åˆ° cachegen, cachelimit uint16 //cacheæ¬¡æ•°çš„è®¡æ•°å™¨ï¼Œæ¯æ¬¡Trieçš„å˜åŠ¨æäº¤åè‡ªå¢&#125; åœ¨Trieç»“æ„ä½“ä¸­ï¼Œrootä½œä¸ºæ•´ä¸ªMPTçš„æ ¹èŠ‚ç‚¹ï¼Œrootæ¥å£æœ‰å››ç§å®ç°ç±» 12345678910111213type ( fullNode struct &#123; Children [17]node flags nodeFlag &#125; shortNode struct &#123; Key []byte Val node flags nodeFlag &#125; hashNode []byte valueNode []byte) fullNodeï¼šæœ‰ä¸€ä¸ªå®¹é‡ä¸º17çš„nodeæ•°ç»„æˆå‘˜å˜é‡Childrenï¼Œæ•°ç»„ä¸­å‰16ä¸ªç©ºä½åˆ†åˆ«å¯¹åº”16è¿›åˆ¶(hex)ä¸‹çš„0-9a-fï¼Œæ ¹æ®å­èŠ‚ç‚¹çš„keyå€¼16è¿›åˆ¶å½¢å¼ä¸‹çš„ç¬¬ä¸€ä½çš„å€¼ï¼Œåˆ†åˆ«å¯¹åº”åˆ°16ä¸ªç©ºä½ä¸Šï¼ŒChildrençš„ç¬¬17ä½ç•™ç»™fullNodeçš„æ•°æ®éƒ¨åˆ† shortNodeï¼šä»…æœ‰ä¸€ä¸ªå­èŠ‚ç‚¹ï¼Œæˆå‘˜Valå¯¹åº”çš„è¯¥å­èŠ‚ç‚¹ï¼Œkeyæ˜¯ä»»æ„é•¿åº¦çš„å­—ç¬¦ä¸²ã€‚MPTä¼šé€šè¿‡åˆå¹¶åªæœ‰ä¸€ä¸ªå­èŠ‚ç‚¹çš„çˆ¶èŠ‚ç‚¹å’Œå…¶å­èŠ‚ç‚¹æ¥ç¼©çŸ­trieçš„æ·±åº¦ï¼Œæ‰€ä»¥æœ‰äº›èŠ‚ç‚¹ä¼šæœ‰é•¿åº¦æ›´é•¿çš„key valueNodeï¼šæ˜¯MPTçš„å¶å­èŠ‚ç‚¹ï¼ŒvalueNodeå°±æ˜¯æ‰€æºå¸¦æ•°æ®éƒ¨åˆ†çš„RLPå“ˆå¸Œå€¼ï¼Œé•¿åº¦32byteï¼Œæ•°æ®çš„RLPç¼–ç å€¼ä½œä¸ºvalueNodeçš„åŒ¹é…é¡¹å­˜å‚¨åœ¨æ•°æ®åº“é‡Œ hashNodeï¼šå­˜æ”¾32byteçš„å“ˆå¸Œå€¼ï¼Œä¹Ÿæ²¡æœ‰å­èŠ‚ç‚¹ï¼Œæ˜¯fullNodeæˆ–è€…shortNodeå¯¹è±¡çš„RLPå“ˆå¸Œå€¼ æ¯ä¸ªçˆ¶èŠ‚ç‚¹çš„å“ˆå¸Œå€¼æ¥æºäºæ‰€æœ‰å­èŠ‚ç‚¹å“ˆå¸Œå€¼çš„ç»„åˆï¼Œä¸€ä¸ªé¡¶ç‚¹çš„å“ˆå¸Œå€¼èƒ½å¤Ÿä»£è¡¨ä¸€æ•´ä¸ªæ ‘å½¢ç»“æ„ å­˜å‚¨ä»¥å¤ªåŠä¸­ä½¿ç”¨levelDBæ•°æ®åº“ headerå’Œblockå­˜å‚¨è§„åˆ™ 12345678 headerPrefix = []byte(\"h\") // headerPrefix + num (uint64 big endian) + hash -&gt; header tdSuffix = []byte(\"t\") // headerPrefix + num (uint64 big endian) + hash + tdSuffix -&gt; td numSuffix = []byte(\"n\") // headerPrefix + num (uint64 big endian) + numSuffix -&gt; hash blockHashPrefix = []byte(\"H\") // blockHashPrefix + hash -&gt; num (uint64 big endian) bodyPrefix = []byte(\"b\") // bodyPrefix + num (uint64 big endian) + hash -&gt; block body blockReceiptsPrefix = []byte(\"r\") // blockReceiptsPrefix + num (uint64 big endian) + hash -&gt; block receipts lookupPrefix = []byte(\"l\") // lookupPrefix + hash -&gt; transaction/receipt lookup metadatabloomBitsPrefix = []byte(\"B\") // bloomBitsPrefix + bit (uint16 big endian) + section (uint64 big endian) + hash -&gt; bloom bits å…¶ä¸­numä¸ºåŒºå—å· hashä¸ºåŒºå—å“ˆå¸Œå€¼ Headerçš„çˆ¶æŒ‡é’ˆæ˜¯ä¸èƒ½ä¿®æ”¹çš„ï¼Œå½“æŠŠHeaderå†™å…¥æ•°æ®åº“æ˜¯å¿…é¡»æŠŠä»–çš„çˆ¶èŠ‚ç‚¹å’Œçˆ¶èŠ‚ç‚¹çš„çˆ¶èŠ‚ç‚¹ç­‰ç­‰å†™å…¥æ•°æ®åº“ äº¤æ˜“å­˜å‚¨ 123456789101112131415161718func WriteTxLookupEntries(db ethdb.Putter, block *types.Block) error &#123; // éå†æ¯ä¸ªäº¤æ˜“å¹¶ä¸”ç¼–ç å…ƒæ•°æ® for i, tx := range block.Transactions() &#123; entry := TxLookupEntry&#123; BlockHash: block.Hash(), BlockIndex: block.NumberU64(), Index: uint64(i), &#125; data, err := rlp.EncodeToBytes(entry) if err != nil &#123; return err &#125; if err := db.Put(append(lookupPrefix, tx.Hash().Bytes()...), data); err != nil &#123; return err &#125; &#125; return nil&#125; å°†åŒºå—å·ã€åŒºå—å“ˆå¸Œå€¼ç­‰æ•°æ®ç¼–ç è¿›è¡Œå­˜å‚¨ StateDBæ¨¡å— æ‰€æœ‰çš„è´¦æˆ·ç”±StateDBç®¡ç†ï¼ŒStateDBä¸­æœ‰ä¸€ä¸ªtrieç»“æ„å’Œä¸€ä¸ªmapç»“æ„ï¼Œéƒ½ç”¨æ¥å­˜å‚¨stateObjectï¼Œæ¯ä¸ªstateObjectæœ‰20bytesçš„åœ°å€ï¼Œå¯ä»¥ä½œä¸ºkeyä½¿ç”¨ å­˜å‚¨è´¦æˆ·(stateObject) ä¸€ä¸ªstateObjectå¯¹åº”ä¸€ä¸ªè´¦æˆ·ï¼Œä¸€ä¸ªè´¦æˆ·åŒ…å«ä½™é¢ã€åˆçº¦å‘èµ·æ¬¡æ•°ç­‰æ•°æ®ï¼ŒstateObjectè¿˜åŒ…å«äº†ä¸€ä¸ªtrieï¼Œç”¨æ¥å­˜å‚¨Stateæ•°æ® æ–‡ç« æ¥æºï¼š http://www.blockchainbrother.com/article/805 https://blog.csdn.net/ddffr/article/details/74517608 https://juejin.im/post/5a4f3aa9f265da3e5468e08e https://blog.csdn.net/teaspring/article/details/75390210","tags":[{"name":"Golang","slug":"Golang","permalink":"https://joker208.github.io/tags/Golang/"},{"name":"ä»¥å¤ªåŠ","slug":"ä»¥å¤ªåŠ","permalink":"https://joker208.github.io/tags/ä»¥å¤ªåŠ/"}]},{"title":"ä»¥å¤ªåŠå­¦ä¹ ç¬”è®°ï¼ˆåå››ï¼‰","date":"2018-09-21T16:00:00.000Z","path":"2018/09/22/ä»¥å¤ªåŠå­¦ä¹ ç¬”è®°ï¼ˆåå››ï¼‰/","text":"ä»¥å¤ªåŠæºç åˆ†æRLPxåŠ å¯†é€šä¿¡åè®®PLPxå±äºä¼šè¯å±‚åè®®ï¼Œä¸»è¦åŠŸèƒ½æ˜¯åœ¨èŠ‚ç‚¹ä¹‹é—´å»ºç«‹å¹¶ç»´æŒé€šä¿¡ RLPxåè®®æ¯æ¬¡å»ºç«‹è¿æ¥éƒ½ä½¿ç”¨ä¸åŒçš„å¯†é’¥ï¼Œå³ä½¿ç°æœ‰çš„å¯†é’¥æ³„éœ²ä¹Ÿä¸ä¼šå¯¼è‡´ä¹‹å‰çš„ä¿¡æ¯è¢«ç ´è§£ å®ç°åŸç†ï¼šè¿æ¥åŒæ–¹å„è‡ªç”Ÿæˆä¸€ä¸ªç§é’¥ï¼Œç„¶åå°†å¾—åˆ°çš„å…¬é’¥å‘é€ç»™å¯¹æ–¹ï¼ŒåŒæ–¹å†åˆ©ç”¨è‡ªå·±çš„ç§é’¥å’Œå¯¹æ–¹çš„å…¬é’¥ç”Ÿæˆä¸€ä¸ªå…±äº«å¯†é’¥ï¼Œæœ¬æ¬¡ä¼ è¾“å°†ä½¿ç”¨è¿™ä¸ªå…±äº«å¯†é’¥ ä¸»è¦æˆå‘˜ï¼š newRLPx()ï¼šè¿”å›ä¸€ä¸ªtransportå¯¹è±¡ ReadMsg()ï¼šè°ƒç”¨è¯»å†™å™¨çš„ReadMsg WriteMsg()ï¼šè°ƒç”¨è¯»å†™å™¨çš„WriteMsgå†™ä¿¡æ¯ close()ï¼šå…³é—­è¿æ¥å¹¶è¿”å›å…³é—­åŸå›  doEncHandshake()ï¼š åŠ å¯†æ¡æ‰‹ï¼ŒæˆåŠŸåè¿”å›å¸¦æœ‰å…±äº«å¯†é’¥çš„secretså¯¹è±¡ doProtoHandshake()ï¼šåè®®æ¡æ‰‹ï¼Œè¾“å…¥è¾“å‡ºå‡æ˜¯protoHandshakeå¯¹è±¡ doEncHandshake()ï¼šåŠ å¯†æ¡æ‰‹ï¼Œæ¡æ‰‹è¿‡ç¨‹åˆ†ä¸ºä¸¤ä¸ªéƒ¨åˆ† å‘èµ·æ–¹ä½¿ç”¨è‡ªå·±çš„ç§é’¥å’Œå¯¹æ–¹çš„å…¬é’¥ç”Ÿæˆä¸€ä¸ªå…±äº«tokenï¼Œå¹¶ä½¿ç”¨ä¸€ä¸ªéšæœºæ•°å’Œä¸€ä¸ªéšæœºç”Ÿæˆçš„ç§é’¥å¯¹å…¶ç­¾åï¼Œå°†è¿™äº›ä¿¡æ¯å‘é€ç»™æ¥æ”¶æ–¹ æ¥æ”¶æ–¹ä¹Ÿä½¿ç”¨è‡ªå·±çš„ç§é’¥å’Œå¯¹æ–¹çš„å…¬é’¥ç”Ÿæˆä¸€ä¸ªtokenï¼Œå¹¶ä½¿ç”¨éšæœºæ•°å’Œå‘é€è¿‡æ¥çš„éšæœºæ•°è¿›è¡Œç­¾åï¼Œå°†ä¿¡æ¯å†æ¬¡è¿”å› åŒæ–¹é€šè¿‡å„è‡ªå¾—åˆ°çš„ä¿¡æ¯ç”Ÿæˆä¸€ç»„å…±äº«å¯†é’¥ Diffie â€“ HellmanRLPxåè®®çš„å®ç°è¿‡ç¨‹å…¶å®æ˜¯ä¸€æ¬¡Diffieâ€“Hellmanå¯†é’¥äº¤æ¢ Diffieâ€“Hellmanæ˜¯ä¸€ç§å®‰å…¨åè®®ï¼Œè®©åŒæ–¹åœ¨å®Œå…¨æ²¡æœ‰å¯¹æ–¹ä»»ä½•é¢„å…ˆä¿¡æ¯çš„æ¡ä»¶ä¸‹é€šè¿‡ä¸å®‰å…¨ä¿¡é“å»ºç«‹èµ·ä¸€ä¸ªå¯†é’¥ï¼Œè¿™ä¸ªå¯†é’¥ä¸€èˆ¬ä½œä¸ºâ€œå¯¹ç§°åŠ å¯†â€çš„å¯†é’¥è€Œè¢«åŒæ–¹åœ¨åç»­æ•°æ®ä¼ è¾“ä¸­ä½¿ç”¨ ä»¥å¤ªåŠå…¬é’¥ç§é’¥ç§é’¥æœ¬è´¨ä¸Šæ˜¯ä¸€ä¸ªåŒ…å«64ä½çš„éšæœºæ•° ç§é’¥åªèƒ½ç”±é’±åŒ…è‡ªå·±æ¥ç”Ÿæˆï¼ŒåŠ å¯†å­˜å‚¨åœ¨keyStoreç›®å½•ä¸‹ ä¸€ä¸ªé’±åŒ…åœ°å€åªæœ‰ä¸€ä¸ªç§é’¥ï¼Œè°æ‹¥æœ‰ç§é’¥ï¼Œè°å°±æ‹¥æœ‰äº†è¿™äº›æ•°å­—è´§å¸çš„æ§åˆ¶æƒ å…¬é’¥ç”±ç§é’¥é€šè¿‡æ¤­åœ†æ›²çº¿åŠ å¯†ç®—æ³•ç”Ÿæˆçš„ï¼Œå˜æ¢åæ˜¯ä¸€ä¸ª65ä¸ªbyteçš„æ•°ç»„ æ‹¥æœ‰ç§é’¥ï¼Œå°±å¯ä»¥ç®—å‡ºå…¬é’¥ï¼Œè€Œå…¬é’¥ä¸èƒ½è®¡ç®—ç§é’¥ æ–‡ç« æ¥æº: http://www.8btc.com/blockchain-11-rlpx https://blog.csdn.net/itcastcpp/article/details/80305636 https://blog.csdn.net/weixin_41814722/article/details/80680749 https://www.cnblogs.com/hyddd/p/7689132.html https://blog.csdn.net/lee244868149/article/details/51790397 https://www.jianshu.com/p/61493dbe7cc3 https://bitshuo.com/topic/58c7a1ef0a3de8932e6f753b https://blog.csdn.net/luoyhang003/article/details/79970254","tags":[{"name":"Golang","slug":"Golang","permalink":"https://joker208.github.io/tags/Golang/"},{"name":"ä»¥å¤ªåŠ","slug":"ä»¥å¤ªåŠ","permalink":"https://joker208.github.io/tags/ä»¥å¤ªåŠ/"}]},{"title":"ä»¥å¤ªåŠå­¦ä¹ ç¬”è®°ï¼ˆåä¸‰ï¼‰","date":"2018-09-20T16:00:00.000Z","path":"2018/09/21/ä»¥å¤ªåŠå­¦ä¹ ç¬”è®°ï¼ˆåä¸‰ï¼‰/","text":"ä»¥å¤ªåŠæºä»£ç åˆ†æP2Påº•å±‚é€šä¿¡P2På³å¯¹ç­‰ç½‘ç»œï¼Œæ˜¯ä¸€ç§åœ¨å¯¹ç­‰è€…ï¼ˆPeerï¼‰ä¹‹é—´åˆ†é…ä»»åŠ¡å’Œå·¥ä½œè´Ÿè½½çš„åˆ†å¸ƒå¼åº”ç”¨æ¶æ„ ç½‘ç»œä¸­æ‰€æœ‰çš„ä¸ªä½“åœ°ä½å’ŒåŠŸèƒ½ä¸Šæ˜¯å¹³ç­‰çš„ å¦å¤–ç½‘ç»œä¸­çš„ä¸ªä½“ä¸éœ€è¦ä¸å…¶ä»–æ‰€æœ‰ä¸ªä½“ä¿æŒé€šä¿¡ï¼Œåªéœ€è¦ä¸ç›¸é‚»ä¸ªä½“ä¿æŒé€šä¿¡ ä»¥å¤ªåŠä½¿ç”¨äº†kademliaç½‘ç»œï¼Œæ˜¯ä¸€ç§åˆ†å¸ƒå¼æ•£åˆ—è¡¨(DHT)æŠ€æœ¯ï¼Œä»¥å¼‚æˆ–è¿ç®—ä¸ºè·ç¦»åº¦é‡åŸºç¡€ ProtocolManagerä»¥å¤ªåŠä¸­é€šè¿‡ProtocolManageræ¥ç®¡ç†ä¸ªä½“é—´çš„é€šä¿¡ ä¸»è¦æˆå‘˜åŒ…æ‹¬ï¼š peerSet()ï¼šæ¥ç¼“å­˜ç›¸é‚»ä¸ªä½“åˆ—è¡¨ é€šè¿‡é€šé“å’Œè®¢é˜…çš„æ–¹å¼è¿›è¡Œä¿¡æ¯æ›´æ–° Fetcherï¼šæ”¶é›†å…¶ä»–æˆå‘˜çš„æ¶ˆæ¯ï¼Œæ¥å®‰æ’è·å–è¯·æ±‚ Downloaderï¼šè´Ÿè´£æ‰€æœ‰å‘ç›¸é‚»ä¸ªä½“ä¸»åŠ¨å‘èµ·çš„åŒæ­¥æµç¨‹ Start()ï¼šå¯åŠ¨p2pé€šä¿¡ Startåˆ†åˆ«å¯åŠ¨å››ä¸ªå‡½æ•° å››ä¸ªå‡½æ•°çš„é€»è¾‘åˆ†åˆ«æ˜¯ï¼š å¹¿æ’­æ–°å‡ºç°çš„äº¤æ˜“å¯¹è±¡ å¹¿æ’­æ–°æŒ–æ˜çš„åŒºå— å®šæ—¶ä¸ç›¸é‚»ä¸ªä½“è¿›è¡ŒåŒºå—é“¾çš„åŒæ­¥ å°†æ–°å‡ºç°çš„äº¤æ˜“å¯¹è±¡å‡åŒ€çš„åŒæ­¥ç»™ç›¸é‚»ä¸ªä½“ æ³¨æ„ï¼šæœ¬ä½“å‘å…¶ä»–ä¸ªä½“ä¸»åŠ¨å‘èµ·çš„é€šä¿¡ä¸­ï¼ŒæŒ‰ç…§æ•°æ®ç±»å‹å¯åˆ†ä¸¤ç±»ï¼šäº¤æ˜“txå’ŒåŒºå—blockï¼›è€ŒæŒ‰ç…§é€šä¿¡æ–¹å¼åˆ’åˆ†ï¼Œäº¦å¯åˆ†ä¸ºå¹¿æ’­æ–°çš„å•ä¸ªæ•°æ®å’ŒåŒæ­¥ä¸€ç»„åŒç±»å‹æ•°æ® handle()ï¼šä¸»åŠ¨è¯·æ±‚çš„å›è°ƒå‡½æ•° åœ¨èŠ‚ç‚¹é—´é€šä¿¡æ—¶ï¼Œé™¤äº†ä¸»åŠ¨äº’ç›¸é€šçŸ¥å¤–ï¼Œè¿˜éœ€è¦ä¸€ç§è¢«è¯·æ±‚è°ƒç”¨çš„é€šä¿¡ï¼Œä½¿ç”¨handleå‡½æ•°æ¥å®ç°å›è°ƒ 123456789101112131415161718192021func (pm *ProtocolManager) handle(p *peer) error &#123; td, head, genesis := pm.blockchain.Status() p.Handshake(pm.networkId, td, head, genesis) if rw, ok := p.rw.(*meteredMsgReadWriter); ok &#123; rm.Init(p.version) &#125; pm.peers.Register(p) defer pm.removePeer(p.id) pm.downloader.RegisterPeer(p.id, p.version, p) pm.syncTransactions(p) ... for &#123; if err := pm.handleMsg(p); err != nil &#123; return err &#125; &#125;&#125; handleå‡½æ•°çš„é€»è¾‘ä¸ºä¸å¯¹æ–¹ç¡®å®šçŠ¶æ€ï¼Œåˆå§‹åŒ–è¯»å†™é€šé“ï¼Œå°†è¦è®¿é—®çš„èŠ‚ç‚¹å­˜å…¥ç›¸é‚»åˆ—è¡¨ï¼Œåœ¨Downloaderæˆå‘˜æ³¨å†ŒèŠ‚ç‚¹ï¼Œå‘å¯¹æ–¹èŠ‚ç‚¹å‘é€è¯·æ±‚ï¼Œç›‘å¬è¿”å›çš„æ¶ˆæ¯å¹¶è¿›è¡Œå¤„ç† å»ºç«‹æ–°peerè¿æ¥Node.Start()ä¸­é¦–å…ˆä¼šåˆ›å»ºp2p.Server{}ï¼Œå°†Nodeä¸­è½½å…¥çš„æ‰€æœ‰å®ç°ä½“ä¸­çš„Protocoléƒ½ä½œä¸ºServer.Protocolsåˆ—è¡¨ï¼Œå¯åŠ¨Serverå¯¹è±¡ï¼Œå¹¶å°†Serverå¯¹è±¡ä½œä¸ºå‚æ•°å»é€ä¸€å¯åŠ¨æ¯ä¸ªå®ç°ä½“,ProtocolManager.Protocolsæœ€ç»ˆè¢«å¯¼å…¥äº†p2p.Server.Protocols æ–‡ç« æ¥æº: https://blog.csdn.net/screscent/article/details/79416251 https://blog.csdn.net/screscent/article/details/79416318 http://baijiahao.baidu.com/s?id=1604499731426119688&amp;wfr=spider&amp;for=pc https://blog.csdn.net/teaspring/article/details/78455046","tags":[{"name":"Golang","slug":"Golang","permalink":"https://joker208.github.io/tags/Golang/"},{"name":"ä»¥å¤ªåŠ","slug":"ä»¥å¤ªåŠ","permalink":"https://joker208.github.io/tags/ä»¥å¤ªåŠ/"}]},{"title":"Golangå­¦ä¹ ç¬”è®°ï¼ˆå…­ï¼‰","date":"2018-09-19T16:00:00.000Z","path":"2018/09/20/Golangå­¦ä¹ ç¬”è®°ï¼ˆå…­ï¼‰/","text":"Golangè®°å½•copyå¤åˆ¶ä¼šæ¯”ç­‰å·å¤åˆ¶æ…¢ã€‚ä½†æ˜¯copyå¤åˆ¶ä¸ºå€¼å¤åˆ¶ï¼Œæ”¹å˜åŸåˆ‡ç‰‡çš„å€¼ä¸ä¼šå½±å“æ–°åˆ‡ç‰‡ã€‚è€Œç­‰å·å¤åˆ¶ä¸ºæŒ‡é’ˆå¤åˆ¶ï¼Œæ”¹å˜åŸåˆ‡ç‰‡æˆ–æ–°åˆ‡ç‰‡éƒ½ä¼šå¯¹å¦ä¸€ä¸ªäº§ç”Ÿå½±å“ã€‚ c++å£°æ˜æ•°ç»„12345678910//é™æ€ å®šä¹‰äº†æ•°ç»„arrayï¼Œå¹¶æœªå¯¹æ•°ç»„è¿›è¡Œåˆå§‹åŒ– int array[100]; //é™æ€ å®šä¹‰å¹¶åˆå§‹åŒ–äº†æ•°ç»„array int array[100] = &#123;1ï¼Œ2&#125;; //åŠ¨æ€ åˆ†é…äº†é•¿åº¦ä¸º100çš„æ•°ç»„array int* array = new int[100]; delete []array; //åŠ¨æ€ ä¸ºé•¿åº¦ä¸º100çš„æ•°ç»„arrayåˆå§‹åŒ–å‰ä¸¤ä¸ªå…ƒç´  int* array = new int[100](1ï¼Œ2); delete []array; golang å£°æ˜æ•°ç»„1234567891011121314151617181920212223//ç¬¬ä¸€ç§ //var &lt;æ•°ç»„åç§°&gt; [&lt;æ•°ç»„é•¿åº¦&gt;]&lt;æ•°ç»„å…ƒç´ &gt; var arr [2]int arr[0]=1 arr[1]=2 //ç¬¬äºŒç§ //var &lt;æ•°ç»„åç§°&gt; = [&lt;æ•°ç»„é•¿åº¦&gt;]&lt;æ•°ç»„å…ƒç´ &gt;&#123;å…ƒç´ 1,å…ƒç´ 2,...&#125; var arr = [2]int&#123;1,2&#125; //æˆ–è€… arr := [2]int&#123;1,2&#125; //ç¬¬ä¸‰ç§ //var &lt;æ•°ç»„åç§°&gt; [&lt;æ•°ç»„é•¿åº¦&gt;]&lt;æ•°ç»„å…ƒç´ &gt; = [...]&lt;å…ƒç´ ç±»å‹&gt;&#123;å…ƒç´ 1,å…ƒç´ 2,...&#125; var arr = [...]int&#123;1,2&#125; //æˆ–è€… arr := [...]int&#123;1,2&#125; //ç¬¬å››ç§ //var &lt;æ•°ç»„åç§°&gt; [&lt;æ•°ç»„é•¿åº¦&gt;]&lt;æ•°ç»„å…ƒç´ &gt; = [...]&lt;å…ƒç´ ç±»å‹&gt;&#123;ç´¢å¼•1:å…ƒç´ 1,ç´¢å¼•2:å…ƒç´ 2,...&#125;var arr = [...]int&#123;1:1,0:2&#125; //æˆ–è€… arr := [...]int&#123;1:1,0:2&#125;","tags":[{"name":"Golang","slug":"Golang","permalink":"https://joker208.github.io/tags/Golang/"}]},{"title":"ä»¥å¤ªåŠå­¦ä¹ ç¬”è®°ï¼ˆåäºŒï¼‰","date":"2018-09-19T16:00:00.000Z","path":"2018/09/20/ä»¥å¤ªåŠå­¦ä¹ ç¬”è®°ï¼ˆåäºŒï¼‰/","text":"ä»¥å¤ªåŠæºä»£ç å…±è¯†ç®—æ³•å…±è¯†ç®—æ³•ä½¿ç”¨Engineæ¥å£ï¼Œåˆ†ä¸ºä¸¤ç§å®ç°æ–¹å¼ï¼š åŸºäºè¿ç®—èƒ½åŠ›çš„Ethashç®—æ³• åŸºäºâ€œåŒè¡Œâ€è®¤è¯çš„Cliqueç®—æ³• Engineæ¥å£çš„å‡½æ•°åŒ…æ‹¬ä»¥ä¸‹ï¼š VerifyHeader()ï¼ŒVerifyHeaders()ï¼ŒVerifyUncles()ï¼šéªŒè¯åŒºå—çš„æˆå‘˜æ˜¯å¦åˆç† Prepare()ï¼šåœ¨Headeråˆ›å»ºæ—¶è°ƒç”¨ï¼Œå¯¹Difficultyç­‰å±æ€§èµ‹å€¼ Finalize()ï¼šåœ¨åŒºå—çš„æ•°æ®æˆå‘˜éƒ½èµ‹å€¼å®Œæ¯•æ˜¯ï¼Œç”ŸæˆRootï¼ŒTxHashï¼ŒUncleHashï¼ŒReceiptHashç­‰æˆå‘˜ Seal()ï¼šå¯¹æ‰§è¡Œè¿‡Finalizeå‡½æ•°çš„åŒºå—è¿›è¡Œæˆæƒï¼ŒæˆåŠŸè¿”å›åŒºå—çš„æ‰€æœ‰æˆå‘˜ï¼Œè¯¥åŒºå—å°±æ˜¯å®ŒæˆåŒºå—ï¼Œå¯ä»¥è¢«å¹¿æ’­ä¹Ÿå¯ä»¥æ’å…¥åˆ°åŒºå—é“¾ VerifySeal()ï¼šç”¨æ¥ç¡®å®šåŒºå—æ˜¯å¦å·²ç»Sealæ“ä½œ Ethashå…±è¯†ç®—æ³•Ethashç§°ä¸ºPoW(Proof-of-Work) åŸºæœ¬åŸç†å…¬å¼ä¸ºï¼š $$$$ RAND(h, n) &lt;= M / d $$$$Mè¡¨ç¤ºä¸€ä¸ªæå¤§çš„æ•°ï¼Œdè¡¨ç¤ºHeaderæˆå‘˜Difficulty RAND()ç”¨æ¥äº§ç”Ÿéšæœºæ•°ï¼Œhæ˜¯Headerçš„å“ˆå¸Œå€¼ï¼Œnè¡¨ç¤ºHeaderæˆå‘˜Nonce è¯¥å…¬å¼è¡¨ç¤ºåœ¨æœ€å¤§ä¸è¶…è¿‡Mçš„èŒƒå›´å†…ï¼Œæ‰¾åˆ°ä¸€ä¸ªéšæœºæ•°æ•°ï¼Œå¦‚æœè¿™ä¸ªæ•°ç¬¦åˆæ¡ä»¶(&lt;=M/d)ï¼Œé‚£ä¹ˆå°±è®¤ä¸ºSeal()æˆåŠŸ mine()å‡½æ•°åœ¨å®ç°Seal()å‡½æ•°è¿‡ç¨‹ä¸­ï¼Œä¼šä»¥å¤šçº¿ç¨‹çš„æ–¹å¼å¹¶è¡Œè°ƒç”¨mine()å‡½æ•°ï¼Œçº¿ç¨‹ä¸ªæ•°ç­‰äºEthash.threads ä¸»è¦ä»£ç å¦‚ä¸‹ï¼š 1234567891011121314151617181920212223242526func (ethash *Ethash) mine(block *Block, id int, seed uint64, abort chan struct&#123;&#125;, found chan *Block) &#123; var ( header = block.Header() hash = header.HashNoNonce().Bytes() target = new(big.Int).Div(maxUint256, header.Difficulty) number = header.Number.Uint64() dataset = ethash.dataset(number) nonce = seed ) for &#123; select &#123; case &lt;-abort: ...; return default: digest, result := hashimotoFull(dataset, hash, nonce) // compute the PoW value of this nonce if new(big.Int).SetBytes(result).Cmp(target) &lt;= 0 &#123; // x.Cmp(y) &lt;= 0 means x &lt;= y header = types.CopyHeader(header) header.Nonce = types.EncodeNonce(nonce) header.MixDigest = common.BytesToHash(digest) found&lt;- block.WithSeal(header) return &#125; &#125; nonce++ &#125;&#125; å‡½æ•°å®šä¹‰äº†ä¸€ç»„å±€éƒ¨å˜é‡ï¼Œç„¶åæ˜¯ä¸€ä¸ªforå¾ªç¯ï¼Œè°ƒç”¨hashimotoFull()ï¼Œå½“å‡½æ•°çš„è¿”å›å€¼ç¬¦åˆæ¡ä»¶æ—¶ï¼Œå¤åˆ¶Headerå¯¹è±¡ï¼ŒNonceã€MixDigestèµ‹å€¼ï¼Œè¿”å›æˆæƒè¿‡çš„åŒºå— 123456789101112131415161718func hashimotoFull(dataset []uint32, hash []byte, nonce uint64) ([]byte, []byte) &#123; lookup := func(index uint32) []uint32 &#123; offset := index * hashWords return dataset[offset : offset+hashWords] &#125; return hashimoto(hash, nonce, uint64(len(dataset))*4, lookup)&#125;func hashimotoLightï¼ˆsize uint64, cache []uint32, hash []byte, nonce uint64ï¼‰ ([]byte, []byte) &#123; lookup := func(index uint32) []uint32 &#123; rawData := generateDatasetItem(cache, index, keccak512) data := make([]uint32, len(rawData)/4) for i := 0; i &lt; len(data); i++ &#123; data[i] = binary.LittleEndian.Uint32(rawData[i*4:]) &#125; return data &#125; return hashimoto(hash, nonce, size, lookup)&#125; ä»¥ä¸Šä¸¤ä¸ªå‡½æ•°ç±»ä¼¼ï¼Œéƒ½è¿”å›hashimoto()ï¼Œç›¸æ¯”äºLightå‡½æ•°ï¼ŒFullå‡½æ•°è°ƒç”¨çš„@sizeå‚æ•°æ›´å¤§ï¼Œlookupä¹Ÿæ›´å¤§ã€‚Fullå‡½æ•°æ˜¯Seal()è°ƒç”¨çš„ï¼ŒLight()æ˜¯VerifySeal()å‡†å¤‡çš„ hashimoto()å‡½æ•°12// consensus/ethash/algorithm.go func hashimoto(hash []byte, nonce uint64, size uint64, lookup(index uint32) []uint32) (digest []byte, result []byte) ä¼ å…¥çš„å‚æ•°åŒ…æ‹¬ï¼š hash åŒºå—å“ˆå¸Œå€¼ nonce åŒºå—nonce lookup() éçº¿æ€§è¡¨æŸ¥æ‰¾çš„å“ˆå¸Œå‡½æ•° size æŸ¥æ‰¾çš„éçº¿æ€§è¡¨æ ¼çš„å®¹é‡ digest 32bytesçš„å­—èŠ‚ä¸² result 32bytesçš„å­—èŠ‚ä¸² ç»è¿‡ä¸€ç³»åˆ—å¤šæ¬¡ã€å¤šç§çš„å“ˆå¸Œè¿ç®—ï¼Œhashimoto()è¿”å›ä¸¤ä¸ªé•¿åº¦å‡ä¸º32çš„byteæ•°ç»„ digest[]å’Œresult[] Cliqueå…±è¯†ç®—æ³•Cliqueç®—æ³•åˆç§°Proof-of-Authortiy(PoA) Cliqueç®—æ³•å®ç°å…¬å¼ï¼š $$ n = F(pr, h) $$ F()æ˜¯æ¤­åœ†æ›²çº¿æ•°å­—ç­¾åç®—æ³•(ECDSA)ï¼Œnæ˜¯ç”Ÿæˆçš„æ•°å­—ç­¾åï¼Œpræ˜¯å…¬é’¥ï¼Œhæ˜¯è¢«åŠ å¯†çš„å†…å®¹ Clique.Seal()å‡½æ•°çš„åŸºæœ¬é€»è¾‘å°±æ˜¯ï¼šæœ‰ä¸€ä¸ªAddressç±»å‹åœ°å€ç”¨ä½œæ•°å­—ç­¾åçš„å…¬é’¥ï¼Œå¦‚æœå®ƒæ˜¯å·²è®¤è¯çš„ï¼Œåˆ™æ‰§è¡ŒæŒ‡å®šçš„æ•°å­—ç­¾åç®—æ³• Cliqueçš„è®¤è¯æœºåˆ¶åŒ…å«ä»¥ä¸‹è§„åˆ™ æ‰€æœ‰çš„åœ°å€åˆ†ä¸ºå·²è®¤è¯å’Œæœªè®¤è¯çš„ å·²è®¤è¯å’Œæœªè®¤è¯å¯ä»¥äº’ç›¸è½¬æ¢ï¼Œå¿…é¡»é€šè¿‡æŠ•ç¥¨æœºåˆ¶å®Œæˆ ä¸€å¼ æŠ•ç¥¨åŒ…æ‹¬ï¼šæŠ•ç¥¨æ–¹åœ°å€ï¼Œè¢«æŠ•ç¥¨åœ°å€ï¼Œå’Œè¢«æŠ•ç¥¨åœ°å€çš„æ–°è®¤è¯çŠ¶æ€ ä»»æ„åœ°å€Aåªèƒ½ç»™åœ°å€BæŠ•ä¸€å¼ ç¥¨ Cliqueç®—æ³•ä¸­çš„æŠ•ç¥¨ç³»ç»Ÿçš„å·§å¦™ä¹‹å¤„åœ¨äºï¼Œæ¯å¼ æŠ•ç¥¨å¹¶ä¸æ˜¯æŸä¸ªæŠ•ç¥¨æ–¹ä¸»åŠ¨â€œæŠ•â€å‡ºæ¥çš„ï¼Œè€Œæ˜¯éšæœºç»„åˆå‡ºæ¥çš„ æ–°åŒºå—çš„Coinbaseæ˜¯ä¸€ä¸ªéšæœºçš„è¢«æŠ•ç¥¨åœ°å€ é¦–å…ˆä»proposalsä¸­ç­›é€‰å‡ºæœ‰æ•ˆçš„ä¸è®°åæŠ•ç¥¨ï¼Œè·å–æœ‰æ•ˆçš„è¢«æŠ•ç¥¨åœ°å€åˆ—è¡¨ï¼Œéšæœºé€‰å–ä¸€ä¸ªåœ°å€ä½œä¸ºCoinbaseã€‚æ–°åŒºå—çš„Coinbaseä¼šåœ¨åé¢çš„è®¤è¯ç¯èŠ‚å½“ä½œè¢«æŠ•ç¥¨åœ°å€ æ€»ç»“ Ethashç®—æ³•(PoW)åŸºäºè¿ç®—èƒ½åŠ›æ¥ç­›é€‰å‡ºæŒ–æ˜åŒºå—çš„è·èƒœè€…ï¼Œè¿ç®—è¿‡ç¨‹ä¸­ä½¿ç”¨äº†å¤§é‡ã€å¤šæ¬¡ã€å¤šç§çš„å“ˆå¸Œå‡½æ•°ï¼Œé€šè¿‡æé«˜çš„è®¡ç®—èµ„æºæ¶ˆè€—ï¼Œæ¥é™åˆ¶æŸäº›èŠ‚ç‚¹é€šè¿‡è¶…å¸¸è§„çš„è®¡ç®—èƒ½åŠ›è½»æ˜“å½¢æˆâ€œä¸­å¿ƒåŒ–â€å€¾å‘ Cliqueç®—æ³•(PoA)åˆ©ç”¨æ•°å­—ç­¾åç®—æ³•å®ŒæˆSealæ“ä½œï¼Œç­¾åæ‰€ç”¨å…¬é’¥å¿…é¡»æ˜¯å·²è®¤è¯çš„ã€‚æ‰€æœ‰è®¤è¯åœ°å€åŸºäºç‰¹æ®Šçš„æŠ•ç¥¨åœ°å€è¿›è¡ŒåŠ¨æ€ç®¡ç†ï¼Œè®°åæŠ•ç¥¨ç”±ä¸è®°åæŠ•ç¥¨å’ŒæŠ•ç¥¨æ–¹åœ°å€éšæœºç»„åˆè€Œæˆï¼Œæœç»é‡å¤çš„ä¸è®°åæŠ•ç¥¨ï¼Œä¸¥æ ¼é™åˆ¶å¤–éƒ¨ä»£ç æ¶æ„æ“çºµæŠ•ç¥¨æ•°æ® ä»¥å¤ªåŠè¿˜åœ¨åŒºå—ç»“æ„ä¸­å¢åŠ äº†å”åŒºå—(uncles)æˆå‘˜ä»¥åŠ å¤§è®¡ç®—èµ„æºçš„æ¶ˆè€—ï¼Œå¹¶é€šè¿‡åœ¨äº¤æ˜“æ‰§è¡Œç¯èŠ‚å¯¹å”åŒºå—ä½œè€…(æŒ–æ˜è€…)çš„å¥–åŠ±ï¼Œä»¥æ”¶ç›Šæœºåˆ¶æ¥è°ƒåŠ¨ç½‘ç»œä¸­å„èŠ‚ç‚¹è¿ç®—èµ„æºåˆ†å¸ƒæ›´åŠ å‡åŒ€ã€‚","tags":[{"name":"Golang","slug":"Golang","permalink":"https://joker208.github.io/tags/Golang/"},{"name":"ä»¥å¤ªåŠ","slug":"ä»¥å¤ªåŠ","permalink":"https://joker208.github.io/tags/ä»¥å¤ªåŠ/"}]},{"title":"Golangå­¦ä¹ ç¬”è®°ï¼ˆäº”ï¼‰","date":"2018-09-18T16:00:00.000Z","path":"2018/09/19/Golangå­¦ä¹ ç¬”è®°ï¼ˆäº”ï¼‰/","text":"Goè¯­è¨€ç‰¹æ€§ å¯ç›´æ¥ç¼–è¯‘æˆæœºå™¨ç ï¼Œç›´æ¥ç”Ÿæˆå¯æ‰§è¡ŒäºŒè¿›åˆ¶æ–‡ä»¶ é™æ€ç±»å‹è¯­è¨€ï¼Œå¯ä»¥åœ¨ç¼–è¯‘çš„æ—¶å€™æ£€æŸ¥å‡ºæ¥éšè—çš„å¤§å¤šæ•°é—®é¢˜ åŠ¨æ€ç±»å‹è¯­è¨€ï¼šæ˜¯æŒ‡åœ¨è¿è¡ŒæœŸé—´æ‰å»åšæ•°æ®ç±»å‹æ£€æŸ¥çš„è¯­è¨€ï¼Œè¯´çš„æ˜¯æ•°æ®ç±»å‹ åŠ¨æ€è¯­è¨€ï¼šè¯´çš„æ˜¯è¿è¡Œæ˜¯æ”¹å˜ç»“æ„ï¼Œè¯´çš„æ˜¯ä»£ç ç»“æ„ é™æ€ç±»å‹è¯­è¨€ï¼šé™æ€è¯­è¨€çš„æ•°æ®ç±»å‹æ˜¯åœ¨ç¼–è¯‘æœŸé—´ï¼ˆæˆ–è¿è¡Œä¹‹å‰ï¼‰ç¡®å®šçš„ï¼Œç¼–å†™ä»£ç çš„æ—¶å€™è¦æ˜ç¡®ç¡®å®šå˜é‡çš„æ•°æ®ç±»å‹ é™æ€è¯­è¨€ï¼šä¸åŠ¨æ€è¯­è¨€ç›¸å¯¹åº”çš„ï¼Œè¿è¡Œæ—¶ç»“æ„ä¸å¯å˜çš„è¯­è¨€å°±æ˜¯é™æ€è¯­è¨€ å¤§é‡çš„ç¬¬ä¸‰æ–¹åŒ…å¯ä»¥ä½¿ç”¨ è¯­è¨€å±‚é¢æ”¯æŒå¹¶å‘ go helloï¼ˆï¼‰ æ”¯æŒåƒåœ¾å›æ”¶ è¯­è¨€ç®€æ´ï¼Œå…³é”®å­—åªæœ‰25ä¸ªï¼Œæ”¯æŒç»§æ‰¿ã€é‡è½½ã€å¯¹è±¡ è·¨å¹³å°ï¼Œå¼•ç”¨plan9çš„ä»£ç ï¼Œä¸ä¾èµ–ç³»ç»Ÿä¿¡æ¯ Plan9æ˜¯ä¸€ä¸ªåˆ†å¸ƒå¼æ“ä½œç³»ç»Ÿï¼Œå®ƒèƒ½æŠŠç½‘ç»œä¸Šä¸€åˆ‡çš„èµ„æºå½“ä½œæ–‡ä»¶æ¥è¿›è¡Œä½¿ç”¨ã€‚Plan9ä¸­æœ€æœ¬è´¨çš„æ€æƒ³æ˜¯â€œä¸€åˆ‡çš†æ˜¯æ–‡ä»¶â€ Goè¯­è¨€çš„ä¼˜åŠ£ Goè¯­è¨€é€‚åˆåšæœåŠ¡ç«¯ç¨‹åºï¼Œä¾‹å¦‚å„ç§webç¨‹åºï¼ŒæœåŠ¡å™¨è½¯ä»¶ï¼Œå‘½ä»¤è¡Œå·¥å…· Goè¯­è¨€ä¸é€‚åˆå¼€å‘æœ‰å›¾å½¢ç•Œé¢çš„åº”ç”¨ç¨‹åºï¼Œå®˜æ–¹æ²¡æœ‰æä¾›ç›¸å…³çš„å›¾å½¢åº“ ä¸æ”¯æŒå¤šæ€ å¤šæ€ï¼šå¤šæ€æ€§æ˜¯å…è®¸ä½ å°†çˆ¶å¯¹è±¡è®¾ç½®æˆä¸ºå’Œä¸€ä¸ªæˆ–æ›´å¤šçš„ä»–çš„å­å¯¹è±¡ç›¸ç­‰çš„æŠ€æœ¯ï¼Œèµ‹å€¼ä¹‹åï¼Œçˆ¶å¯¹è±¡å°±å¯ä»¥æ ¹æ®å½“å‰èµ‹å€¼ç»™å®ƒçš„å­å¯¹è±¡çš„ç‰¹æ€§ä»¥ä¸åŒçš„æ–¹å¼è¿ä½œã€‚ç®€å•çš„è¯´ï¼šå…è®¸å°†å­ç±»ç±»å‹çš„æŒ‡é’ˆèµ‹å€¼ç»™çˆ¶ç±»ç±»å‹çš„æŒ‡é’ˆï¼ˆä¸€ä¸ªæ¥å£ï¼Œå¤šç§æ–¹æ³•ï¼‰ã€‚C++ æ”¯æŒä¸¤ç§å¤šæ€æ€§ï¼šç¼–è¯‘æ—¶å¤šæ€æ€§ï¼Œè¿è¡Œæ—¶å¤šæ€æ€§ã€‚aã€ç¼–è¯‘æ—¶å¤šæ€æ€§ï¼ˆé™æ€å¤šæ€ï¼‰ï¼šé€šè¿‡é‡è½½å‡½æ•°å®ç°bã€è¿è¡Œæ—¶å¤šæ€æ€§ï¼ˆåŠ¨æ€å¤šæ€ï¼‰ï¼šé€šè¿‡è™šå‡½æ•°å®ç°ã€‚","tags":[{"name":"Golang","slug":"Golang","permalink":"https://joker208.github.io/tags/Golang/"}]},{"title":"ä»¥å¤ªåŠå­¦ä¹ ç¬”è®°ï¼ˆåä¸€ï¼‰","date":"2018-09-16T16:00:00.000Z","path":"2018/09/17/ä»¥å¤ªåŠå­¦ä¹ ç¬”è®°ï¼ˆåä¸€ï¼‰/","text":"ä»¥å¤ªåŠæºä»£ç æŒ–çŸ¿åœ¨ä»¥å¤ªåŠä¸­mineråŒ…è´Ÿè´£æä¾›æ–°æŒ–çš„åŒºå— å…¬å…±ç±»Minerç”¨äºå®ç°æŒ–çŸ¿åŠŸèƒ½ï¼Œé‡Œé¢åŒ…å«ä¸€ä¸ªworkerç±»å‹çš„æˆå‘˜å˜é‡ï¼Œwokeré‡Œé¢æœ‰ä¸€ç»„Agentæ¥å£ç±»å‹å¯¹è±¡ Workç»“æ„ä½“ç”¨äºæºå¸¦æ•°æ® æ•°æ®ä¼ è¾“è¿‡ç¨‹ï¼šworderæŠŠworkå¯¹è±¡å‘é€ç»™æ¯ä¸ªAgentï¼Œå…¶ä¸­çš„Agentå®ŒæˆæŒ–çŸ¿æ˜¯ï¼Œå°†ä¸€ä¸ªç»è¿‡æˆæƒçš„BlockåŠ ä¸ŠWorkè¿”å›ç»™worder ä¸€ä¸ªæ–°åŒºå—è¢«æŒ–æ˜ä»£ç å®ç°åˆ†ä¸ºä¸¤æ­¥ï¼š ç»„è£…ä¸€ä¸ªæ–°åŒºå—ï¼Œè¿™ä¸ªåŒºå—å„ä¸ªæ•°æ®åŸºæœ¬å®Œæ•´ï¼Œå¹¶ä¸”æ‰€æœ‰äº¤æ˜“æ‰§è¡Œå®Œæ¯•ï¼Œæ‰€æœ‰æ”¶æ®éƒ½è®°å½•å®Œæ¯• è¡¥å…¨åŒºå—å…¶å®ƒçš„æˆå‘˜å±æ€§ï¼Œå®Œæˆæˆæƒ mineråŒ…è§£æMinerç±» New()ï¼šåœ¨å¯¹minerçš„æˆå‘˜å˜é‡åˆå§‹åŒ–å®Œæˆåï¼Œåˆ›å»ºworkerå¯¹è±¡ï¼Œåˆ›å»ºå®Œæˆåè¿è¡Œminer.Update()å‡½æ•° Update()ï¼šUpdateç›‘å¬æœ‰å…³Downloaderçš„äº‹ä»¶ï¼Œå½“æ”¶åˆ°Downloaderçš„StartEventæ—¶ï¼Œè¯´æ˜æ­£åœ¨ä¸‹è½½æ–°åŒºå—ï¼Œæ­¤æ—¶åœæ­¢æŒ–æ˜å·¥ä½œï¼Œç»§ç»­ç›‘å¬ï¼›å½“æ”¶åˆ°DoneEventæˆ–FailEventæ—¶ï¼Œè¯´æ˜ä¸‹è½½å®Œæˆæˆ–ä¸‹è½½å¤±è´¥ï¼Œåˆ™ç»§ç»­æŒ–æ˜æ–°åŒºå—ï¼Œåœæ­¢ç›‘å¬ Workerç±» Update()ï¼šç›‘å¬ChainHeadEventï¼ŒChainSideEventï¼ŒTxPreEventå‡ ä¸ªäº‹ä»¶ ChainHeadEventäº‹ä»¶æ˜¯åŒºå—é“¾ä¸­åŠ å…¥äº†ä¸€ä¸ªæ–°çš„åŒºå—ä½œä¸ºé“¾å¤´ï¼Œworkerä¼šç«‹åˆ»å¼€å§‹å‡†å¤‡æŒ–æ˜ ChainSideEventäº‹ä»¶æ˜¯åŒºå—é“¾ä¸­åŠ å…¥ä¸€ä¸ªæ–°åŒºå—ä½œä¸ºé“¾å¤´çš„æ—æ”¯ï¼Œworkerä¼šæŠŠåŒºå—åŠ å…¥possibleUncles[]ï¼Œä½œä¸ºæ–°åŒºå—å¯èƒ½çš„Uncle TxPreEventäº‹ä»¶æ˜¯ä¸€ä¸ªæ–°çš„äº¤æ˜“txåŠ å…¥TxPoolï¼ŒworkeræŠŠtxåŠ å…¥Work.txsæ•°ç»„ wait()ï¼šè¯¥å‡½æ•°ä¼šä¸€ç›´ç­‰å¾…Agentå‘é€å›æ¥æ–°çš„Blockå’ŒWorkå¯¹è±¡ commitNewWork()ï¼šå®Œæˆå¾…æŒ–æ˜åŒºå—çš„ç»„è£… CpuAgentç±» update()ï¼šä¸€ç›´ç›‘å¬ç›¸å…³channelï¼Œå¦‚æœæ”¶åˆ°Workå¯¹è±¡ï¼Œå¯åŠ¨mine()å‡½æ•°ï¼›å¦‚æœæ”¶åˆ°åœæ­¢æ¶ˆæ¯ï¼Œé€€å‡ºä¸€åˆ‡ç›¸å…³æ“ä½œ mine()ï¼šè°ƒç”¨Engine.Seal()å‡½æ•°ï¼Œå¯¹åŒºå—è¿›è¡Œæˆæƒï¼Œå¦‚æœæˆåŠŸï¼Œå°†Blockå’ŒWorkä¸€èµ·å‘é€ç»™worker","tags":[{"name":"Golang","slug":"Golang","permalink":"https://joker208.github.io/tags/Golang/"},{"name":"ä»¥å¤ªåŠ","slug":"ä»¥å¤ªåŠ","permalink":"https://joker208.github.io/tags/ä»¥å¤ªåŠ/"}]},{"title":"ä»¥å¤ªåŠå­¦ä¹ ç¬”è®°ï¼ˆåï¼‰","date":"2018-09-14T16:00:00.000Z","path":"2018/09/15/ä»¥å¤ªåŠå­¦ä¹ ç¬”è®°ï¼ˆåï¼‰/","text":"ä»¥å¤ªåŠæºä»£ç ä»¥å¤ªåŠä¸­æ‰€æœ‰çš„æ•°æ®éƒ½æ˜¯ä»¥é”®å€¼å¯¹çš„å½¢å¼å­˜åœ¨ï¼Œä½¿ç”¨çš„åº•å±‚æ•°æ®åº“LevelDB äº¤æ˜“æ“ä½œçš„è®°å½•ä»¥åŠç›¸å…³çš„æ•°æ®æ„æˆäº†åŒºå— äº¤æ˜“çš„ç»“æœä»¥è´¦æˆ·çš„çŠ¶æ€å­˜åœ¨ å„ä¸ªæ•°æ®å•å…ƒå±‚æ¬¡å¦‚ä¸‹å›¾ï¼š å„ä¸ªæ•°æ®å•å…ƒä½¿ç”¨Merkle-PatriciaTrie(MPT)æ•°æ®ç»“æ„ç»„ç»‡ç®¡ç†æ•°æ® åŒºå—Blockè´¦æˆ·çš„æ´»åŠ¨éƒ½æ˜¯åœ¨åŒºå—ä¸­å­˜å‚¨ï¼Œæ¯ä¸ªåŒºå—éƒ½æœ‰ä¸€ä¸ªäº¤æ˜“å¯¹è±¡çš„åˆ—è¡¨ äº¤æ˜“çš„ç»“æœç”±ä¸€ä¸ªReceiptå¯¹è±¡å’Œä¸€ç»„Logå¯¹è±¡è®°å½• ä¸åŒçš„åŒºå—é€šè¿‡ParentHashæŒ‡é’ˆä¸²è”æˆå•å‘é“¾è¡¨ åŒºå—çš„ç»“æ„åˆ†ä¸ºHeaderå’ŒBody Headerçš„æˆå‘˜å˜é‡ï¼š ParentHashï¼šæŒ‡å‘çˆ¶åŒºå—çš„æŒ‡é’ˆï¼Œæ¯ä¸ªåŒºå—æœ‰ä¸”åªæœ‰ä¸€ä¸ªçˆ¶åŒºå— Coinbaseï¼šåŒºå—çš„çŸ¿å·¥åœ°å€ UncleHashï¼šåŒºå—ç»“æ„ä½“æˆå‘˜unclesçš„RLPï¼ˆRecursive Length Prefixï¼Œé€’å½’é•¿åº¦å‰ç¼€ç¼–ç ï¼‰å“ˆå¸Œå€¼ Rootï¼šStateDBä¸­çš„çŠ¶æ€æ ‘çš„æ ¹èŠ‚ç‚¹çš„RLPå“ˆå¸Œå€¼ TxHashï¼šTxæ ‘çš„æ ¹èŠ‚ç‚¹çš„RLPå“ˆå¸Œå€¼ ReceiptHashï¼šæ¥æ”¶æ ‘çš„æ ¹èŠ‚ç‚¹çš„RLPå“ˆå¸Œå€¼ Bloomï¼šè¿‡æ»¤å™¨ï¼Œç”¨æ¥åˆ¤æ–­logå¯¹è±¡æ˜¯å¦å­˜åœ¨ Difficultyï¼šåŒºå—éš¾åº¦ Numberï¼šåŒºå—åºå· Timeï¼šåŒºå—åˆ›å»ºæ—¶é—´ GasLimitï¼šåŒºå—æ‰€æœ‰Gasæ¶ˆè€—ä¸Šé™ GasUsedï¼šåŒºå—çš„æ“ä½œæ‰§è¡Œå®é™…æ¶ˆè€—çš„Gasæ€»å’Œ Nonceï¼š64ä½å“ˆå¸Œæ•° Bodyçš„æˆå‘˜å˜é‡ï¼š tdï¼ˆtotalDifficultyï¼‰æ•´ä¸ªåŒºå—é“¾è¡¨æ‰€æœ‰çš„åŒºå—Difficultyçš„æ€»å’Œ Uncles ä¸ºäº†é˜²æ­¢ä»¥å¤ªåŠç½‘ç»œæ³¢åŠ¨è¿‡å¤§ blockçš„å”¯ä¸€æ ‡è¯†ç¬¦å°±æ˜¯Headeræˆå‘˜çš„RLPå“ˆå¸Œå€¼ åŒºå—é“¾æ“ä½œ æŸ¥æ‰¾ åŒºå—é“¾ä¸­å­˜åœ¨æˆå‘˜currentBlockï¼ŒæŒ‡å‘å½“å‰æœ€æ–°çš„åŒºå— æ’å…¥å’Œåˆ é™¤ åŒºå—é“¾çš„headerä¸­å­˜åœ¨ParentHashçš„å‘å‰æŒ‡é’ˆï¼Œè¿™ä¸ªå€¼ä¸èƒ½éšæ„ä¿®æ”¹ï¼Œå½“éœ€è¦æ’å…¥æ—¶ï¼Œä»æ–°çš„headerå¼€å§‹å›æº¯ï¼Œä¿è¯æ‰€æœ‰çš„parentéƒ½å†™å…¥æ•°æ®åº“ï¼Œä¸€èˆ¬æ’å…¥å’Œåˆ é™¤æ—¶åŒæ—¶å‡ºç°çš„ Merkle-Patricia Trie(MPT)MPTæ˜¯ä»¥å¤ªåŠè‡ªå®šä¹‰çš„æ ‘å½¢æ•°æ®ç»“æ„ MPT çš„èŠ‚ç‚¹åˆ†ä¸ºå››ç§ï¼š fullNodeï¼šå¯ä»¥æºå¸¦å¤šä¸ªå­èŠ‚ç‚¹çš„çˆ¶èŠ‚ç‚¹ shortNodeï¼šä»…æœ‰ä¸€ä¸ªå­èŠ‚ç‚¹çš„çˆ¶èŠ‚ç‚¹ valueNodeï¼šMPTä¸­çš„å­èŠ‚ç‚¹ hashNodeï¼šfullNodeæˆ–è€…shortNodeçš„RLPå“ˆå¸Œå€¼","tags":[{"name":"Golang","slug":"Golang","permalink":"https://joker208.github.io/tags/Golang/"},{"name":"ä»¥å¤ªåŠ","slug":"ä»¥å¤ªåŠ","permalink":"https://joker208.github.io/tags/ä»¥å¤ªåŠ/"}]},{"title":"ä»¥å¤ªåŠå­¦ä¹ ç¬”è®°ï¼ˆä¹ï¼‰","date":"2018-09-13T16:00:00.000Z","path":"2018/09/14/ä»¥å¤ªåŠå­¦ä¹ ç¬”è®°ï¼ˆä¹ï¼‰/","text":"ä»¥å¤ªåŠæºç åˆ†æ mainå‡½æ•°åˆ†æ123456789101112func HandleAction(action interface&#123;&#125;, context *Context) (err error) &#123; if a, ok := action.(ActionFunc); ok &#123; return a(context) &#125; else if a, ok := action.(func(*Context) error); ok &#123; return a(context) &#125; else if a, ok := action.(func(*Context)); ok &#123; // deprecated function signature a(context) return nil &#125; else &#123; return errInvalidActionType &#125;&#125; å…¶ä¸­actionç±»å‹ä¸ºç¬¬äºŒä¸ªåˆ†æ”¯ï¼Œæ‰§è¡Œa(context)ï¼Œè¿™æ—¶ä¼šè°ƒç”¨App.init()åˆå§‹åŒ–çš„consoleCommand åˆ†æconsoleCommandå‡½æ•°1234567891011consoleCommand = cli.Command&#123; Action: utils.MigrateFlags(localConsole), Name: \"console\", Usage: \"Start an interactive JavaScript environment\", Flags: append(append(append(nodeFlags, rpcFlags...), consoleFlags...), whisperFlags...), Category: \"CONSOLE COMMANDS\", Description: `The Geth console is an interactive shell for the JavaScript runtime environmentwhich exposes a node admin interface as well as the Ãapp JavaScript API.See https://github.com/ethereum/go-ethereum/wiki/Javascipt-Console.`,&#125; consoleCommandä¸­åŒ…å«çš„Actionä¼šæ‰§è¡ŒlocalConsoleå‡½æ•° åˆ†ælocalConsoleå‡½æ•°1234567891011121314151617181920212223242526272829303132333435func localConsole(ctx *cli.Context) error &#123; // Create and start the node based on the CLI flags node := makeFullNode(ctx) startNode(ctx, node) defer node.Stop() // Attach to the newly started node and start the JavaScript console client, err := node.Attach() if err != nil &#123; utils.Fatalf(\"Failed to attach to the inproc geth: %v\", err) &#125; config := console.Config&#123; DataDir: utils.MakeDataDir(ctx), DocRoot: ctx.GlobalString(utils.JSpathFlag.Name), Client: client, Preload: utils.MakeConsolePreloads(ctx), &#125; console, err := console.New(config) if err != nil &#123; utils.Fatalf(\"Failed to start the JavaScript console: %v\", err) &#125; defer console.Stop(false) // If only a short execution was requested, evaluate and return if script := ctx.GlobalString(utils.ExecFlag.Name); script != \"\" &#123; console.Evaluate(script) return nil &#125; // Otherwise print the welcome screen and enter interactive mode console.Welcome() console.Interactive() return nil&#125; localConsoleå‡½æ•°åˆ†ä¸º3å—åŠŸèƒ½ï¼š åˆ›å»ºå¹¶å¯åŠ¨ä¸€ä¸ªèŠ‚ç‚¹ï¼Œåœ¨ç»“æŸæ—¶åœæ­¢èŠ‚ç‚¹ å¯åŠ¨ä¸€ä¸ªjsæ§åˆ¶å°å¹¶ä¸”ä¸è¿æ¥åˆšåˆ›å»ºçš„èŠ‚ç‚¹ è¾“å‡ºæ¬¢è¿ä¿¡æ¯ åˆ†æmakeFullNodeå‡½æ•°123456789101112131415161718192021222324252627282930313233343536373839func makeFullNode(ctx *cli.Context) *node.Node &#123; stack, cfg := makeConfigNode(ctx) utils.RegisterEthService(stack, &amp;cfg.Eth) // Whisper must be explicitly enabled by specifying at least 1 whisper flag or in dev mode shhEnabled := enableWhisper(ctx) shhAutoEnabled := !ctx.GlobalIsSet(utils.WhisperEnabledFlag.Name) &amp;&amp; ctx.GlobalIsSet(utils.DevModeFlag.Name) if shhEnabled || shhAutoEnabled &#123; if ctx.GlobalIsSet(utils.WhisperMaxMessageSizeFlag.Name) &#123; cfg.Shh.MaxMessageSize = uint32(ctx.Int(utils.WhisperMaxMessageSizeFlag.Name)) &#125; if ctx.GlobalIsSet(utils.WhisperMinPOWFlag.Name) &#123; cfg.Shh.MinimumAcceptedPOW = ctx.Float64(utils.WhisperMinPOWFlag.Name) &#125; utils.RegisterShhService(stack, &amp;cfg.Shh) &#125; // Add the Ethereum Stats daemon if requested. if cfg.Ethstats.URL != \"\" &#123; utils.RegisterEthStatsService(stack, cfg.Ethstats.URL) &#125; // Add the release oracle service so it boots along with node. if err := stack.Register(func(ctx *node.ServiceContext) (node.Service, error) &#123; config := release.Config&#123; Oracle: relOracle, Major: uint32(params.VersionMajor), Minor: uint32(params.VersionMinor), Patch: uint32(params.VersionPatch), &#125; commit, _ := hex.DecodeString(gitCommit) copy(config.Commit[:], commit) return release.NewReleaseService(ctx, config) &#125;); err != nil &#123; utils.Fatalf(\"Failed to register the Geth release oracle service: %v\", err) &#125; return stack&#125; é¦–å…ˆä½¿ç”¨makeConfigNodeå‡½æ•°åˆ›å»ºnodeï¼Œç„¶åæ·»åŠ ä¸€ä¸ªå’ŒèŠ‚ç‚¹åŒæ—¶å¯åŠ¨çš„æœåŠ¡ åˆ†æmakeConfigNodeå‡½æ•°func makeConfigNode(ctx *cli.Context) (*node.Node, gethConfig) { // Load defaults. cfg := gethConfig{ Eth: eth.DefaultConfig, Shh: whisper.DefaultConfig, Node: defaultNodeConfig(), } // Load config file. if file := ctx.GlobalString(configFileFlag.Name); file != &quot;&quot; { if err := loadConfig(file, &amp;cfg); err != nil { utils.Fatalf(&quot;%v&quot;, err) } } // Apply flags. utils.SetNodeConfig(ctx, &amp;cfg.Node) stack, err := node.New(&amp;cfg.Node) if err != nil { utils.Fatalf(&quot;Failed to create the protocol stack: %v&quot;, err) } utils.SetEthConfig(ctx, stack, &amp;cfg.Eth) if ctx.GlobalIsSet(utils.EthStatsURLFlag.Name) { cfg.Ethstats.URL = ctx.GlobalString(utils.EthStatsURLFlag.Name) } utils.SetShhConfig(ctx, stack, &amp;cfg.Shh) return stack, cfg } å‡½æ•°å…ˆåˆå§‹åŒ–configå¹¶èµ‹å€¼ï¼Œç„¶ååˆå§‹åŒ–ä¸€ä¸ªnodeï¼Œnodeåˆ›å»ºå®Œæˆä»¥åè®¾ç½®EhtConfigå’ŒShhConfig åˆ†ænode.Newå‡½æ•°- 123456789101112131415161718192021222324252627282930313233343536373839404142func New(conf *Config) (*Node, error) &#123; // Copy config and resolve the datadir so future changes to the current // working directory don't affect the node. confCopy := *conf conf = &amp;confCopy if conf.DataDir != \"\" &#123; absdatadir, err := filepath.Abs(conf.DataDir) if err != nil &#123; return nil, err &#125; conf.DataDir = absdatadir &#125; // Ensure that the instance name doesn't cause weird conflicts with // other files in the data directory. if strings.ContainsAny(conf.Name, `/\\`) &#123; return nil, errors.New(`Config.Name must not contain '/' or '\\'`) &#125; if conf.Name == datadirDefaultKeyStore &#123; return nil, errors.New(`Config.Name cannot be \"` + datadirDefaultKeyStore + `\"`) &#125; if strings.HasSuffix(conf.Name, \".ipc\") &#123; return nil, errors.New(`Config.Name cannot end in \".ipc\"`) &#125; // Ensure that the AccountManager method works before the node has started. // We rely on this in cmd/geth. am, ephemeralKeystore, err := makeAccountManager(conf) if err != nil &#123; return nil, err &#125; // Note: any interaction with Config that would create/touch files // in the data directory or instance directory is delayed until Start. return &amp;Node&#123; accman: am, ephemeralKeystore: ephemeralKeystore, config: conf, serviceFuncs: []ServiceConstructor&#123;&#125;, ipcEndpoint: conf.IPCEndpoint(), httpEndpoint: conf.HTTPEndpoint(), wsEndpoint: conf.WSEndpoint(), eventmux: new(event.TypeMux), &#125;, nil&#125; é¦–å…ˆå°†ä¿å­˜è·¯å¾„è½¬æ¢ä¸ºç»å¯¹è·¯å¾„å¹¶è¿›è¡Œåˆæ³•æ€§éªŒè¯ï¼Œåœ¨èŠ‚ç‚¹å¼€å§‹å‰æ‰§è¡ŒAccountManagerï¼Œæœ€åä¸€æ­¥æ‰æ˜¯çœŸæ­£çš„åˆ›å»ºèŠ‚ç‚¹","tags":[{"name":"Golang","slug":"Golang","permalink":"https://joker208.github.io/tags/Golang/"},{"name":"ä»¥å¤ªåŠ","slug":"ä»¥å¤ªåŠ","permalink":"https://joker208.github.io/tags/ä»¥å¤ªåŠ/"}]},{"title":"ä»¥å¤ªåŠå­¦ä¹ ç¬”è®°ï¼ˆå…«ï¼‰","date":"2018-09-10T16:00:00.000Z","path":"2018/09/11/ä»¥å¤ªåŠå­¦ä¹ ç¬”è®°ï¼ˆå…«ï¼‰/","text":"ä»¥å¤ªåŠæºç åˆ†æä»¥å¤ªåŠç¯å¢ƒæ­å»ºæ­å»ºgoç¯å¢ƒ ç¼–è¯‘æºç  ç¼–è¯‘å®Œæˆåä¼šç”Ÿæˆä»¥ä¸‹æŒ‡ä»¤ abigen æºä»£ç ç”Ÿæˆå™¨ï¼Œå°†æ™ºèƒ½åˆçº¦è½¬æ¢ä¸ºGo packageï¼Œç¼–è¯‘Solidityæºæ–‡ä»¶ bootnod ç”¨ä½œè½»é‡çº§çš„èŠ‚ç‚¹å¼•å¯¼å·¥å…· evm å¯ä»¥è¿è¡Œå­—èŠ‚ç çš„ä»¥å¤ªåŠè™šæ‹Ÿæœºï¼Œå¯ä»¥å¯¹evmæ“ä½œç è¿›è¡Œå°è£… geth ä»¥å¤ªåŠä¸»è¦çš„æ‰§è¡Œå®¢æˆ·ç«¯ï¼Œå¤šç”¨é€”å‘½ä»¤è¡Œå·¥å…· rlpdump å¼€å‘å®ç”¨å·¥å…·ï¼Œå¯å°†äºŒè¿›åˆ¶RLPï¼ˆé€’å½’é•¿åº¦å‰ç¼€ï¼‰ï¼ˆä»¥å¤ªåŠåè®®ç½‘ç»œä»¥åŠå…±è¯†ä½¿ç”¨çš„æ•°æ®ç¼–ç ï¼‰è½¬å‚¨å­˜è‡³ç”¨æˆ·å‹å¥½çš„åˆ†å±‚è¡¨ç¤º puppeth å‘½ä»¤è¡Œæ‰§è¡Œé¡µé¢çš„å‘å¯¼ç¨‹åºï¼Œç”¨äºåˆ›å»ºæ–°çš„ä»¥å¤ªåŠç½‘ç»œ swarm swarmçš„å®ˆæŠ¤ç¨‹åºå’Œå·¥å…·ï¼ˆswarm æ˜¯ä¸€ä¸ªåˆ†å¸ƒå¼å­˜å‚¨å¹³å°å’Œå†…å®¹åˆ†å‘æœåŠ¡ï¼‰ gethgethå­å‘½ä»¤åˆ†ä¸ºä»¥ä¸‹å‡ ç§ accountï¼šè´¦æˆ·ç®¡ç† attachï¼šé“¾æ¥åˆ°jsç¯å¢ƒ bugï¼šæŠ¥å‘Šgethåº“çš„é”™è¯¯ consoleï¼šå¼€å¯ä¸€ä¸ªjsäº¤äº’ç¯å¢ƒ copydbï¼šå°†é€‰ä¸­åŒºå—é“¾çš„æ•°æ®å¤åˆ¶åˆ°æœ¬åœ° dumpï¼šåˆ é™¤æŒ‡å®šåŒºå— dumpconfigï¼šæ˜¾ç¤ºé…ç½®å€¼ exportï¼šå¯¼å‡ºåŒºå—é“¾æ•°æ® importï¼šå¯¼å…¥åŒºå—é“¾æ•°æ® initï¼šåˆå§‹åŒ–ä¸€ä¸ªæ–°çš„åˆå§‹åŒºå—ï¼ˆåˆ›ä¸–åŒºå—ï¼‰ jsï¼šæ‰§è¡ŒæŒ‡å®šçš„jsæ–‡ä»¶ licenseï¼šå±•ç¤ºè®¸å¯ä¿¡æ¯ makecacheï¼šç”Ÿæˆç”¨äºæµ‹è¯•çš„ethashæ ¡éªŒç¼“å­˜ï¼ˆethashæ˜¯å·¥ä½œé‡è¯æ˜ç®—æ³•ï¼‰ makedagï¼šç”Ÿæˆç”¨äºæµ‹è¯•çš„ethashæŒ–çŸ¿DAGï¼ˆDAGæ˜¯æ¯”ç‰¹å¸æ‰©å®¹æ–¹æ¡ˆï¼‰ monitorï¼šç›‘è§†èŠ‚ç‚¹æƒå€¼ removedbï¼šç§»é™¤åŒºå—é“¾ä»¥åŠçŠ¶æ€æ•°æ®åº“ versionï¼šæ˜¾ç¤ºç‰ˆæœ¬å· walletï¼šç®¡ç†ä»¥å¤ªåŠé’±åŒ… åˆ†æmainå‡½æ•°é¦–å…ˆä½¿ç”¨initåˆå§‹åŒ–å˜é‡å‚æ•° mianæ–¹æ³• 123456func main() &#123; if err := app.Run(os.Args); err != nil &#123; fmt.Fprintln(os.Stderr, err) os.Exit(1) &#125;&#125; è°ƒç”¨äº†app.Runå‡½æ•° Runæ–¹æ³•è§£æäº†è¾“å…¥çš„å‚æ•°ï¼Œå¹¶ä¸”å°†å‘½ä»¤ä¿å­˜åˆ°contextä¸­ï¼Œç„¶åè°ƒç”¨HandleActionæ¥å¤„ç†å‘½ä»¤ 123456789101112func HandleAction(action interface&#123;&#125;, context *Context) (err error) &#123; if a, ok := action.(ActionFunc); ok &#123; return a(context) &#125; else if a, ok := action.(func(*Context) error); ok &#123; return a(context) &#125; else if a, ok := action.(func(*Context)); ok &#123; // deprecated function signature a(context) return nil &#125; else &#123; return errInvalidActionType &#125;&#125;","tags":[{"name":"Golang","slug":"Golang","permalink":"https://joker208.github.io/tags/Golang/"},{"name":"ä»¥å¤ªåŠ","slug":"ä»¥å¤ªåŠ","permalink":"https://joker208.github.io/tags/ä»¥å¤ªåŠ/"}]},{"title":"ä»¥å¤ªåŠå­¦ä¹ ç¬”è®°ï¼ˆä¸ƒï¼‰","date":"2018-09-01T16:00:00.000Z","path":"2018/09/02/ä»¥å¤ªåŠå­¦ä¹ ç¬”è®°ï¼ˆä¸ƒï¼‰/","text":"ä»£å¸ICOERC20 TokenERC20æ˜¯ä¸€ä¸ªä»¥å¤ªåŠä»£å¸æ ‡å‡†ï¼Œæ˜¯åˆ›å»ºä»£å¸æ—¶éœ€è¦éµå®ˆçš„æ ‡å‡† æ¥å£123456789101112131415contract ERC20Interface &#123; string public constant name = \"Token Name\"; string public constant symbol = \"SYM\"; uint8 public constant decimals = 18; // 18 is the most common number of decimal places function totalSupply() public constant returns (uint); function balanceOf(address tokenOwner) public constant returns (uint balance); function allowance(address tokenOwner, address spender) public constant returns (uint remaining); function transfer(address to, uint tokens) public returns (bool success); function approve(address spender, uint tokens) public returns (bool success); function transferFrom(address from, address to, uint tokens) public returns (bool success); event Transfer(address indexed from, address indexed to, uint tokens); event Approval(address indexed tokenOwner, address indexed spender, uint tokens); &#125; è¯´æ˜ï¼š nameï¼šä»£å¸çš„åå­— symbolï¼šä»£å¸å•ä½ decimalï¼šä»£å¸ç²¾ç¡®ä½æ•° totalSupply()ï¼šå‘è¡Œæ€»é‡ balanceOf()ï¼šæŸ¥çœ‹è´¦æˆ·ä½™é¢ allowance()ï¼šå¯ä»¥ç”¨æ¥æ§åˆ¶äº¤æ˜“ transfer()ï¼šå‘é€ä»£å¸ approve()ï¼šå…è®¸ä½¿ç”¨ç”¨æˆ·èŠ±è´¹çš„æœ€é«˜é‡‘é¢ transferFrom()ï¼šå®ç°ä¸åŒç”¨æˆ·ä¹‹é—´çš„äº¤æ˜“ Transfer()ï¼šå½“tokenè¢«è½¬ç§»æ—¶è¢«è§¦å‘ Approval()ï¼šå½“ä»»ä½•æˆåŠŸè°ƒç”¨approve()æ—¶è¢«è§¦å‘ éƒ¨ç½² å®‰è£…é…ç½®MetaMaskï¼Œé€‰æ‹©æµ‹è¯•ç½‘ç»œRopsten æ‰“å¼€Remix Solidity IDEï¼Œå¤åˆ¶ä»£ç ï¼Œå¹¶è®¾ç½®å¯¹åº”çš„é€‰é¡¹ interface tokenRecipient { function receiveApproval(address _from, uint256 _value, address _token, bytes _extraData) public; } contract TokenERC20 { string public name; string public symbol; uint8 public decimals = 18; uint256 public totalSupply; mapping (address =&gt; uint256) public balanceOf; // mapping (address =&gt; mapping (address =&gt; uint256)) public allowance; event Transfer(address indexed from, address indexed to, uint256 value); event Burn(address indexed from, uint256 value); function TokenERC20(uint256 initialSupply, string tokenName, string tokenSymbol) public { totalSupply = initialSupply * 10 ** uint256(decimals); balanceOf[msg.sender] = totalSupply; name = tokenName; symbol = tokenSymbol; } function _transfer(address _from, address _to, uint _value) internal { require(_to != 0x0); require(balanceOf[_from] &gt;= _value); require(balanceOf[_to] + _value &gt; balanceOf[_to]); uint previousBalances = balanceOf[_from] + balanceOf[_to]; balanceOf[_from] -= _value; balanceOf[_to] += _value; Transfer(_from, _to, _value); assert(balanceOf[_from] + balanceOf[_to] == previousBalances); } function transfer(address _to, uint256 _value) public { _transfer(msg.sender, _to, _value); } function transferFrom(address _from, address _to, uint256 _value) public returns (bool success) { require(_value &lt;= allowance[_from][msg.sender]); allowance[_from][msg.sender] -= _value; _transfer(_from, _to, _value); return true; } function approve(address _spender, uint256 _value) public returns (bool success) { allowance[msg.sender][_spender] = _value; return true; } function approveAndCall(address _spender, uint256 _value, bytes _extraData) public returns (bool success) { tokenRecipient spender = tokenRecipient(_spender); if (approve(_spender, _value)) { spender.receiveApproval(msg.sender, _value, this, _extraData); return true; } } function burn(uint256 _value) public returns (bool success) { require(balanceOf[msg.sender] &gt;= _value); balanceOf[msg.sender] -= _value; totalSupply -= _value; Burn(msg.sender, _value); return true; } function burnFrom(address _from, uint256 _value) public returns (bool success) { require(balanceOf[_from] &gt;= _value); require(_value &lt;= allowance[_from][msg.sender]); balanceOf[_from] -= _value; allowance[_from][msg.sender] -= _value; totalSupply -= _value; Burn(_from, _value); return true; } } Metamaskå¼¹å‡ºç¡®è®¤æ¡†ç‚¹å‡»æäº¤ï¼Œå¤åˆ¶åˆçº¦åœ°å€ æ‰“å¼€Metamaskæ·»åŠ TOKENï¼Œå¡«å…¥åˆçº¦åœ°å€ ä»£å¸äº¤æ˜“ ä½¿ç”¨ç½‘é¡µé’±åŒ…ï¼Œè¿æ¥åˆ°MetaMask æ·»åŠ ä»£å¸ï¼Œå¡«å…¥ä»£å¸åˆçº¦åœ°å€ è¿›è¡Œä»£å¸è½¬è´¦äº¤æ˜“ï¼Œè¾“å…¥ä»£å¸è´¦æˆ·å’Œæ•°é‡ä»¥åŠå¯¹åº”çš„ä»£å¸ï¼Œç‚¹å‡»åˆ›å»ºäº¤æ˜“ å®ç°ä»£å¸çš„ç®¡ç†è€…åˆ›å»ºä¸€ä¸ªownedåˆçº¦ contract owned { address public owner; function owned() { owner = msg.sender; } modifier onlyOwner { require(msg.sender == owner); _; } // å®ç°æ‰€æœ‰æƒè½¬ç§» function transferOwnership(address newOwner) onlyOwner { owner = newOwner; } } åŠ å…¥å‡½æ•°ä¿®æ”¹å™¨onlyOwner contract MyToken is owned { function MyToken( uint256 initialSupply, string tokenName, uint8 decimalUnits, string tokenSymbol, address centralMinter ) { if(centralMinter != 0 ) owner = centralMinter; } } ä»£å¸å¢å‘123456function mintToken(address target, uint256 mintedAmount) onlyOwner &#123; balanceOf[target] += mintedAmount; totalSupply += mintedAmount; Transfer(0, owner, mintedAmount); Transfer(owner, target, mintedAmount);&#125; èµ„äº§å†»ç»“åœ¨transferå‡½æ•°ä¸­æ·»åŠ æ–¹æ³• require(!frozenAccount[msg.sender]); freezeAccountå‡½æ•° mapping (address =&gt; bool) public frozenAccount; event FrozenFunds(address target, bool frozen); function freezeAccount(address target, bool freeze) onlyOwner { frozenAccount[target] = freeze; FrozenFunds(target, freeze); }","tags":[{"name":"Golang","slug":"Golang","permalink":"https://joker208.github.io/tags/Golang/"},{"name":"ä»¥å¤ªåŠ","slug":"ä»¥å¤ªåŠ","permalink":"https://joker208.github.io/tags/ä»¥å¤ªåŠ/"}]},{"title":"ä»¥å¤ªåŠå­¦ä¹ ç¬”è®°ï¼ˆå…­ï¼‰","date":"2018-08-31T16:00:00.000Z","path":"2018/09/01/ä»¥å¤ªåŠå­¦ä¹ ç¬”è®°ï¼ˆå…­ï¼‰/","text":"SoliditySolidity APIAPIä¸»è¦æ˜¯solidityä¸­çš„ç‰¹æ®Šå˜é‡å’Œå‡½æ•°ï¼Œåˆ†ä¸ºäº”ç±» åŒºå—å’Œäº¤æ˜“ é”™è¯¯å¤„ç† æ•°å­—åŠåŠ å¯†åŠŸèƒ½ åœ°å€ åˆçº¦ åŒºå—å’Œäº¤æ˜“ block.blockhash(blockNumber)ï¼šè¿”å›ç»™å®šåŒºå—å·çš„å“ˆå¸Œå€¼ block.coinbase(address)ï¼šå½“å‰å—çŸ¿å·¥çš„åœ°å€ block.difficulty è¿”å›å½“å‰åŒºå—çš„éš¾åº¦å€¼ block.gaslimit è¿”å›å½“å‰åŒºå—çš„gaslimit block.number è¿”å›å½“å‰åŒºå—çš„åŒºå—å· block.timestamp å½“å‰åŒºå—çš„æ—¶é—´æˆ³ msg.data è¿”å›å®Œæ•´çš„è°ƒç”¨æ•°æ® msg.gas è¿”å›å‰©ä½™çš„gas msg.sender è¿”å›è½¬è´¦äººçš„åœ°å€ msg.sig è¿”å›è°ƒç”¨æ•°æ®çš„å‰å››ä¸ªå­—èŠ‚ msg.value è¿”å›æ¶ˆæ¯é™„å¸¦çš„ä»¥å¤ªå¸æ•°é‡ tx.gasprice è¿”å›äº¤æ˜“æ‰€éœ€è¦çš„gas tx.origin è¿”å›äº¤æ˜“çš„å‘èµ·äººçš„åœ°å€ å…¶ä¸­msgæ˜¯å…¨å±€å˜é‡ï¼Œmsgçš„å€¼ä¼šå—åˆ°å¤–éƒ¨å‡½æ•°å½±å“ é¿å…ä½¿ç”¨block.timestamp,now,block.blockhashç”Ÿæˆéšæœºæ•°ï¼Œå› ä¸ºè¿™å‡ ä¸ªå€¼å¯èƒ½ä¼šå—åˆ°çŸ¿å·¥å½±å“ åªèƒ½æŸ¥çœ‹æœ€è¿‘çš„256ä¸ªåŒºå—ï¼Œå…¶å®ƒçš„å°†ä¼šè¿”å›0 é”™è¯¯å¤„ç†Solidityé€šè¿‡æ’¤æ¶ˆå½“å‰è°ƒç”¨æ”¹å˜çš„çŠ¶æ€æ¥å¤„ç†é”™è¯¯ Solidityä¿è¯æ¯æ¬¡è°ƒç”¨éƒ½æ˜¯äº‹åŠ¡æ€§çš„ assert(bool)ï¼šåˆ¤æ–­å†…éƒ¨é”™è¯¯ require(bool)ï¼šåˆ¤æ–­è¾“å…¥æˆ–è€…å¤–éƒ¨ç»„ä»¶é”™è¯¯ revert()ï¼šæ ‡è®°é”™è¯¯å¹¶å›é€€å½“å‰è°ƒç”¨ æ•°å­¦åŠåŠ å¯†åŠŸèƒ½ addmod(uint x,unit y,unit k)ï¼šè®¡ç®—(x+y)%k mulmod(uint x,unit y,unit k)ï¼šè®¡ç®—ï¼ˆx yï¼‰%k keccak256()ï¼šä½¿ç”¨ä»¥å¤ªåŠKeccak-256è®¡ç®—HASHå€¼ sha256()ï¼šä½¿ç”¨ä»¥å¤ªåŠSHA-256è®¡ç®—HASHå€¼ ripemd160()ï¼šä½¿ç”¨è®¡ç®—HASHå€¼ åœ°å€ .balance()ï¼šAddressçš„ä½™é¢ï¼ˆå•ä½ï¼šweiï¼‰ .transfer()ï¼šå‘é€æŒ‡å®šæ•°é‡çš„ä»¥å¤ªå¸åˆ°æŸä¸ªåœ°å€ï¼ˆå¤±è´¥æŠ›å‡ºå¼‚å¸¸ï¼‰ .send()ï¼šå‘é€æŒ‡å®šæ•°é‡çš„ä»¥å¤ªå¸åˆ°æŸä¸ªåœ°å€ï¼ˆå¤±è´¥è¿”å›falseï¼‰ .call()ï¼šå‘èµ·åº•å±‚çš„call .callcode()ï¼šå‘èµ·åº•å±‚çš„callcodeè°ƒç”¨ .delegatecall()ï¼šå‘èµ·åº•å±‚çš„delegatecallçš„è°ƒç”¨ send() æ‰§è¡Œæ—¶å¿…é¡»æ£€æŸ¥è¿”å›å€¼ä¿è¯äº¤æ˜“æˆåŠŸ åˆçº¦ thisï¼šè¡¨ç¤ºå½“å‰åˆçº¦ï¼Œå¯ä»¥è½¬æ¢ä¸ºAddress selfdestruct()ï¼šé”€æ¯å½“å‰åˆçº¦ suicide()ï¼šç­‰åŒäºselfdestruct() å‡½æ•°ä¿®æ”¹å™¨(Function Modifiers)å‡½æ•°ä¿®æ”¹å™¨ä¸»è¦ä½œä¸ºå‡½æ•°æ‰§è¡Œçš„å…ˆè¡Œæ–¹æ³•ï¼Œå½“ä¸ç¬¦åˆæ¡ä»¶æ—¶æŠ›å‡ºå¼‚å¸¸ å‡½æ•°ä¿®æ”¹å™¨å¯ä»¥è¢«ç»§æ‰¿ å¯ä»¥åŒæ—¶ç»§æ‰¿ä¸¤ä¸ªå‡½æ•°ä¿®æ”¹å™¨ 123456789101112131415161718contract owned &#123; function owned() &#123; owner = msg.sender; &#125; address owner; modifier onlyOwner &#123; if (msg.sender != owner) throw; _;//è¡¨ç¤ºå‡½æ•°ä½“çš„æ›¿æ¢ä½ç½® &#125;&#125;contract mortal is owned &#123; function close() onlyOwner &#123; selfdestruct(owner); &#125;&#125;","tags":[{"name":"Golang","slug":"Golang","permalink":"https://joker208.github.io/tags/Golang/"},{"name":"ä»¥å¤ªåŠ","slug":"ä»¥å¤ªåŠ","permalink":"https://joker208.github.io/tags/ä»¥å¤ªåŠ/"},{"name":"Solidity","slug":"Solidity","permalink":"https://joker208.github.io/tags/Solidity/"}]},{"title":"ä»¥å¤ªåŠå­¦ä¹ ç¬”è®°ï¼ˆäº”ï¼‰","date":"2018-08-10T16:00:00.000Z","path":"2018/08/11/ä»¥å¤ªåŠå­¦ä¹ ç¬”è®°ï¼ˆäº”ï¼‰/","text":"Solidityè§†å›¾å‡½æ•°ï¼ˆView Functionsï¼‰çŠ¶æ€å˜é‡ä¸ä¼šè¢«æ”¹å˜çš„å‡½æ•°ï¼Œåº”è¯¥å£°æ˜ä¸ºè§†å›¾å‡½æ•°ï¼Œå…³é”®å­—ä¸ºview è¢«è®¤ä¸ºæ˜¯ä¿®æ”¹äº†çŠ¶æ€çš„æƒ…å†µï¼š å†™å…¥çŠ¶æ€å˜é‡ è§¦å‘events åˆ›å»ºåˆçº¦ callè°ƒç”¨é™„åŠ ä»¥å¤ªå¸ è°ƒç”¨æ²¡æœ‰viewå’Œpureçš„å‡½æ•° å¯¹äºä¸ä¼šæ”¹å˜çŠ¶æ€çš„å‡½æ•°å°½é‡è¦ä½¿ç”¨view viewå’Œpureéƒ½ä¸æ˜¯å¼ºåˆ¶ä½¿ç”¨çš„ çº¯å‡½æ•°ï¼ˆView Functionsï¼‰pureè¡¨ç¤ºå‡½æ•°ä¸è¯»å–çŠ¶æ€å˜é‡ä¹Ÿä¸ä¿®æ”¹çŠ¶æ€å˜é‡ è¢«è®¤ä¸ºæ˜¯è¯»å–çŠ¶æ€çš„æƒ…å†µï¼š è¯»å‡ºçŠ¶æ€å˜é‡ è®¿é—®balanceå±æ€§ è®¿é—®block tx msgçš„æˆå‘˜ï¼ˆé™¤msg.sigå’Œmsg.dataå¤–ï¼‰ è°ƒç”¨æ²¡æœ‰pureçš„å‡½æ•° äº‹ä»¶Eventäº‹ä»¶æ˜¯ä»¥å¤ªåŠEVMçš„æ—¥å¿—åŸºç¡€è®¾æ–½ï¼Œäº‹ä»¶æ˜¯ä¸€ç§è®°å½•åŠŸèƒ½ï¼Œäº‹ä»¶å‘ç”Ÿåè®°å½•åœ¨åŒºå—é“¾ä¸Šçš„æ˜¯æ—¥å¿— å®šä¹‰äº‹ä»¶ event EventName(address bidder, uint amount); è§¦å‘äº‹ä»¶ emit EventName(msg.sender, msg.value); å·¥ä½œé‡è¯æ˜æŒ–çŸ¿æŒ‡äº¤æ˜“å®Œæˆåï¼Œç¡®è®¤äº¤æ˜“å¹¶ä¸”æŠŠäº¤æ˜“è®°å½•å†™å…¥åŒºå—é“¾ä»è€Œè·å¾—ä¸€å®šçš„æ¯”ç‰¹å¸å¥–åŠ± å·¥ä½œé‡è¯æ˜ä¸ºäº†ä¿è¯ä¸€æ®µæ—¶é—´å†…åªæœ‰ä¸€ä¸ªäººå¯ä»¥æŒ–çŸ¿æˆåŠŸï¼Œéœ€è¦æé«˜æŒ–çŸ¿éš¾åº¦ è§£å†³è¿™äº›è¿ç®—éš¾é¢˜ä»è€Œè·å¾—æŒ–çŸ¿çš„æƒåˆ©å°±æ˜¯å·¥ä½œé‡è¯æ˜ æ‹œå åº­å°†å†›é—®é¢˜é—®é¢˜æè¿°å¦‚ä½•ä¿è¯ä¸å¯é ä¿¡é“ä¸Šçš„ä¿¡æ¯ä¸€è‡´æ€§ åŒºå—é“¾è§£å†³æ–¹æ¡ˆåŒºå—é“¾ä¸­ä½¿ç”¨â€œå·¥ä½œé‡è¯æ˜â€ä¿è¯åŒä¸€æ—¶é—´åªæœ‰ä¸€ä¸ªèŠ‚ç‚¹åœ¨å¹¿æ’­ï¼ŒåŒæ—¶é™„å¸¦è¯¥èŠ‚ç‚¹çš„ç­¾å è¿™æ ·åœ¨åŒä¸€æ—¶é—´æ‰€æœ‰èŠ‚ç‚¹éƒ½ä¼šå¾—åˆ°åŒæ ·çš„ä¿¡æ¯ å½“æœ‰å¤šæ¡ä¿¡æ¯éœ€è¦ä¸€è‡´æ—¶ï¼Œæ‰€æœ‰çš„èŠ‚ç‚¹éƒ½ä¼šæ£€æŸ¥æ˜¯å¦æ˜¯åœ¨ä¸Šä¸€æ¡æˆåŠŸä¿¡æ¯çš„åŸºç¡€ä¸Šä¼ è¾¾çš„ï¼Œä»è€Œä¿è¯æ¯ä¸ªèŠ‚ç‚¹ä¸Šçš„ä¿¡æ¯éƒ½æ˜¯æ­£ç¡®çš„","tags":[{"name":"Golang","slug":"Golang","permalink":"https://joker208.github.io/tags/Golang/"},{"name":"ä»¥å¤ªåŠ","slug":"ä»¥å¤ªåŠ","permalink":"https://joker208.github.io/tags/ä»¥å¤ªåŠ/"},{"name":"Solidity","slug":"Solidity","permalink":"https://joker208.github.io/tags/Solidity/"}]},{"title":"ä»¥å¤ªåŠå­¦ä¹ ç¬”è®°ï¼ˆå››ï¼‰","date":"2018-07-14T16:00:00.000Z","path":"2018/07/15/ä»¥å¤ªåŠå­¦ä¹ ç¬”è®°ï¼ˆå››ï¼‰/","text":"Solidityç»“æ„ä½“ï¼ˆStructsï¼‰ä½¿ç”¨structå®šä¹‰è‡ªå®šä¹‰ç±»å‹ï¼ˆå¼•ç”¨ç±»å‹ï¼‰ ä¸èƒ½å°†structè‡ªèº«ä½œä¸ºstructçš„æˆå‘˜ structçš„èµ‹å€¼å®é™…æ˜¯å¼•ç”¨çš„å¤åˆ¶ï¼Œä¿®æ”¹å±€éƒ¨å˜é‡æ—¶ä¼šå½±å“åˆ°åŸå˜é‡ æ˜ å°„ï¼ˆMappingsï¼‰æ˜ å°„ä¸èƒ½ä½¿ç”¨çš„ç±»å‹æœ‰ï¼š æ˜ å°„ å˜é•¿æ•°ç»„ åˆçº¦ æšä¸¾ ç»“æ„ä½“ æ˜ å°„æ˜¯ä¸€ä¸ªå“ˆå¸Œè¡¨ï¼Œæ˜ å°„ä¸­ä¸å­˜å‚¨æ•°æ®ï¼Œæ˜ å°„æ²¡æœ‰é•¿åº¦æ¦‚å¿µ è´§å¸å•ä½ï¼ˆEther Unitsï¼‰æ•°å­—å¸¸é‡åŠ åç¼€ï¼ˆwei,finney,szabo,etherï¼‰ é»˜è®¤å•ä½ä¸ºwei ä¸åŒä»¥å¤ªå¸å•ä½è½¬æ¢ï¼š 1 ether == 10^3 finney 1 ether == 10^6 szabo 1 ether == 10^18 wei æ—¶é—´å•ä½ï¼ˆTime Unitsï¼‰æ—¶é—´å•ä½æœ‰seconds, minutes, hours, days, weeks, years é»˜è®¤å•ä½ä¸ºseconds ä¸åŒæ—¶é—´å•ä½è½¬æ¢ï¼š 1 weeks = 7 days 1 years = 365 days Solidity API block.blockhash(uint blockNumber) è¿”å›å¯¹åº”åŒºå—å·çš„å“ˆå¸Œå€¼ block.coinbase è¿”å›å½“å‰åŒºå—çš„çŸ¿å·¥åœ°å€ block.difficulty è¿”å›å½“å‰åŒºå—çš„éš¾åº¦å€¼ block.gaslimit è¿”å›å½“å‰åŒºå—çš„gaslimit block.number è¿”å›å½“å‰åŒºå—çš„åŒºå—å· block.timestamp å½“å‰åŒºå—çš„æ—¶é—´æˆ³ msg.data è¿”å›å®Œæ•´çš„è°ƒç”¨æ•°æ® msg.gas è¿”å›å‰©ä½™çš„gas msg.sender è¿”å›è½¬è´¦äººçš„åœ°å€ msg.sig è¿”å›è°ƒç”¨æ•°æ®çš„å‰å››ä¸ªå­—èŠ‚ msg.value è¿”å›æ¶ˆæ¯é™„å¸¦çš„ä»¥å¤ªå¸æ•°é‡ tx.gasprice è¿”å›äº¤æ˜“æ‰€éœ€è¦çš„gas tx.origin è¿”å›äº¤æ˜“çš„å‘èµ·äººçš„åœ°å€","tags":[{"name":"Golang","slug":"Golang","permalink":"https://joker208.github.io/tags/Golang/"},{"name":"ä»¥å¤ªåŠ","slug":"ä»¥å¤ªåŠ","permalink":"https://joker208.github.io/tags/ä»¥å¤ªåŠ/"},{"name":"Solidity","slug":"Solidity","permalink":"https://joker208.github.io/tags/Solidity/"}]},{"title":"ä»¥å¤ªåŠå­¦ä¹ ç¬”è®°ï¼ˆä¸‰ï¼‰","date":"2018-07-13T16:00:00.000Z","path":"2018/07/14/ä»¥å¤ªåŠå­¦ä¹ ç¬”è®°ï¼ˆä¸‰ï¼‰/","text":"Solidityç±»å‹ å€¼ç±»å‹ å¸ƒå°”ç±»å‹ æ•´å‹ï¼šuintå¯¹åº”uint256 intå¯¹åº”int256 å®šé•¿æµ®ç‚¹å‹ï¼šufixedMxN ufixedMxNï¼ˆMè¡¨ç¤ºå ç”¨ä½æ•°ï¼ŒNä¾¿æ˜¯å°æ•°ä½æ•°ï¼‰ å®šé•¿å­—èŠ‚æ•°ç»„ï¼šbyteå¯¹åº”bytes1 bytes32 *å˜é•¿å­—èŠ‚æ•°ç»„ï¼šbytes string (ä¸æ˜¯å€¼ç±»å‹) æœ‰ç†æ•°å’Œæ•´å‹å¸¸é‡ï¼š (æ”¯æŒç§‘å­¦è®¡æ•°æ³•,å¦‚2e2) å­—ç¬¦ä¸²å¸¸é‡ï¼šï¼ˆæ”¯æŒè½¬ä¹‰å­—ç¬¦ï¼‰ åå…­è¿›åˆ¶å¸¸é‡ï¼šå…³é”®å­—hex+å•æˆ–åŒå¼•å·å­—ç¬¦ä¸²ï¼Œå¦‚hexâ€000000ffâ€ æšä¸¾ç±»å‹ï¼šæšä¸¾ç±»å‹éœ€è¦è‡³å°‘ä¸€åæˆå‘˜ å‡½æ•°ç±»å‹ åœ°å€ç±»å‹ åœ°å€å¸¸é‡ åœ°å€ç±»å‹20å­—èŠ‚ï¼ˆä»¥å¤ªåŠåœ°å€é•¿åº¦ï¼‰ æ”¯æŒæ¯”è¾ƒè¿ç®—ç¬¦ åœ°å€ç±»å‹æˆå‘˜ balanceå±æ€§ï¼šæŸ¥è¯¢è´¦æˆ·ä½™é¢ transfer()å‡½æ•°ï¼šè½¬è´¦ï¼Œå¤±è´¥æŠ¥é”™ï¼Œæ›´åŠ å®‰å…¨ send()å‡½æ•°ï¼šè½¬è´¦ï¼Œå¤±è´¥è¿”å›falseï¼Œç”¨äºå¤±è´¥æ—¶æ“ä½œ call()å‡½æ•°ï¼šåº•å±‚æ¥å£ï¼Œå‘ç›®æ ‡åˆçº¦å‘é€æ¶ˆæ¯ï¼Œè¿”å›boolå€¼ å¯ä»¥åŠ ä¿®é¥°å™¨ gas()ï¼šä½¿ç”¨gasé‡ value()ï¼šé™„å¸¦ä»¥å¤ªå¸ delegatecall()å‡½æ•°ï¼šä»£ç æ‰§è¡Œæ—¶å…¶å®ƒæ•°æ®éƒ½æ˜¯å½“å‰åˆçº¦æ•°æ®ï¼Œæ²¡æœ‰è®¾ç½®å‚æ•°çš„åŠŸèƒ½ åœ°å€å¸¸é‡åå…­è¿›åˆ¶å¸¸é‡ é€šè¿‡åˆæ³•æ€§æ£€æŸ¥ å‡½æ•°ç±»å‹ public æ‰€æœ‰å¯ä»¥è®¿é—® pricate åˆçº¦å†…å¯ä»¥è®¿é—® internal å½“å‰åˆçº¦å’Œç»§æ‰¿åˆçº¦å¯ä»¥è®¿é—® external åˆçº¦ä»¥å¤–å¯ä»¥è®¿é—® æ•°æ®å­˜å‚¨ä½ç½®æ•°æ®å­˜å‚¨ä½ç½®æœ‰ä¸‰ç§ï¼š * memeoryï¼šå†…å­˜ä¸­ï¼Œæš‚æ—¶å­˜å‚¨ï¼Œåˆçº¦è¿è¡Œæ—¶åˆ›å»ºï¼Œgasæ¶ˆè€—é‡å° * storageï¼šåŒºå—é“¾ä¸­ï¼Œæ°¸ä¹…å­˜å‚¨ï¼Œåœ¨åˆçº¦åˆ›å»ºä¹‹å‰åˆ›å»ºï¼Œgasæ¶ˆè€—é‡å¤§ * calldataï¼šä¸“é—¨ç”¨æ¥å­˜å‚¨å‡½æ•°å‚æ•°ï¼Œæš‚æ—¶å­˜å‚¨ å¼ºåˆ¶æ•°æ®ä½ç½® å¤–éƒ¨å‡½æ•°external functionçš„å‚æ•°å¼ºåˆ¶å­˜åœ¨calldataä¸­ çŠ¶æ€å‚æ•°å¼ºåˆ¶å­˜åœ¨storage é»˜è®¤æ•°æ®ä½ç½® é™¤å¤–éƒ¨å‡½æ•°å¤–çš„å…¶ä»–å‡½æ•°å‚æ•°é»˜è®¤å­˜åœ¨memoryä¸­ å¤æ‚ç±»å‹ï¼ˆå¼•ç”¨ç±»å‹ï¼‰çš„å˜é‡é»˜è®¤å­˜åœ¨storageä¸­ æ•°ç»„å¯ä»¥å£°æ˜å®šé•¿æ•°ç»„ä¹Ÿå¯ä»¥å£°æ˜å˜é•¿æ•°ç»„ å®šé•¿å’Œå˜é•¿æ•°ç»„ä¸èƒ½éšå¼è½¬æ¢ æˆå‘˜ lengthå±æ€§:å˜é•¿æ•°ç»„ä¸æ”¯æŒ pushæ–¹æ³•ï¼šå˜é•¿æ•°ç»„æ·»åŠ æ–°å…ƒç´ ","tags":[{"name":"Golang","slug":"Golang","permalink":"https://joker208.github.io/tags/Golang/"},{"name":"ä»¥å¤ªåŠ","slug":"ä»¥å¤ªåŠ","permalink":"https://joker208.github.io/tags/ä»¥å¤ªåŠ/"},{"name":"Solidity","slug":"Solidity","permalink":"https://joker208.github.io/tags/Solidity/"}]},{"title":"ä»¥å¤ªåŠå­¦ä¹ ç¬”è®°ï¼ˆäºŒï¼‰","date":"2018-07-12T16:00:00.000Z","path":"2018/07/13/ä»¥å¤ªåŠå­¦ä¹ ç¬”è®°ï¼ˆäºŒï¼‰/","text":"ä»¥å¤ªåŠä»£å¸å®šä¹‰ä»¥å¤ªåŠä»£å¸æ˜¯ç”¨ä»¥å¤ªåŠæ™ºèƒ½åˆçº¦ç¼–å†™çš„æ•°å­—è´§å¸ï¼Œå¯ä»¥é€šè¿‡æ–°çš„æ™ºèƒ½åˆçº¦åˆ›å»ºæ–°çš„ä»£å¸ åŠŸèƒ½æ–°çš„ä»£å¸å¯ä»¥å®ç°ä»¥ä¸‹åŠŸèƒ½ æ–°çš„ä»£å¸åç§°ã€ä»£å¸æ€»é‡ç­‰å‚æ•° åŸºæœ¬äº¤æ˜“åŠŸèƒ½ å®ç°åˆçº¦ç®¡ç†è€… é»‘ç™½åå• ä»£å¸å¢å‘ æŒ–çŸ¿æœºåˆ¶ æ–°çš„ä»£å¸ä¸å…¶ä»–æ•°å­—è´§å¸çš„å…‘æ¢ gasçš„è‡ªåŠ¨è¡¥å…… å¸¸ç”¨ç»„ä»¶ Gethï¼šä»¥å¤ªåŠå®˜æ–¹å®¢æˆ·ç«¯ï¼Œç”¨goç¼–å†™ Solidityï¼šé’ˆå¯¹åˆçº¦ç¼–å†™çš„é«˜çº§è¯­è¨€ Truffleï¼šå¼€å‘ä»¥å¤ªåŠDappçš„æ¡†æ¶ Web3.jsï¼šç”¨æ¥åšèŠ‚ç‚¹äº¤äº’çš„jsåº“ Remixï¼šä»¥å¤ªåŠæ™ºèƒ½åˆçº¦å¼€å‘ç”¨çš„IDE Ganacheï¼šå¯è§†åŒ–ç§æœ‰é“¾å®¢æˆ·ç«¯ DAppå®ç°ï¼ˆPet-Shopï¼‰å¼€å‘ç¯å¢ƒå®‰è£…truffle npm install -g truffle truffle version å¦‚æœæœ‰å‡ºç° Truffle v4.1.12 (core: 4.1.12) Solidity v0.4.24 (solc-js) è¯´æ˜truffleå®‰è£…æˆåŠŸ ä¸‹è½½ä»£ç åˆ›å»ºä¸€ä¸ªæ–°æ–‡ä»¶å¤¹ æ‰§è¡Œä»¥ä¸‹ä»£ç  truffle unbox pet-shop æ–°å»ºåˆçº¦åœ¨contractsæ–‡ä»¶å¤¹ä¸‹æ–°å»ºAdoption.sol pragma solidity ^0.4.17; contract Adoption { address[16] public adopters; // ä¿å­˜é¢†å…»è€…çš„åœ°å€ // é¢†å…»å® ç‰© function adopt(uint petId) public returns (uint) { require(petId &gt;= 0 &amp;&amp; petId &lt;= 15); // ç¡®ä¿idåœ¨æ•°ç»„é•¿åº¦å†… adopters[petId] = msg.sender; // ä¿å­˜è°ƒç”¨è¿™åœ°å€ return petId; } // è¿”å›é¢†å…»è€… function getAdopters() public view returns (address[16]) { return adopters; } } ç¼–è¯‘åˆçº¦æ ¹ç›®å½•ä¸‹æ‰§è¡Œä»¥ä¸‹ä»£ç ç¼–è¯‘åˆçº¦ truffle compile éƒ¨ç½²è„šæœ¬åœ¨migrationsæ–‡ä»¶å¤¹ä¸‹åˆ›å»º2_deploy_contracts.js var Adoption = artifacts.require(&quot;Adoption&quot;); module.exports = function(deployer) { deployer.deploy(Adoption); }; éƒ¨ç½²å‰ä½¿ç”¨Ganacheå¼€å¯ä¸€ä¸ªç§é“¾ï¼Œé»˜è®¤ç«¯å£ä¸º7545 æ‰§è¡Œéƒ¨ç½²å‘½ä»¤ truffle migrate Ganacheä¸­çœ‹åˆ°åŒºå—é“¾çŠ¶æ€å‘ç”Ÿå˜åŒ–ï¼Œè¯´æ˜æ™ºèƒ½åˆçº¦éƒ¨ç½²å®Œæˆ æµ‹è¯•testæ–‡ä»¶å¤¹ä¸‹æ–°å»ºTestAdoption.sol pragma solidity ^0.4.17; import &quot;truffle/Assert.sol&quot;; // å¼•å…¥çš„æ–­è¨€ import &quot;truffle/DeployedAddresses.sol&quot;; // ç”¨æ¥è·å–è¢«æµ‹è¯•åˆçº¦çš„åœ°å€ import &quot;../contracts/Adoption.sol&quot;; // è¢«æµ‹è¯•åˆçº¦ contract TestAdoption { Adoption adoption = Adoption(DeployedAddresses.Adoption()); // é¢†å…»æµ‹è¯•ç”¨ä¾‹ function testUserCanAdoptPet() public { uint returnedId = adoption.adopt(8); uint expected = 8; Assert.equal(returnedId, expected, &quot;Adoption of pet ID 8 should be recorded.&quot;); } // å® ç‰©æ‰€æœ‰è€…æµ‹è¯•ç”¨ä¾‹ function testGetAdopterAddressByPetId() public { // æœŸæœ›é¢†å…»è€…çš„åœ°å€å°±æ˜¯æœ¬åˆçº¦åœ°å€ï¼Œå› ä¸ºäº¤æ˜“æ˜¯ç”±æµ‹è¯•åˆçº¦å‘èµ·äº¤æ˜“ï¼Œ address expected = this; address adopter = adoption.adopters(8); Assert.equal(adopter, expected, &quot;Owner of pet ID 8 should be recorded.&quot;); } // æµ‹è¯•æ‰€æœ‰é¢†å…»è€… function testGetAdopterAddressByPetIdInArray() public { // é¢†å…»è€…çš„åœ°å€å°±æ˜¯æœ¬åˆçº¦åœ°å€ address expected = this; address[16] memory adopters = adoption.getAdopters(); Assert.equal(adopters[8], expected, &quot;Owner of pet ID 8 should be recorded.&quot;); } } æ‰§è¡Œæµ‹è¯•å‘½ä»¤ truffle test åˆå§‹åŒ–web3src/jsæ–‡ä»¶å¤¹ä¸‹ç¼–è¾‘app.jsä¿®æ”¹initWeb3() initWeb3: function() { // Is there an injected web3 instance? if (typeof web3 !== &apos;undefined&apos;) { App.web3Provider = web3.currentProvider; } else { // If no injected web3 instance is detected, fall back to Ganache App.web3Provider = new Web3.providers.HttpProvider(&apos;http://localhost:7545&apos;); } web3 = new Web3(App.web3Provider); return App.initContract(); } å®ä¾‹åŒ–åˆçº¦ä¿®æ”¹initContract() initContract: function() { // åŠ è½½Adoption.jsonï¼Œä¿å­˜äº†Adoptionçš„ABIï¼ˆæ¥å£è¯´æ˜ï¼‰ä¿¡æ¯åŠéƒ¨ç½²åçš„ç½‘ç»œ(åœ°å€)ä¿¡æ¯ï¼Œå®ƒåœ¨ç¼–è¯‘åˆçº¦çš„æ—¶å€™ç”ŸæˆABIï¼Œåœ¨éƒ¨ç½²çš„æ—¶å€™è¿½åŠ ç½‘ç»œä¿¡æ¯ $.getJSON(&apos;Adoption.json&apos;, function(data) { // ç”¨Adoption.jsonæ•°æ®åˆ›å»ºä¸€ä¸ªå¯äº¤äº’çš„TruffleContractåˆçº¦å®ä¾‹ã€‚ var AdoptionArtifact = data; App.contracts.Adoption = TruffleContract(AdoptionArtifact); // Set the provider for our contract App.contracts.Adoption.setProvider(App.web3Provider); // Use our contract to retrieve and mark the adopted pets return App.markAdopted(); }); return App.bindEvents(); } ä¿®æ”¹markAdopted() markAdopted: function(adopters, account) { var adoptionInstance; App.contracts.Adoption.deployed().then(function(instance) { adoptionInstance = instance; // è°ƒç”¨åˆçº¦çš„getAdopters(), ç”¨callè¯»å–ä¿¡æ¯ä¸ç”¨æ¶ˆè€—gas return adoptionInstance.getAdopters.call(); }).then(function(adopters) { for (i = 0; i &lt; adopters.length; i++) { if (adopters[i] !== &apos;0x0000000000000000000000000000000000000000&apos;) { $(&apos;.panel-pet&apos;).eq(i).find(&apos;button&apos;).text(&apos;Success&apos;).attr(&apos;disabled&apos;, true); } } }).catch(function(err) { console.log(err.message); }); } ä¿®æ”¹handleAdopt() handleAdopt: function(event) { event.preventDefault(); var petId = parseInt($(event.target).data(&apos;id&apos;)); var adoptionInstance; // è·å–ç”¨æˆ·è´¦å· web3.eth.getAccounts(function(error, accounts) { if (error) { console.log(error); } var account = accounts[0]; App.contracts.Adoption.deployed().then(function(instance) { adoptionInstance = instance; // å‘é€äº¤æ˜“é¢†å…»å® ç‰© return adoptionInstance.adopt(petId, {from: account}); }).then(function(result) { return App.markAdopted(); }).catch(function(err) { console.log(err.message); }); }); } MetaMaské…ç½®é’±åŒ…ç‚¹å‡»Import Existing DEN candy maple cake sugar pudding cream honey rich smooth crumble sweet treat å¹¶è®¾ç½®å¯†ç  è¿æ¥ç½‘ç»œé€‰æ‹©Custom RPCï¼Œæ·»åŠ http://127.0.0.1:7545 å¯åŠ¨æœåŠ¡1npm run dev","tags":[{"name":"Golang","slug":"Golang","permalink":"https://joker208.github.io/tags/Golang/"},{"name":"ä»¥å¤ªåŠ","slug":"ä»¥å¤ªåŠ","permalink":"https://joker208.github.io/tags/ä»¥å¤ªåŠ/"}]},{"title":"ä»¥å¤ªåŠå­¦ä¹ ç¬”è®°ï¼ˆä¸€ï¼‰","date":"2018-07-11T16:00:00.000Z","path":"2018/07/12/ä»¥å¤ªåŠå­¦ä¹ ç¬”è®°ï¼ˆä¸€ï¼‰/","text":"ä»¥å¤ªåŠå¼€å‘åˆ†å¸ƒå¼APPï¼ˆDAppï¼‰åˆ†å¸ƒå¼appæ˜¯æŒ‡å®¢æˆ·ç«¯ä¸ºç”¨æˆ·ç›´æ¥æä¾›æœåŠ¡ï¼ŒæœåŠ¡ç«¯è¿è¡Œåœ¨ä»¥å¤ªåŠç½‘ç»œä¸Šçš„æ™ºèƒ½åˆçº¦ DAppå®¢æˆ·ç«¯åˆ†å¸ƒå¼åº”ç”¨çš„å®¢æˆ·ç«¯å¤šä¸ºç®€å•æ˜“ç”¨çš„å›¾å½¢åŒ–ç•Œé¢è€Œéå‘½ä»¤è¡Œï¼Œå®ƒä¸ä¼ ç»Ÿçš„appçš„åŒºåˆ«æ˜¯ä¸ä»¥å¤ªåŠçš„åŒºå—é“¾äº¤äº’ DAppæµè§ˆå™¨ä¸»è¦ç›®çš„ æä¾›åˆ°ä»¥å¤ªåŠèŠ‚ç‚¹çš„è¿æ¥ï¼Œå¯ä»¥åˆ‡æ¢ä¸åŒèŠ‚ç‚¹ æä¾›ä¸€ä¸ªè´¦æˆ·å¸®åŠ©ç”¨æˆ·ä¸æœåŠ¡ç«¯äº¤äº’ Mist ä»¥å¤ªåŠå®˜æ–¹DAppæµè§ˆå™¨ Status ç§»åŠ¨ç«¯DAppæµè§ˆå™¨ MetaMask Googleæµè§ˆå™¨æ‰©å±• ä»¥å¤ªåŠèŠ‚ç‚¹æ¯ä¸ªèŠ‚ç‚¹éƒ½åŒ…å«æ‰€æœ‰åŒºå—é“¾çš„å†…å®¹ï¼Œå¯ä»¥ä½¿ç”¨gethæ¥è¿è¡Œå…¨èŠ‚ç‚¹ï¼ˆgethæ˜¯goè¯­è¨€ç¼–å†™çš„ä»¥å¤ªåŠå®¢æˆ·ç«¯ï¼‰ ä»¥å¤ªåŠä»£å¸ä»¥mapé”®å€¼å¯¹çš„å½¢å¼å­˜å‚¨åœ¨åŒºå—é“¾çš„çŠ¶æ€é‡Œï¼Œå…¶ä¸­é”®æ˜¯åœ°å€ï¼Œå€¼å°±æ˜¯ä½™é¢ï¼Œä»£å¸ç»å¸¸ç”¨æ¥é¼“åŠ±ç”¨æˆ·ä¹‹é—´äº¤äº’ï¼Œæˆ–è€…è¯æ˜å¯¹èµ„äº§çš„æ‰€æœ‰æƒ Truffleå’ŒEmbark Truffleæ˜¯ä½¿ç”¨ä»¥å¤ªåŠSolidityè¯­è¨€å¼€å‘çš„ä¸€å¥—æ¡†æ¶ï¼Œé›†æˆå®¢æˆ·ç«¯å‘½ä»¤ï¼Œæä¾›é¡¹ç›®æ„å»ºæœºåˆ¶ï¼ŒæŠ½è±¡åˆçº¦æ¥å£ï¼Œæä¾›äº†æ§åˆ¶å° Embarkæ˜“äºä¸Šæ‰‹ï¼Œæä¾›äº†è®¸å¤šä¾¿æ·çš„åŠŸèƒ½ Truffle å®‰è£… $ npm install -g truffle Truffleå®¢æˆ·ç«¯ å»ºè®®åœ¨å¼€å‘å’Œæ­£å¼å‘å¸ƒæ—¶ä½¿ç”¨ä¸åŒçš„å®¢æˆ·ç«¯å¼€å‘æ—¶æ¨èä½¿ç”¨EthereumJS TestRPCæ­£å¼å‘å¸ƒæ—¶æ¨èä½¿ç”¨Geth åˆ›å»ºå·¥ç¨‹ $ Truffle v3.4.11 - a development framework for Ethereum $ truffle init ç”Ÿæˆçš„ç›®å½•ç»“æ„ contract/ å­˜æ”¾Truffleåˆçº¦æ–‡ä»¶ migrations/ å­˜æ”¾è„šæœ¬æ–‡ä»¶ test/ å­˜æ”¾æµ‹è¯•æ–‡ä»¶ truffle.js Truffleçš„é…ç½®æ–‡ä»¶ truffle-config.js åŒä¸Šé¢æ–‡ä»¶å†…å®¹ç›¸åŒ ç¼–è¯‘åˆçº¦ $ truffle compile Truffleä¼šé»˜è®¤ç¼–è¯‘ä¸Šä¸€æ¬¡è¢«ä¿®æ”¹è¿‡çš„æ–‡ä»¶ ç§»æ¤ $ truffle migrate ç§»æ¤ä¸»è¦æ˜¯ç”¨æ¥ç¼“å­˜å‘å¸ƒä»»åŠ¡ï¼Œç±»ä¼¼äºå®¢æˆ·ç«¯å’ŒåŒºå—é“¾ä¹‹é—´çš„ç¼“å­˜åŒº æ„å»ºåº”ç”¨ $ truffle build ETHPMETHPMæ˜¯ä¸€ä¸ªæ™ºèƒ½åˆçº¦çš„èµ„æºç®¡ç†åº“ï¼Œå¯ä»¥åˆ©ç”¨å®ƒè¿æ¥åˆ°å…¶å®ƒåˆçº¦ï¼ŒåŒæ—¶å¯ä»¥ä¸ä»¥ä¸Šä¸¤ç§æ¡†æ¶ç»“åˆï¼Œæ˜¯å¼€å‘æ›´åŠ ä¾¿åˆ© ç½‘ç»œMainnetï¼šä»¥å¤ªåŠä¸»ç½‘ï¼Ÿï¼Ÿ Ropsten ï¼šä»¥å¤ªåŠä½¿ç”¨å·¥ä½œé‡è¯æ˜çš„ä¸»æµ‹è¯•ç½‘ç»œ Kovanï¼šparityå®¢æˆ·ç«¯ç»„æˆçš„æµ‹è¯•ç½‘ç»œ Rinkeby:gethå®¢æˆ·ç«¯ç»„æˆçš„æµ‹è¯•ç½‘ç»œ","tags":[{"name":"Golang","slug":"Golang","permalink":"https://joker208.github.io/tags/Golang/"},{"name":"ä»¥å¤ªåŠ","slug":"ä»¥å¤ªåŠ","permalink":"https://joker208.github.io/tags/ä»¥å¤ªåŠ/"}]},{"title":"åŒºå—é“¾å­¦ä¹ ç¬”è®°ï¼ˆä¸€ï¼‰","date":"2018-07-10T16:00:00.000Z","path":"2018/07/11/åŒºå—é“¾å­¦ä¹ ç¬”è®°ï¼ˆä¸€ï¼‰/","text":"åŒºå—é“¾å®šä¹‰ åŒºå—é“¾å°±æ˜¯é€šè¿‡å¯†ç å­¦çš„æ–¹å¼å½¢æˆçš„ä¸€ä¸ªç”±é›†ä½“ç»´æŠ¤çš„åˆ†å¸ƒå¼æ•°æ®åº“ã€‚ ç‰¹æ€§ å»ä¸­å¿ƒåŒ– å®‰å…¨æ€§ å»ä¿¡ä»» åŒºå—ç»“æ„ åŒºå—é«˜åº¦ï¼šåŒºå—ID å¤´å“ˆå¸Œï¼šè¯¥åŒºå—çš„å”¯ä¸€å“ˆå¸Œå€¼ çˆ¶å“ˆå¸Œï¼šä¸Šä¸€ä¸ªåŒºå—çš„å“ˆå¸Œå€¼ æ—¶é—´æˆ³ merkleæ ¹ï¼šç”±æ¯ç¬”äº¤æ˜“çš„å“ˆå¸Œå€¼è®¡ç®—å¾—å‡ºï¼Œç¡®ä¿æ¯ä¸€ç¬”äº¤æ˜“çœŸå®å”¯ä¸€ éš¾åº¦ï¼šè¯¥åŒºå—çš„è®¡ç®—éš¾åº¦ï¼Œæ ¹æ®ç°æœ‰ç®—åŠ›è‡ªåŠ¨è°ƒèŠ‚ Nonceï¼šåªè¢«ä½¿ç”¨ä¸€æ¬¡çš„éé‡å¤éšæœºå€¼ åŒºå—ä½“ï¼šä¸€å®šæ—¶é—´ç”Ÿæˆçš„äº¤æ˜“ä¿¡æ¯ åŒºå—é“¾1.0-æ•°å­—è´§å¸æ¯”ç‰¹å¸äº¤æ˜“ æ¯ä¸€ä¸ªåœ°å€éƒ½æœ‰å¯¹åº”çš„æ¯”ç‰¹å¸ä¸ªæ•°ï¼Œäº¤æ˜“å¼€å§‹æ—¶ç”±æ”¶æ¬¾æ–¹åˆ›å»ºä¸€ä¸ªæ–°åœ°å€ï¼Œä»˜æ¬¾æ–¹å‘è¿™ä¸ªåœ°å€å‘èµ·ä»˜æ¬¾ï¼Œå®¢æˆ·ç«¯ä¼šä½¿ç”¨æ–°åœ°å€çš„ç§é’¥å¯¹è¿™ä¸ªäº¤æ˜“ç”³è¯·è¿›è¡Œç­¾åï¼Œä»»ä½•äººå¯ä»¥ä½¿ç”¨å¯¹åº”çš„å…¬é’¥å¯¹äº¤æ˜“ç”³è¯·è¿›è¡ŒéªŒè¯ã€‚çŸ¿å·¥å°†è¿‡å»ä¸€æ®µæ—¶é—´çš„äº¤æ˜“æ•°æ®æ‰“åŒ…ï¼Œé€šè¿‡å“ˆå¸Œç®—æ³•åŸºäºå‰ä¸€ä¸ªå“ˆå¸Œå€¼ã€æ–°äº¤æ˜“æ•°æ®ã€éšæœºæ•°çš„ç»„åˆæ‰¾åˆ°ä¸€ä¸ªç¬¦åˆè§„åˆ™çš„æ–°çš„å“ˆå¸Œå€¼ï¼Œè¿™æ—¶å¯ä»¥è®¤ä¸ºæ–°çš„åŒºå—è¢«ç¡®è®¤ï¼Œäº¤æ˜“ç”Ÿæ•ˆï¼Œè€ŒçŸ¿å·¥ä¼šå¾—åˆ°ä¸€å®šæŠ¥é…¬ã€‚ æ¯”ç‰¹å¸ç½‘ç»œ æ¯”ç‰¹å¸ç½‘ç»œæ˜¯ä¸€ç§ç‚¹å¯¹ç‚¹çš„æ•°å­—ç°é‡‘ç³»ç»Ÿï¼ˆP2Pï¼‰ p2p(Peer to Peer)å¯¹ç­‰ç½‘ç»œï¼Œç½‘ç»œçš„å‚ä¸è€…å…±äº«è‡ªå·±çš„ä¸€éƒ¨åˆ†èµ„æºï¼Œè¿™äº›èµ„æºåœ¨ç½‘ç»œä¸Šå¯ä»¥ç›´æ¥è¢«å…¶å®ƒå‚ä¸è€…è®¿é—®ä½¿ç”¨ã€‚ç½‘ç»œä¸Šæ‰€æœ‰çš„å‚ä¸è€…æ—¢æ˜¯æä¾›è€…ï¼ˆServerï¼‰ï¼Œåˆæ˜¯è·å–è€…ï¼ˆClientï¼‰ã€‚ ç½‘ç»œèŠ‚ç‚¹å…¨åŠŸèƒ½èŠ‚ç‚¹åŒ…æ‹¬å››ä¸ªæ¨¡å— é’±åŒ…ï¼ˆWalletï¼‰ï¼šæ”¯æŒæ¯”ç‰¹å¸äº¤æ˜“æŸ¥è¯¢ çŸ¿å·¥ï¼ˆMinerï¼‰ï¼šé€šè¿‡å“ˆå¸Œè¿ç®—çš„æ–¹å¼ç«äº‰è·å¾—æ–°åŒºå— å®Œæ•´åŒºå—é“¾ï¼ˆfull Block-chain databaseï¼‰ï¼šå…¨èŠ‚ç‚¹ï¼Œå¯ä»¥ç‹¬ç«‹éªŒè¯æ‰€æœ‰äº¤æ˜“ ç½‘ç»œè·¯ç”±èŠ‚ç‚¹ï¼ˆNetwork routingï¼‰ï¼šè½¬å‘äº¤æ˜“å’ŒåŒºå—ä¿¡æ¯ï¼Œç›‘å¬ç»´æŠ¤èŠ‚ç‚¹çš„é“¾æ¥ åŒºå—é“¾2.0-å¯ç¼–ç¨‹é‡‘èä»¥å¤ªåŠ æ™ºèƒ½åˆçº¦ï¼šæ˜¯è¿è¡Œåœ¨evmä¸­çš„åº”ç”¨ï¼Œé€šè¿‡æ¥å—äº¤æ˜“è¯·æ±‚ç”Ÿæˆæ–°çš„äº¤æ˜“ï¼Œæˆ–è€…è°ƒç”¨å…¶å®ƒåˆçº¦ã€‚æ™ºèƒ½åˆçº¦çš„æ‰§è¡Œå¯èƒ½ä¼šæ›´æ–°ä»¥å¤ªåŠç½‘ç»œä¸Šçš„è´¦æœ¬çŠ¶æ€ è´¦æˆ·ï¼šä»¥å¤ªåŠè´¦æˆ·åˆ†ä¸ºåˆçº¦è´¦æˆ·(CA)å’Œå¤–éƒ¨è´¦æˆ·ï¼ˆEOAï¼‰ã€‚åˆçº¦è´¦æˆ·ç”¨æ¥å­˜å‚¨æ™ºèƒ½åˆçº¦ä»£ç ï¼Œå¤–éƒ¨è´¦æˆ·æ˜¯ä»¥å¤ªå¸æ‹¥æœ‰è€…çš„è´¦æˆ·ï¼Œç”¨æ¥è°ƒç”¨åˆçº¦è´¦æˆ· äº¤æ˜“ï¼šä»¥å¤ªåŠä¸­æŒ‡ä¸åŒè´¦æˆ·é—´çš„æ¶ˆæ¯æ•°æ®ï¼Œæ˜¯æ‰§è¡Œæ“ä½œçš„æœ€å°å•ä½ï¼Œå¯ä»¥æ˜¯ä»¥å¤ªå¸ä¹Ÿå¯ä»¥æ˜¯æ‰§è¡Œå‚æ•°ï¼Œäº¤æ˜“åŒ…æ‹¬ä»¥ä¸‹å­—æ®µ toï¼šç›®æ ‡åœ°å€ valueï¼šä»¥å¤ªå¸æ•°é‡ nonceï¼š1.å·¥ä½œé‡è¯æ˜ 2.è´¦æˆ·éšæœºæ•° gasPriceï¼šæ¯ä¸€è®¡ç®—æ­¥éª¤éœ€è¦æ”¯ä»˜çŸ¿å·¥çš„è´¹ç”¨ startgasï¼šæœ€å¤§Gaså€¼ signatureï¼šç­¾å ä»¥å¤ªå¸ï¼šä»¥å¤ªåŠçš„è´§å¸ï¼Œç”¨äºè´­ä¹°ç‡ƒæ–™ ç‡ƒæ–™ï¼šæ‰§è¡Œåˆçº¦æŒ‡ä»¤ä¼šæ¶ˆè€—ç‡ƒæ–™ï¼Œç‡ƒæ–™æ˜¯äº¤æ˜“æ‰§è¡ŒæŒ‡ä»¤çš„ä¸Šé™ï¼Œå½“ç‡ƒæ–™ç”¨å®ŒæŒ‡ä»¤æ²¡æœ‰æ‰§è¡Œå®Œæ˜¯ï¼Œåˆçº¦ç»ˆæ­¢çŠ¶æ€å›æ»š","tags":[{"name":"Golang","slug":"Golang","permalink":"https://joker208.github.io/tags/Golang/"},{"name":"åŒºå—é“¾","slug":"åŒºå—é“¾","permalink":"https://joker208.github.io/tags/åŒºå—é“¾/"}]},{"title":"åŒºå—é“¾å­¦ä¹ ç¬”è®°ï¼ˆäºŒï¼‰","date":"2018-07-10T16:00:00.000Z","path":"2018/07/11/åŒºå—é“¾å­¦ä¹ ç¬”è®°ï¼ˆäºŒï¼‰/","text":"åŒºå—é“¾æ¶æ„åŒºå—é“¾æŠ€æœ¯ä¸»è¦åŒ…å«å››ä¸ªæ–¹é¢ï¼š ç‚¹å¯¹ç‚¹ç½‘ç»œè®¾è®¡ åŠ å¯†æŠ€æœ¯åº”ç”¨ åˆ†å¸ƒå¼ç®—æ³• æ•°æ®å­˜å‚¨æŠ€æœ¯ æ¶æ„å±‚æ¬¡ åè®®å±‚ï¼šæ˜¯æ•´ä¸ªåŒºå—é“¾çš„æ ¸å¿ƒï¼Œå®ƒåŒ…æ‹¬äº†ä¸€ä¸ªå®Œæ•´çš„ç½‘ç»œå¸äº§å“ï¼ŒåŠŸèƒ½ä¸»è¦æ˜¯å»ºç«‹ç½‘ç»œã€äº¤æ˜“é€šé“ã€èŠ‚ç‚¹å¥–åŠ±ï¼Œæ¶‰åŠåˆ°çš„æŠ€æœ¯ä¸»è¦æœ‰ç½‘ç»œç¼–ç¨‹ã€åˆ†å¸ƒå¼ç®—æ³•ã€åŠ å¯†ç­¾åã€æ•°æ®å­˜å‚¨ç­‰ æ‰©å±•å±‚ï¼šæ˜¯å¯¹åè®®å±‚çš„ç½‘ç»œå¸åŠ ä»¥ä½¿ç”¨ï¼Œä¸»è¦åˆ†ä¸ºæ³•å¸ä¸ç½‘ç»œå¸çš„ç›´æ¥äº¤æ˜“ï¼ˆå„ç±»äº¤æ˜“æ‰€ï¼‰å’Œå…¶ä»–æ–¹å‘çš„æ‰©å±•ï¼ˆæ™ºèƒ½åˆçº¦ï¼‰ä¸¤ç±» åº”ç”¨å±‚ï¼šæ˜¯é’ˆå¯¹å®é™…ç”¨æˆ·çš„å±‚é¢ï¼Œç°åœ¨ä¸»è¦æ˜¯å„ç±»è½»é’±åŒ…å®¢æˆ·ç«¯ï¼Œæ˜¯æœªæ¥å‘å±•çš„ä¸»è¦æ–¹å‘ ä»¥å¤ªåŠå’Œæ™ºèƒ½åˆçº¦åŒºå—é“¾çš„ä¼˜ç‚¹æœ‰ åŒºå—é“¾æŠŠæ•°æ®å­˜åˆ°äº†æ•´ä¸ªåŒºå—é“¾ä¸­ï¼Œä¸éœ€è¦ä¸“é—¨çš„å­˜å‚¨æœºåˆ¶ï¼Œå¹¶ä¸”æä¾›å¥–åŠ±æœºåˆ¶ åŒºå—é“¾æœ‰å…±è¯†æœºåˆ¶ï¼Œèƒ½å¤Ÿå¯¹äº¤æ˜“å¿«é€ŸéªŒè¯å’Œç¡®è®¤ åŒºå—é“¾æä¾›åŒ¿åæœºåˆ¶ åŒºå—é“¾å¯ä»¥å®ç°èµ„äº§è½¬ç§»ï¼Œä¸”æ¯”ä¼ ç»Ÿè´§å¸è´¹ç”¨æ›´ä½ åŒºå—é“¾ä¸Šå­˜å‚¨çš„äº¤æ˜“éƒ½æ˜¯å¯ä¿¡èµ–çš„ ä»¥å¤ªåŠåœ¨åŒºå—é“¾çš„åŸºç¡€ä¸Šæ·»åŠ äº†æ™ºèƒ½åˆçº¦ï¼Œæ™ºèƒ½åˆçº¦å¯ä»¥å­˜å‚¨æ•°æ®ã€å°è£…ä»£ç ã€æ‰§è¡Œè®¡ç®—ä»»åŠ¡ï¼Œæˆ‘ä»¬å¯ä»¥è¿ç”¨åˆçº¦å®ç°è‡ªå·±çš„åŠŸèƒ½ ä»¥å¤ªåŠè´¦æˆ·ä»¥å¤ªåŠä¸­çš„çŠ¶æ€æ˜¯ç”±è´¦æˆ·å’Œè´¦æˆ·ä¹‹é—´çš„äº¤æ˜“ä¿¡æ¯æ„æˆçš„ä»¥å¤ªåŠè´¦æˆ·åŒ…å«å››éƒ¨åˆ†ï¼š éšæœºæ•°ï¼šç¡®ä¿æ¯ç¬”äº¤æ˜“å”¯ä¸€ è´¦æˆ·ä½™é¢ åˆçº¦ä»£ç  å­˜å‚¨çš„æ•°æ® ä»¥å¤ªåŠäº¤æ˜“ä»¥å¤ªåŠçš„äº¤æ˜“ä¸æ¯”ç‰¹å¸äº¤æ˜“çš„ä¸åŒç‚¹ï¼š ä»¥å¤ªåŠçš„äº¤æ˜“æ—¢å¯ä»¥æ˜¯ç”±å¤–éƒ¨å®ä½“åˆ›å»ºä¹Ÿå¯ä»¥æ˜¯åˆçº¦åˆ›å»ºï¼Œæ¯”ç‰¹å¸çš„äº¤æ˜“åªèƒ½æ˜¯ä»å¤–éƒ¨åˆ›å»º ä»¥å¤ªåŠçš„äº¤æ˜“å¯ä»¥åŒ…å«å…¶ä»–æ•°æ® ä»¥å¤ªåŠçš„äº¤æ˜“å¯ä»¥è¿›è¡Œå›åº” EVMä»£ç æ‰§è¡Œä»¥å¤ªåŠåˆçº¦çš„ä»£ç ä½¿ç”¨ä½çº§å­—èŠ‚ç è¯­è¨€å†™æˆï¼Œä»£ç ç”±ä¸€ç³»åˆ—çš„å­—èŠ‚æ„æˆï¼Œæ¯ä¸€ä¸ªå­—èŠ‚ä»£è¡¨ä¸€ç§æ“ä½œï¼Œæ“ä½œå¯ä»¥è®¿é—®ä¸‰ç§å­˜å‚¨ç©ºé—´ï¼š å †æ ˆ å†…å­˜ åˆçº¦å­˜å‚¨å½“è™šæ‹Ÿæœºè¿è¡Œæ—¶ï¼Œå®ƒçš„å®Œæ•´çŠ¶æ€å¯ä»¥ç”±å…ƒç»„ï¼ˆblock_state, transaction, message, code, memory, stack, pc, gasï¼‰å®šä¹‰ã€‚æ¯è½®æ‰§è¡Œæ—¶ï¼Œé€šè¿‡è°ƒå‡ºä»£ç çš„ï¼ˆpcï¼‰ä¸ªå­—èŠ‚ï¼Œæ¯ä¸ªå‘½ä»¤éƒ½æœ‰å®šä¹‰å¦‚ä½•æ“ä½œå…ƒç»„æ•°æ® åº”ç”¨ä»¥å¤ªåŠæœ‰ä¸‰å¤§ç±»åº”ç”¨ é‡‘èåº”ç”¨ï¼Œä¸ºç”¨æˆ·çš„èµ„é‡‘æä¾›å‚ä¸åˆçº¦çš„æ–¹æ³• åŠé‡‘èåº”ç”¨ éé‡‘èåº”ç”¨ï¼Œä¾‹å¦‚åœ¨çº¿æŠ•ç¥¨ã€å»ä¸­å¿ƒåŒ–æ²»ç†","tags":[{"name":"Golang","slug":"Golang","permalink":"https://joker208.github.io/tags/Golang/"},{"name":"åŒºå—é“¾","slug":"åŒºå—é“¾","permalink":"https://joker208.github.io/tags/åŒºå—é“¾/"}]},{"title":"Golangå­¦ä¹ ç¬”è®°ï¼ˆå››ï¼‰","date":"2018-06-18T16:00:00.000Z","path":"2018/06/19/Golangå­¦ä¹ ç¬”è®°ï¼ˆå››ï¼‰/","text":"GOæŒ‡å—1fmt.Println(\"My favorite number is\", rand.Intn(10)) ä¾‹å­ä¸Šçš„ä»£ç è¿è¡Œå‡ºçš„ç»“æœæ˜¯ä¸ä¼šå˜åŒ–çš„å¹¶ä¸èƒ½ç®—çœŸæ­£çš„éšæœº éœ€è¦æ·»åŠ éšæœºç§å­ 1rand.Seed(time.Now().UnixNano()) é¦–å­—æ¯å¤§å†™ä¸ºå…±ç”¨æ–¹æ³•ï¼Œå¯ä»¥è¢«å¤–éƒ¨è°ƒç”¨é¦–å­—æ¯å°å†™åªèƒ½åœ¨åŒ…å†…è°ƒç”¨ åˆå§‹åŒ–å˜é‡æ—¶å¯ä»¥çœç•¥ç±»å‹ï¼Œä»åˆå§‹å€¼ä¸­è·å¾—ç±»å‹ â€˜:=â€™ç»“æ„ä¸èƒ½ç”¨åœ¨å‡½æ•°å¤– byte æ˜¯ uint8 çš„åˆ«årune æ˜¯ int32 çš„åˆ«å ç±»å‹è½¬æ¢æ•°å€¼è½¬æ¢ 123var i int = 11var f float64 = float64(i)var u uint = uint(f) int è½¬ string 12var i int = 11var s string= strconv.Itoa(i) int64 è½¬ string 12var i int64 = 11var s string= strconv.FormatInt(i,10) uint64 è½¬ string 12var i uint64=11var s string=strconv.FormatUint(i,10) string è½¬ int 123var s string = \"11\"var i inti, err := strconv.Atoi(s) string è½¬ int64 123var s string = \"11\"var i int64i, err := strconv.ParseInt(s, 10, 64) float64 è½¬ string 12var f float64 = 11.1var s string = strconv.FormatFloat(f, 'f', -1, 64) string è½¬ float64 123var s string = \"11.1\"var f float64f, err := strconv.ParseFloat(s, 64) switchä¸­fallthroughä¼šç›´æ¥æ‰§è¡Œä¸‹ä¸€ä¸ªcaseæˆ–defaultè¯­å¥ï¼ˆæ— è®ºæ¡ä»¶æ˜¯å¦æ»¡è¶³ï¼‰fallthroughå¿…é¡»æ˜¯caseä¸­çš„æœ€åä¸€å¥ deferè°ƒç”¨çš„å‡½æ•°ä¼šä»¥æ ˆçš„å½¢å¼å­˜å‚¨ï¼Œè°ƒç”¨æ—¶éµç…§åè¿›å…ˆå‡ºçš„åŸåˆ™ 123456func main() &#123; for i := 0; i &lt; 10; i++ &#123; defer fmt.Println(i) &#125; fmt.Println(\"done\")&#125; è¾“å‡º 123456789101112API server listening at: 127.0.0.1:47919done9876543210 sliceæ·»åŠ å…ƒç´ func append(s []T, vs â€¦T) []T ç¬¬ä¸€ä¸ªå‚æ•°ä¸ºè¦æ·»åŠ å…ƒç´ çš„sliceç¬¬äºŒä¸ªå‚æ•°ä¸ºè¦æ·»åŠ çš„å…ƒç´  åŸç† appendé¦–å…ˆæ£€æŸ¥æ˜¯å¦åˆ°è¾¾æœ€å¤§å®¹é‡cap æ²¡æœ‰çš„è¯å°±ç›´æ¥åœ¨åé¢æ·»åŠ å…ƒç´  å¦‚æœè¶…è¿‡capå‘å†…å­˜ç”³è¯·ä¸€ä¸ªé•¿åº¦æ˜¯åŸæ¥ä¸¤å€çš„æ–°æ•°ç»„ å°†åŸæ¥çš„å€¼éƒ½å¤åˆ¶è¿‡å» sliceæŒ‡å‘æ–°çš„æ•°ç»„å¹¶é‡Šæ”¾æ‰åŸæ¥çš„æ•°ç»„ é—­åŒ…é—­åŒ…å°±æ˜¯ä¸€ä¸ªå‡½æ•°å¼•ç”¨å‡½æ•°ä»¥å¤–çš„å˜é‡ æ–æ³¢é‚£å¥‘é—­åŒ… 123456789101112131415func fibonacci() func() int &#123; a, b := 0, 1 return func() int &#123; temp := a a, b = b, (a + b) return temp &#125;&#125;func main() &#123; f := fibonacci() for i := 0; i &lt; 10; i++ &#123; fmt.Println(f()) &#125;&#125; goroutineçº¿ç¨‹go f() å¼€å¯æ–°çš„çº¿ç¨‹ channelç®¡é“åˆ›å»º 1234ch := make(chan int)ch &lt;- v //å‘ç®¡é“ä¼ å€¼v &lt;- ch //æ¥æ”¶ç®¡é“çš„å€¼ ä¸€èˆ¬æƒ…å†µä¸‹ï¼Œåªæœ‰ä¼ å€¼æˆ–åªæœ‰æ¥æ”¶éƒ½ä¼šé€ æˆçº¿ç¨‹é˜»å¡ ch := make(chan int,10)//ç¼“å†²ç®¡é“ å½“ç®¡é“æœ‰ç¼“å†²æ—¶ï¼Œå½“ç¼“å†²åŒºæ»¡çš„æ—¶å€™å‘ç®¡é“ä¼ å€¼æ‰ä¼šé˜»å¡å½“ç¼“å†²åŒºä¸ºç©ºçš„æ—¶å€™æ¥æ”¶ç®¡é“å€¼æ‰ä¼šé˜»å¡ selectå¯ä»¥ä½¿å¤šä¸ªé€šä¿¡åœ¨åŒä¸€ä¸ªçº¿ç¨‹ä¸Šç­‰å¾… switchçš„caseä¸éœ€è¦breakç»“å°¾switchçš„caseä¸éœ€è¦breakç»“å°¾switchçš„caseä¸éœ€è¦breakç»“å°¾","tags":[{"name":"Golang","slug":"Golang","permalink":"https://joker208.github.io/tags/Golang/"}]},{"title":"Golangå­¦ä¹ ç¬”è®°ï¼ˆä¸‰ï¼‰","date":"2018-06-09T16:00:00.000Z","path":"2018/06/10/Golangå­¦ä¹ ç¬”è®°ï¼ˆä¸‰ï¼‰/","text":"golang å¹¶è¡Œ goroutinesã€ä¿¡é“å’Œæ­»é”ï¼ˆä¸€ï¼‰goroutines1234567891011func loop() &#123; for i := 0; i &lt; 10; i++ &#123; fmt.Printf(\"%d \", i) &#125;&#125;func main() &#123; go loop() loop()&#125; goroutineè¿˜æ²¡æ¥å¾—åŠè·‘loopçš„æ—¶å€™ï¼Œä¸»å‡½æ•°å·²ç»é€€å‡º è¿™æ—¶éœ€è¦ä¸€ä¸ªç±»ä¼¼joinçš„ä¸œè¥¿æ¥é˜»å¡ä½ä¸»çº¿ã€‚é‚£å°±æ˜¯ä¿¡é“ ï¼ˆäºŒï¼‰ä¿¡é“ä¿¡é“æ˜¯goroutineä¹‹é—´äº’ç›¸é€šè®¯çš„ä¸œè¥¿ã€‚ç±»ä¼¼æˆ‘ä»¬Unixä¸Šçš„ç®¡é“ï¼ˆå¯ä»¥åœ¨è¿›ç¨‹é—´ä¼ é€’æ¶ˆæ¯ï¼‰ï¼Œ ç”¨æ¥goroutineä¹‹é—´å‘æ¶ˆæ¯å’Œæ¥æ”¶æ¶ˆæ¯ã€‚å…¶å®ï¼Œå°±æ˜¯åœ¨åšgoroutineä¹‹é—´çš„å†…å­˜å…±äº«ã€‚ ä½¿ç”¨makeæ¥å»ºç«‹ä¸€ä¸ªä¿¡é“: 1234567func main() &#123; var messages chan string = make(chan string) go func(message string) &#123; messages &lt;- message // å­˜æ¶ˆæ¯ &#125;(\"Ping!\") fmt.Println(&lt;-messages) // å–æ¶ˆæ¯&#125; é»˜è®¤çš„ï¼Œä¿¡é“çš„å­˜æ¶ˆæ¯å’Œå–æ¶ˆæ¯éƒ½æ˜¯é˜»å¡çš„ (å«åšæ— ç¼“å†²çš„ä¿¡é“) æ— ç¼“å†²çš„ä¿¡é“åœ¨å–æ¶ˆæ¯å’Œå­˜æ¶ˆæ¯çš„æ—¶å€™éƒ½ä¼šæŒ‚èµ·å½“å‰çš„goroutineï¼Œé™¤éå¦ä¸€ç«¯å·²ç»å‡†å¤‡å¥½ 123456789var ch chan int = make(chan int)func foo() &#123; ch &lt;- 0 // å‘chä¸­åŠ æ•°æ®ï¼Œå¦‚æœæ²¡æœ‰å…¶ä»–goroutineæ¥å–èµ°è¿™ä¸ªæ•°æ®ï¼Œé‚£ä¹ˆæŒ‚èµ·foo, ç›´åˆ°mainå‡½æ•°æŠŠ0è¿™ä¸ªæ•°æ®æ‹¿èµ°&#125;func main() &#123; go foo() &lt;- ch // ä»chå–æ•°æ®ï¼Œå¦‚æœchä¸­è¿˜æ²¡æ”¾æ•°æ®ï¼Œé‚£å°±æŒ‚èµ·mainçº¿ï¼Œç›´åˆ°fooå‡½æ•°ä¸­æ”¾æ•°æ®ä¸ºæ­¢&#125; å¦‚æœä¸ç”¨ä¿¡é“æ¥é˜»å¡ä¸»çº¿çš„è¯ï¼Œä¸»çº¿å°±ä¼šè¿‡æ—©è·‘å®Œï¼Œloopçº¿éƒ½æ²¡æœ‰æœºä¼šæ‰§è¡Œ å…¶å®ï¼Œæ— ç¼“å†²çš„ä¿¡é“æ°¸è¿œä¸ä¼šå­˜å‚¨æ•°æ®ï¼Œåªè´Ÿè´£æ•°æ®çš„æµé€š ä»æ— ç¼“å†²ä¿¡é“å–æ•°æ®ï¼Œå¿…é¡»è¦æœ‰æ•°æ®æµè¿›æ¥æ‰å¯ä»¥ï¼Œå¦åˆ™å½“å‰çº¿é˜»å¡ æ•°æ®æµå…¥æ— ç¼“å†²ä¿¡é“, å¦‚æœæ²¡æœ‰å…¶ä»–goroutineæ¥æ‹¿èµ°è¿™ä¸ªæ•°æ®ï¼Œé‚£ä¹ˆå½“å‰çº¿é˜»å¡ å¦‚æœä¿¡é“æ­£æœ‰æ•°æ®åœ¨æµåŠ¨ï¼Œæˆ‘ä»¬è¿˜è¦åŠ å…¥æ•°æ®ï¼Œæˆ–è€…ä¿¡é“å¹²æ¶©ï¼Œæˆ‘ä»¬ä¸€ç›´å‘æ— æ•°æ®æµå…¥çš„ç©ºä¿¡é“å–æ•°æ®å°±ä¼šå¼•èµ·æ­»é” ï¼ˆä¸‰ï¼‰æ­»é”1234func main() &#123; ch := make(chan int) &lt;- ch // ??main goroutine, ??c??&#125; åªæœ‰ä¸€ä¸ªgoroutine, æ‰€ä»¥å½“ä½ å‘é‡Œé¢åŠ æ•°æ®æˆ–è€…å­˜æ•°æ®çš„è¯ï¼Œéƒ½ä¼šé”æ­»ä¿¡é“ï¼Œ å¹¶ä¸”é˜»å¡å½“å‰ goroutine, ä¹Ÿå°±æ˜¯æ‰€æœ‰çš„goroutine(å…¶å®å°±mainçº¿ä¸€ä¸ª)éƒ½åœ¨ç­‰å¾…ä¿¡é“çš„å¼€æ”¾(æ²¡äººæ‹¿èµ°æ•°æ®ä¿¡é“æ˜¯ä¸ä¼šå¼€æ”¾çš„)ï¼Œ ä¹Ÿå°±æ˜¯æ­»é” å‡ ä¸ªæ­»é”çš„ä¾‹å­1. 12345func main() &#123; ch := make(chan int) ch &lt;- 1 // 1æµå…¥ä¿¡é“ï¼Œå µå¡å½“å‰çº¿, æ²¡äººå–èµ°æ•°æ®ä¿¡é“ä¸ä¼šæ‰“å¼€ fmt.Println(\"This line code wont run\") //åœ¨æ­¤è¡Œæ‰§è¡Œä¹‹å‰Goå°±ä¼šæŠ¥æ­»é”&#125; 2. 123456789101112var ch1 chan int = make(chan int)var ch2 chan int = make(chan int)func say(s string) &#123; fmt.Println(s) ch1 &lt;- &lt;- ch2 // ch1 ç­‰å¾… ch2æµå‡ºçš„æ•°æ®&#125;func main() &#123; go say(\"hello\") &lt;- ch1 // å µå¡ä¸»çº¿&#125; 3. 12345678c, quit := make(chan int), make(chan int)go func() &#123; c &lt;- 1 // cé€šé“çš„æ•°æ®æ²¡æœ‰è¢«å…¶ä»–goroutineè¯»å–èµ°ï¼Œå µå¡å½“å‰goroutine quit &lt;- 0 // quitå§‹ç»ˆæ²¡æœ‰åŠæ³•å†™å…¥æ•°æ®&#125;()&lt;- quit // quit ç­‰å¾…æ•°æ®çš„å†™ é¿å…æ­»é”çš„æ–¹æ³•: é¿å…æ•°æ®æœ‰å­˜æ— å– æˆ–è€…æœ‰å–æ— å­˜ ä½¿ç”¨ç¼“å†²ä¿¡é“ ç¼“å†²ä¿¡é“åœ¨å£°æ˜ä¸€ä¸ªä¿¡é“çš„æ—¶å€™ï¼Œæˆ‘ä»¬ç»™makeä»¥ç¬¬äºŒä¸ªå‚æ•°æ¥æŒ‡æ˜å®ƒçš„å®¹é‡(é»˜è®¤ä¸º0ï¼Œå³æ— ç¼“å†²): var ch chan int = make(chan int, 2) // å†™å…¥2ä¸ªå…ƒç´ éƒ½ä¸ä¼šé˜»å¡å½“å‰goroutine, å­˜å‚¨ä¸ªæ•°è¾¾åˆ°2çš„æ—¶å€™ä¼šé˜»å¡ ç¼“å†²ä¿¡é“æ˜¯å…ˆè¿›å…ˆå‡ºçš„ï¼Œæˆ‘ä»¬å¯ä»¥æŠŠç¼“å†²ä¿¡é“çœ‹ä½œä¸ºä¸€ä¸ªçº¿ç¨‹å®‰å…¨çš„é˜Ÿåˆ—ï¼š 12345678910func main() &#123; ch := make(chan int, 3) ch &lt;- 1 ch &lt;- 2 ch &lt;- 3 fmt.Println(&lt;-ch) // 1 fmt.Println(&lt;-ch) // 2 fmt.Println(&lt;-ch) // 3&#125; Goè¯­è¨€å…è®¸æˆ‘ä»¬ä½¿ç”¨rangeæ¥è¯»å–ä¿¡é“: ä½†æ˜¯rangeå¯èƒ½ä¼šé€ æˆæ­»é”ï¼ŒåŸå› æ˜¯rangeä¸ç­‰åˆ°ä¿¡é“å…³é—­æ˜¯ä¸ä¼šç»“æŸè¯»å–çš„ã€‚ä¹Ÿå°±æ˜¯å¦‚æœç¼“å†²ä¿¡é“å¹²æ¶¸äº†ï¼Œé‚£ä¹ˆrangeå°±ä¼šé˜»å¡å½“å‰goroutine, æ‰€ä»¥æ­»é” ä¸ºäº†é¿å…ä»¥ä¸Šæƒ…å†µï¼Œæœ‰ä»¥ä¸‹ä¸¤ç§æ–¹å¼1. 12345678910ch := make(chan int, 3)ch &lt;- 1ch &lt;- 2ch &lt;- 3for v := range ch &#123; fmt.Println(v) if len(ch) &lt;= 0 &#123; // å¦‚æœç°æœ‰æ•°æ®é‡ä¸º0ï¼Œè·³å‡ºå¾ªç¯ break &#125;&#125; 2. 1234567891011ch := make(chan int, 3)ch &lt;- 1ch &lt;- 2ch &lt;- 3// æ˜¾å¼åœ°å…³é—­ä¿¡é“close(ch)for v := range ch &#123; fmt.Println(v)&#125; å¹¶è¡Œå¹¶å‘ä¸å¹¶è¡Œä¸¤ä¸ªé˜Ÿåˆ—ï¼Œä¸€ä¸ªCoffeeæœºå™¨ï¼Œé‚£æ˜¯å¹¶å‘ä¸¤ä¸ªé˜Ÿåˆ—ï¼Œä¸¤ä¸ªCoffeeæœºå™¨ï¼Œé‚£æ˜¯å¹¶è¡Œ ä¸ºäº†è¾¾åˆ°çœŸæ­£çš„å¹¶è¡Œï¼Œæˆ‘ä»¬éœ€è¦å‘Šè¯‰Goæˆ‘ä»¬å…è®¸åŒæ—¶æœ€å¤šä½¿ç”¨å¤šä¸ªæ ¸ï¼Œä¾‹å¦‚ä¸‹é¢çš„æ–¹æ³• 1. 123456789101112131415161718192021222324import ( \"fmt\" \"runtime\")var quit chan int = make(chan int)func loop() &#123; for i := 0; i &lt; 100; i++ &#123; fmt.Printf(\"%d \", i) &#125; quit &lt;- 0&#125;func main() &#123; runtime.GOMAXPROCS(2) // æœ€å¤šä½¿ç”¨2ä¸ªæ ¸ go loop() go loop() for i := 0; i &lt; 2; i++ &#123; &lt;- quit &#125;&#125; 2. 1234567891011121314151617func loop() &#123; for i := 0; i &lt; 10; i++ &#123; runtime.Gosched() // æ˜¾å¼åœ°è®©å‡ºCPUæ—¶é—´ç»™å…¶ä»–goroutine fmt.Printf(\"%d \", i) &#125; quit &lt;- 0&#125;func main() &#123; go loop() go loop() for i := 0; i &lt; 2; i++ &#123; &lt;- quit &#125;&#125; ä¸Šé¢çš„ä¸¤ä¸ªä¾‹å­éƒ½ç”¨åˆ°äº†runtimeè°ƒèŠ‚å™¨ runtimeè°ƒåº¦å™¨ Gosched è®©å‡ºcpu NumCPU è¿”å›å½“å‰ç³»ç»Ÿçš„CPUæ ¸æ•°é‡ GOMAXPROCS è®¾ç½®æœ€å¤§çš„å¯åŒæ—¶ä½¿ç”¨çš„CPUæ ¸æ•° Goexit é€€å‡ºå½“å‰goroutine(ä½†æ˜¯deferè¯­å¥ä¼šç…§å¸¸æ‰§è¡Œ)","tags":[{"name":"Golang","slug":"Golang","permalink":"https://joker208.github.io/tags/Golang/"}]},{"title":"Golangå­¦ä¹ ç¬”è®°ï¼ˆäºŒï¼‰","date":"2018-06-08T16:00:00.000Z","path":"2018/06/09/Golangå­¦ä¹ ç¬”è®°ï¼ˆäºŒï¼‰/","text":"golang æ¥å£ åå°„ å¹¶å‘ä¸€ã€æ¥å£è®¾è®¡ç†å¿µGoä¸æ˜¯ä¼ ç»Ÿæ„ä¹‰ä¸Šçš„é¢å‘å¯¹è±¡ç¼–ç¨‹è¯­è¨€ï¼Œå®ƒæ²¡æœ‰ç±»åŠå…¶ç»§æ‰¿çš„æ¦‚å¿µã€‚æ¥å£æ˜¯ä¸€ç§å¥‘çº¦ï¼Œå®ç°ç±»å‹å¿…é¡»æ»¡è¶³å®ƒï¼Œå®ƒæè¿°äº†ç±»å‹çš„è¡Œä¸ºï¼Œè§„å®šç±»å‹å¯ä»¥åšä»€ä¹ˆã€‚æ¥å£å½»åº•å°†ç±»å‹èƒ½åšä»€ä¹ˆï¼Œä»¥åŠå¦‚ä½•åšåˆ†ç¦»å¼€æ¥ï¼Œä½¿å¾—ç›¸åŒæ¥å£çš„å˜é‡åœ¨ä¸åŒçš„æ—¶åˆ»è¡¨ç°å‡ºä¸åŒçš„è¡Œä¸ºï¼Œè¿™å°±æ˜¯å¤šæ€çš„æœ¬è´¨ æ¥å£çš„ç‰¹æ€§æ˜¯golangæ”¯æŒé¸­å­ç±»å‹çš„åŸºç¡€ï¼Œå³â€œå¦‚æœå®ƒèµ°èµ·æ¥åƒé¸­å­ï¼Œå«èµ·æ¥åƒé¸­å­ï¼ˆå®ç°äº†æ¥å£è¦çš„æ–¹æ³•ï¼‰ï¼Œå®ƒå°±æ˜¯ä¸€åªé¸­å­ï¼ˆå¯ä»¥è¢«èµ‹å€¼ç»™æ¥å£çš„å€¼ï¼‰â€ã€‚å‡­å€Ÿæ¥å£æœºåˆ¶å’Œé¸­å­ç±»å‹ï¼Œgolangæä¾›äº†ä¸€ç§æ¸¸ç¦»äºç±»ã€ç»§æ‰¿ã€æ¨¡æ¿ä¹‹å¤–çš„æ›´åŠ çµæ´»å¼ºå¤§çš„é€‰æ‹©ã€‚ æ³¨æ„çš„ç‚¹ ç±»å‹ä¸éœ€è¦æ˜¾å¼åœ°å£°æ˜å®ƒå®ç°äº†æŸä¸ªæ¥å£ï¼Œæ¥å£è¢«éšå¼åœ°å®ç°ï¼Œå¤šä¸ªç±»å‹å¯ä»¥å®ç°åŒä¸€ä¸ªæ¥å£ ä¸€ä¸ªç±»å‹å¯ä»¥å®ç°å¤šä¸ªæ¥å£ å®ç°äº†æŸä¸ªæ¥å£çš„ç±»å‹ï¼Œå¯ä»¥æœ‰å…¶å®ƒçš„æ–¹æ³•ï¼ˆå¤šå¯¹å¤šï¼‰ æ¥å£æ–¹æ³•ä¸­ç±»å‹Tå’Œ*Tçš„åŒºåˆ«(æŒ‡é’ˆ)æŒ‡é’ˆæ˜¯å­˜å‚¨ä¸€ä¸ªå˜é‡çš„å†…å­˜åœ°å€çš„å˜é‡ã€‚ ï¼ˆä¸æ”¯æŒæŒ‡é’ˆè¿ç®—ï¼‰ å–åœ°å€ç¬¦æ˜¯ &amp;ï¼Œæ”¾åˆ°ä¸€ä¸ªå˜é‡å‰ä½¿ç”¨å°±ä¼šè¿”å›ç›¸åº”å˜é‡çš„å†…å­˜åœ°å€è§£å¼•ç”¨æŒ‡é’ˆçš„æ„æ€æ˜¯é€šè¿‡æŒ‡é’ˆè®¿é—®è¢«æŒ‡å‘çš„å€¼ã€‚æŒ‡é’ˆ a çš„è§£å¼•ç”¨è¡¨ç¤ºä¸ºï¼š*aã€‚ ä¸è¦ä¼ é€’æŒ‡å‘æ•°ç»„çš„æŒ‡é’ˆç»™å‡½æ•°ï¼Œè€Œæ˜¯ä½¿ç”¨åˆ‡ç‰‡å‡è®¾æˆ‘ä»¬éœ€è¦é€šè¿‡å‡½æ•°ä¿®æ”¹ä¸€ä¸ªæ•°ç»„ã€‚ä¸€ä¸ªåŠæ³•æ˜¯å°†æ•°ç»„çš„æŒ‡é’ˆä½œä¸ºå‚æ•°ä¼ é€’ç»™å‡½æ•°ã€‚ 123456789101112131415package mainimport ( \"fmt\")func modify(arr *[3]int) &#123; (*arr)[0] = 90&#125;func main() &#123; a := [3]int&#123;89, 90, 91&#125; modify(&amp;a) fmt.Println(a)&#125; 123456789101112131415package mainimport ( \"fmt\")func modify(arr *[3]int) &#123; arr[0] = 90 //a[x] æ˜¯ (*a)[x] çš„ç®€å†™ï¼Œå› æ­¤ä¸Šé¢çš„ç¨‹åºä¸­ï¼Œ(*arr)[0] å¯ä»¥æ›¿æ¢ä¸º arr[0]ã€‚&#125;func main() &#123; a := [3]int&#123;89, 90, 91&#125; modify(&amp;a) fmt.Println(a)&#125; 123456789101112131415package mainimport ( \"fmt\")func modify(sls []int) &#123; sls[0] = 90&#125;func main() &#123; a := [3]int&#123;89, 90, 91&#125; modify(a[:]) //è™½ç„¶å¯ä»¥é€šè¿‡ä¼ é€’æ•°ç»„æŒ‡é’ˆç»™å‡½æ•°çš„æ–¹å¼æ¥ä¿®æ”¹åŸå§‹æ•°ç»„çš„å€¼ï¼Œä½†è¿™åœ¨ Go ä¸­ä¸æ˜¯æƒ¯ç”¨çš„æ–¹å¼ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨åˆ‡ç‰‡å®ŒæˆåŒæ ·çš„äº‹æƒ…ã€‚ fmt.Println(a)&#125; Go è¯­è¨€è§„èŒƒå®šä¹‰äº†æ¥å£æ–¹æ³•é›†çš„è°ƒç”¨è§„åˆ™ï¼š ç±»å‹ T çš„å¯è°ƒç”¨æ–¹æ³•é›†åŒ…å«æ¥å—è€…ä¸º T æˆ– T çš„æ‰€æœ‰æ–¹æ³•é›†ç±»å‹ T çš„å¯è°ƒç”¨æ–¹æ³•é›†åŒ…å«æ¥å—è€…ä¸º T çš„æ‰€æœ‰æ–¹æ³•ç±»å‹ T çš„å¯è°ƒç”¨æ–¹æ³•é›†ä¸åŒ…å«æ¥å—è€…ä¸º *T çš„æ–¹æ³• ç©ºæ¥å£ä»€ä¹ˆæ–¹æ³•éƒ½æ²¡å®šä¹‰çš„æ¥å£å°±æ˜¯ç©ºæ¥å£ã€‚æ ¹æ®Golangçš„æ¦‚å¿µï¼Œç©ºæ¥å£è¢«ä»»ä½•ç±»å‹éšå¼å®ç°ï¼Œæ‰€ä»¥ç©ºæ¥å£å¯ä»¥å®¹çº³ä»»ä½•ç±»å‹ã€‚ äºŒã€åå°„åå°„æ˜¯åœ¨golangç¨‹åºè¿è¡Œæ—¶æ£€æŸ¥å˜é‡æ‰€å…·æœ‰ç±»å‹çš„ä¸€ç§æœºåˆ¶ åœ¨åŸºæœ¬çš„å±‚é¢ä¸Šï¼Œåå°„åªæ˜¯ä¸€ä¸ªæ£€æŸ¥å­˜å‚¨åœ¨æ¥å£å˜é‡ä¸­çš„ç±»å‹å’Œå€¼çš„ç®—æ³•ã€‚ä½¿ç”¨åå°„æœºåˆ¶ï¼Œé¦–å…ˆéœ€è¦å¯¼å…¥reflectåŒ…ï¼ŒreflectåŒ…ä¸­æœ‰ä¸¤ä¸ªé‡è¦ç±»å‹éœ€è¦äº†è§£ï¼Œreflect.Typeå’Œreflect.Valueï¼Œè¿™ä¸¤ä¸ªç±»å‹ä½¿å¾—å¯ä»¥è®¿é—®å˜é‡çš„å†…å®¹ã€‚ä¸æ­¤ç›¸å…³çš„ï¼Œè¿˜æœ‰ä¸¤ä¸ªç®€å•çš„å‡½æ•°ï¼Œreflect.TypeOfå’Œreflect.ValueOfï¼Œå¯ä»¥ä»æ¥å£å€¼ä¸­åˆ†åˆ«è·å–reflect.Typeå’Œreflect.Valueã€‚ 1234567891011121314import ( \"fmt\" \"reflect\")func main() &#123; var x float64 = 1.1 fmt.Println(\"reflect.Value:\", reflect.ValueOf(x)) fmt.Println(\"reflect.Type:\", reflect.TypeOf(x)) v := reflect.ValueOf(x) fmt.Println(\"reflect.Type:\",v.Type()) fmt.Println(\"actual value:\", v.Float()) fmt.Println(\"kind is float64?\", v.Kind() == reflect.Float64)&#125; golangé‡‡ç”¨é™æ€ç±»å‹æœºåˆ¶ï¼ŒTypeOfè¿”å›é™æ€ç±»å‹ åå°„ä¸‰æ³•åˆ™ å®˜æ–¹æ–‡æ¡£ http://blog.golang.org/laws-of-reflection æ³•åˆ™ä¸€ï¼šä»æ¥å£å€¼åˆ°åå°„å¯¹è±¡çš„åå°„ï¼ˆReflection goes from interface value toreflection objectï¼‰ ä»£è¡¨æ–¹æ³•ä¸ºreflect.ValueOfå’Œreflect.TypeOffunc ValueOf(i interface{}) Valuefunc TypeOf(i interface{}) Type æ³•åˆ™äºŒï¼šä»åå°„å¯¹è±¡åˆ°æ¥å£å€¼çš„åå°„ï¼ˆReflection goes from reflection object to interface valueï¼‰ ä»reflect.Valueå¯ä»¥ä½¿ç”¨Interfaceæ–¹æ³•è¿˜åŸæ¥å£å€¼ï¼›å¯ä»¥é«˜æ•ˆåœ°æ‰“åŒ…ç±»å‹å’Œå€¼ä¿¡æ¯åˆ°æ¥å£è¡¨è¾¾ä¸­ï¼Œå¹¶è¿”å›è¿™ä¸ªç»“æœ æ–¹æ³•å£°æ˜ï¼š 1func (v Value) Interface() interface&#123;&#125; é€šè¿‡åå°„å¯¹è±¡ v å¯ä»¥æ‰“å° float64 çš„è¡¨è¾¾å€¼ 12y :=v.Interface().(float64) // y å°†ä¸ºç±»å‹ float64ã€‚fmt.Println(y) æ›´ä¸ºç®€æ´çš„å®ç° 1fmt.Println(v.Interface()) æ³•åˆ™ä¸‰ï¼šä¸ºäº†ä¿®æ”¹åå°„å¯¹è±¡ï¼Œå…¶å€¼å¿…é¡»å¯è®¾ç½®ï¼ˆTo modify a reflectionobject, the value must be settableï¼‰ åå°„å¯¹è±¡å¯ä»¥é€šè¿‡SetFloatç­‰æ–¹æ³•è®¾ç½®å€¼ï¼Œé€šè¿‡CanSetåˆ¤æ–­å¯è®¾ç½®æ€§ã€‚ä½†æ˜¯è¿™é‡Œé¢æœ‰å‘ï¼Œæœ‰äº›å€¼æ˜¯ä¸å¯è®¾ç½®çš„ 1234567891011import ( \"fmt\" \"reflect\")func main() &#123; var x float64 = 1.1 v := reflect.ValueOf(x) fmt.Println(\"settability of v:\",v.CanSet()) v.SetFloat(1.2)//é”™è¯¯&#125; V := reflect.ValueOf(x)ï¼Œè¿™ä¸ªå‡½æ•°æ˜¯å€¼ä¼ é€’ï¼Œå³ä¼ é€’äº†ä¸€ä¸ªxçš„å‰¯æœ¬åˆ°å‡½æ•°ä¸­ï¼Œè€Œéxæœ¬èº«ï¼Œå€¼ä¼ é€’çš„å‚æ•°æ˜¯ä¸èƒ½è¢«çœŸæ­£ä¿®æ”¹çš„ å€ŸåŠ©Elemæ–¹æ³•ï¼Œé€šè¿‡æŒ‡é’ˆæ¥ä¿®æ”¹æŒ‡é’ˆæŒ‡å‘çš„å…·ä½“å€¼ã€‚ 123func (v Value)Elem() Value//Elem returns the value that the interface v contains or that the pointer vpoints to. //It panics if v's Kind is not Interface or Ptr. It returns the zeroValue if v is nil. 12345678func main() &#123; var x float64 = 1.1 p := reflect.ValueOf(&amp;x) fmt.Println(\"type of p:\",p.Type()) v := p.Elem() fmt.Println(\"type of v:\",v.Type()) fmt.Println(\"settability of v:\",v.CanSet())&#125; è™½ç„¶pæ˜¯ä¸å¯ä¿®æ”¹çš„ï¼Œä½†æ˜¯vå¯ä»¥ä¿®æ”¹ã€‚è¿™ç§æ–¹æ³•æ€è·¯ä¸Šç±»ä¼¼å¼•ç”¨ä¼ å‚ï¼Œä¼ å…¥åœ°å€ï¼Œä¿®æ”¹åœ°å€æ‰€æŒ‡å‘çš„å…·ä½“å€¼","tags":[{"name":"Golang","slug":"Golang","permalink":"https://joker208.github.io/tags/Golang/"}]},{"title":"Golangå­¦ä¹ ç¬”è®°ï¼ˆä¸€ï¼‰","date":"2018-06-06T16:00:00.000Z","path":"2018/06/07/Golangå­¦ä¹ ç¬”è®°ï¼ˆä¸€ï¼‰/","text":"ç ”ç©¶æ–¹å‘golangåŒºå—é“¾ä»¥å¤ªåŠæºç ä»¥å¤ªåŠæ™ºèƒ½åˆçº¦ä»£å¸åˆçº¦å…±è¯†æœºåˆ¶ https://github.com/ethereum/go-ethereum ä»¥å¤ªåŠ https://github.com/abiosoft/ishell https://github.com/urfave/cli go tool pprofæ€§èƒ½ç›‘æ§ åˆ†ä¸ºä¸¤æ–¹é¢ 1.net/http/pprof åšWEBæœåŠ¡å™¨çš„æ€§èƒ½ç›‘æ§æ£€æŸ¥æœåŠ¡å™¨çŠ¶æ€func main() { go func() { http.ListenAndServe(â€œlocalhost:6060â€, nil) }() 2.runtime/pprof åšåº”ç”¨ç¨‹åºæ€§èƒ½ç›‘æ§ CPUæ¶ˆè€—åˆ†æfunc main() { f, err := os.OpenFile(â€œ./tmp/cpu.profâ€, os.O_RDWR|os.O_CREATE, 0644) if err != nil { log.Fatal(err) } defer f.Close() pprof.StartCPUProfile(f) defer pprof.StopCPUProfile() å¯¼å‡ºprofæ–‡ä»¶ä½¿ç”¨ go tool pprof (åº”ç”¨ç¨‹åº) ï¼ˆåº”ç”¨ç¨‹åºçš„profæ–‡ä»¶ï¼‰ æ–¹å¼æ¥å¯¹è¿™ä¸ª prof æ–‡ä»¶è¿›è¡Œåˆ†æã€‚ $ go tool pprof HuaRongDao ./tmp/cpu.profEntering interactive mode (type â€œhelpâ€ for commands) å®˜æ–¹æ–‡æ¡£ https://blog.golang.org/profiling-go-programs net/http/pprofå’Œruntime/pprofæŒ‡çš„å¹¶ä¸æ˜¯åˆ†æWEBæœåŠ¡å™¨æ€§èƒ½ç›‘æ§å’Œåº”ç”¨ç¨‹åºæ€§èƒ½ç›‘æ§ è¿™ä¸¤ä¸ªç›‘æ§çš„æ˜¯ä¸€ä¸ªä¸œè¥¿ å†…å®¹éƒ½æ˜¯ä¸€æ ·çš„åªä¸è¿‡æ˜¯net/http/pprofæŠŠç›‘æ§çš„å†…å®¹ä»¥WEBçš„å½¢å¼å±•ç¤ºå‡ºæ¥å¹¶ä¸æ˜¯è¯´net/http/pprofæ˜¯ç”¨æ¥ç›‘æ§WEBæœåŠ¡å™¨çš„æ€§èƒ½çš„è·ŸWEBæœåŠ¡å™¨æ²¡æœ‰å…³ç³» net/http/pprof åªæ˜¯æŠŠ runtime/pprofè¿›è¡Œå°è£…äº†ä¸€ä¸‹å®é™…ä¸Šè°ƒç”¨çš„è¿˜æ˜¯ runtime/pprof","tags":[{"name":"Golang","slug":"Golang","permalink":"https://joker208.github.io/tags/Golang/"}]},{"title":"C#å¯¼å‡ºExcelçš„æ–¹æ³•æ€»ç»“","date":"2017-04-11T16:00:00.000Z","path":"2017/04/12/C#å¯¼å‡ºExcelçš„æ–¹æ³•æ€»ç»“/","text":"æœ€è¿‘åšäº†ä¸€ä¸ªæœ‰å…³åå°æ•°æ®çš„å¯¼å‡ºåŠŸèƒ½ è¶ç€è¿™ä¸ªæœºä¼šæŠŠæ”¶é›†åˆ°çš„æœ‰å…³å¯¼å‡ºExcelçš„å„ç§æ–¹æ³•æ€»ç»“ä¸€ä¸‹ Npoiå¯¼å‡ºExcelç®€ä»‹ï¼šNPOI æ˜¯ POI é¡¹ç›®çš„ .NET ç‰ˆæœ¬POIæ˜¯ä¸€ä¸ªå¼€æºçš„Javaè¯»å†™Excelã€WORDç­‰å¾®è½¯OLE2ç»„ä»¶æ–‡æ¡£çš„é¡¹ç›® ä¸»è¦ä¼˜ç‚¹ï¼šå¯ä»¥å®ç°Excelçš„å¯¼å…¥å¯¼å‡ºï¼Œè€Œä¸”ä¸éœ€è¦æœ¬æœºä¸Šè£…Office éœ€è¦çš„å¼•ç”¨å¯ä»¥åœ¨VSçš„NuGetä¸Šç›´æ¥ä¸‹è½½ï¼Œç°åœ¨ç”¨çš„ç‰ˆæœ¬æ˜¯2.3.0 12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455565758using System;using System.Collections.Generic;using System.Data;using System.IO;using System.Text;using System.Web;using NPOI.SS.UserModel;using NPOI.HSSF.UserModel;/* * / &lt;summary&gt; * / NpoiforExcel çš„æ‘˜è¦è¯´æ˜ * / &lt;/summary&gt; */ public class NpoiforExcel &#123; public NpoiforExcel( DataTable dt, string fileName ) &#123; /* ç”ŸæˆExcel */ IWorkbook book = BuildWorkbook( dt ); /* web ä¸‹è½½ */ if ( fileName == &quot;&quot; ) fileName = string.Format( &quot;&#123;0:yyyyMMddHHmmssffff&#125;&quot;, DateTime.Now ); fileName = fileName.Trim(); string ext = Path.GetExtension( fileName ); if ( ext.ToLower() == &quot;.xls&quot; || ext.ToLower() == &quot;.xlsx&quot; ) fileName = fileName.Replace( ext, string.Empty ); HttpResponse httpResponse = HttpContext.Current.Response; httpResponse.Clear(); httpResponse.Buffer = true; httpResponse.Charset = Encoding.UTF8.BodyName; httpResponse.AppendHeader( &quot;Content-Disposition&quot;, &quot;attachment;filename=&quot; + fileName + &quot;.xls&quot; ); httpResponse.ContentEncoding = Encoding.UTF8; httpResponse.ContentType = &quot;application/vnd.ms-excel; charset=UTF-8&quot;; book.Write( httpResponse.OutputStream ); httpResponse.End(); &#125; public static HSSFWorkbook BuildWorkbook( DataTable dt ) &#123; HSSFWorkbook book = new HSSFWorkbook(); ISheet sheet = book.CreateSheet( &quot;Sheet1&quot; ); /* Data Rows */ for ( int i = 0; i &lt; dt.Rows.Count; i++ ) &#123; IRow drow = sheet.CreateRow( i ); for ( int j = 0; j &lt; dt.Columns.Count; j++ ) &#123; ICell cell = drow.CreateCell( j, CellType.String ); cell.SetCellValue( dt.Rows[i][j].ToString() ); &#125; &#125; /* è‡ªåŠ¨åˆ—å®½ */ for ( int i = 0; i &lt;= dt.Columns.Count; i++ ) sheet.AutoSizeColumn( i, true ); return(book); &#125;&#125; Htmlå¯¼å‡ºExcelé¦–å…ˆæ„Ÿè°¢æœå“¥ï¼Œè¿™ä¸ªæ–¹æ³•ä»æœå“¥å·å­¦æ¥çš„ï¸¿(ï¿£ï¸¶ï¿£)ï¸¿ ä¸»è¦æ€è·¯æ˜¯å°†DataTableæ•°æ®è½¬æ¢ä¸ºhtmlæ ¼å¼ï¼Œç„¶åç›´æ¥è®¾ç½®ä¸ºExcelçš„æ–‡ä»¶æ ¼å¼ä¸‹è½½ ä¸‹è½½ä¸‹æ¥çš„æ–‡ä»¶æ‰“å¼€ä¼šæœ‰å®‰å…¨æç¤ºï¼Œå¯ä»¥å¿½ç•¥ 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960using System;using System.Collections.Generic;using System.Web;/* * / &lt;summary&gt; * / htmltoExcel çš„æ‘˜è¦è¯´æ˜ * / &lt;/summary&gt; */public class htmltoExcel&#123; public htmltoExcel() &#123; /* * * TODO: åœ¨æ­¤å¤„æ·»åŠ æ„é€ å‡½æ•°é€»è¾‘ * */ &#125; /* * / &lt;summary&gt; * / DataTable è¾“å‡ºæˆExcel * / &lt;/summary&gt; * / &lt;param name=&quot;dtData&quot;&gt;&lt;/param&gt; * / &lt;param name=&quot;FileName&quot;&gt;&lt;/param&gt; */ public htmltoExcel( System.Data.DataTable dtData, String FileName ) &#123; System.Web.UI.WebControls.GridView dgExport = null; /* å½“å‰å¯¹è¯ */ System.Web.HttpContext curContext = System.Web.HttpContext.Current; /* IOå¯¼å‡ºå¹¶è¿”å›excelæ–‡ä»¶ */ System.IO.StringWriter strWriter = null; System.Web.UI.HtmlTextWriter htmlWriter = null; if ( dtData != null ) &#123; /* è®¾ç½®ç¼–ç å’Œé™„ä»¶æ ¼å¼ */ System.Web.HttpUtility.UrlEncode( FileName, System.Text.Encoding.UTF8 ); curContext.Response.AddHeader( &quot;content-disposition&quot;, &quot;attachment;filename=&quot; + System.Web.HttpUtility.UrlEncode( FileName, System.Text.Encoding.UTF8 ) + &quot;.xls&quot; ); curContext.Response.ContentType = &quot;application nd.ms-excel&quot;; curContext.Response.ContentEncoding = System.Text.Encoding.GetEncoding( &quot;UTF-8&quot; ); curContext.Response.Charset = &quot;UTF-8&quot;; /* å¯¼å‡ºExcelæ–‡ä»¶ */ strWriter = new System.IO.StringWriter(); htmlWriter = new System.Web.UI.HtmlTextWriter( strWriter ); /* è¦é‡æ–°å®šä¹‰ä¸€ä¸ªæ— åˆ†é¡µçš„GridView */ dgExport = new System.Web.UI.WebControls.GridView(); dgExport.DataSource = dtData.DefaultView; dgExport.AllowPaging = false; dgExport.DataBind(); /*ä¸‹è½½åˆ°å®¢æˆ·ç«¯ */ dgExport.RenderControl( htmlWriter ); curContext.Response.Write( &quot;&lt;html&gt;&lt;head&gt;&lt;meta http-equiv=Content-Type content=\\&quot;text/html; charset=utf-8\\&quot;&gt;&quot; ); curContext.Response.Write( strWriter.ToString() ); curContext.Response.Write( &quot;&lt;/body&gt;&lt;/html&gt;&quot; ); curContext.Response.End(); &#125; &#125;&#125; Xmlå¯¼å‡ºExcelè¿™ä¸ªæ–¹æ³•ä»å¤§è¡¨å“¥é‚£å„¿ææ¥çš„ï¼Œè¡¨ç¤ºæ„Ÿè°¢ï¸¿(ï¿£ï¸¶ï¿£)ï¸¿ è¿™ä¸ªå¯¼å‡ºæ€è·¯å’Œä¸Šé¢çš„æ–¹æ³•ç±»ä¼¼ï¼Œå…ˆæ‹¼å‡ºXMLæ ¼å¼ï¼Œå†è®¾ç½®ä¸ºExcelæ ¼å¼å¯¼å‡º 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113114115116117118119120121122123124125126127128129130131132133134135136137138139140141142143144145146147148149150151152153154155156157158159160161162163164165166167168169170171172173174175176177178179180181182183184using System;using System.Collections.Generic;using System.Data;using System.Text;using System.Web;public class ExportOrder&#123; private DataTable datasource; public ExportOrder( DataTable data, string title ) &#123; System.Web.HttpContext curContext = System.Web.HttpContext.Current; if ( data != null ) &#123; datasource = data; /* è®¾ç½®ç¼–ç å’Œé™„ä»¶æ ¼å¼ */ System.Web.HttpUtility.UrlEncode( title, System.Text.Encoding.UTF8 ); curContext.Response.AddHeader( &quot;content-disposition&quot;, &quot;attachment;filename=&quot; + System.Web.HttpUtility.UrlEncode( title, System.Text.Encoding.UTF8 ) + &quot;.xls&quot; ); curContext.Response.ContentType = &quot;application nd.ms-excel&quot;; curContext.Response.ContentEncoding = System.Text.Encoding.GetEncoding( &quot;UTF-8&quot; ); curContext.Response.Charset = &quot;UTF-8&quot;; /*ä¸‹è½½åˆ°å®¢æˆ·ç«¯ */ curContext.Response.Write( GetExcelString().ToString() ); curContext.Response.End(); &#125; &#125; private StringBuilder GetExcelString() &#123; StringBuilder xmlString = new StringBuilder(); AddHeadFile( xmlString ); AddContentFile( xmlString, datasource ); AddEndFile( xmlString ); return(xmlString); &#125; /* * / &lt;summary&gt; * /å†™Excelå¤´ * / &lt;/summary&gt; * / &lt;param name=&quot;OutFileContent&quot;&gt;&lt;/param&gt; * / &lt;returns&gt;&lt;/returns&gt; */ private StringBuilder AddHeadFile( StringBuilder OutFileContent ) &#123; OutFileContent.Append( &quot;&lt;?xml version=\\&quot;1.0\\&quot;?&gt;\\r\\n&quot; ); OutFileContent.Append( &quot;&lt;?mso-application progid=\\&quot;Excel.Sheet\\&quot;?&gt;\\r\\n&quot; ); OutFileContent.Append( &quot;&lt;Workbook xmlns=\\&quot;urn:schemas-microsoft-com:office:spreadsheet\\&quot;\\r\\n&quot; ); OutFileContent.Append( &quot; xmlns:o=\\&quot;urn:schemas-microsoft-com:office:office\\&quot;\\r\\n&quot; ); OutFileContent.Append( &quot; xmlns:x=\\&quot;urn:schemas-microsoft-com:office:excel\\&quot;\\r\\n&quot; ); OutFileContent.Append( &quot; xmlns:ss=\\&quot;urn:schemas-microsoft-com:office:spreadsheet\\&quot;\\r\\n&quot; ); OutFileContent.Append( &quot; xmlns:html=\\&quot;http://www.w3.org/TR/REC-html40\\&quot;&gt;\\r\\n&quot; ); OutFileContent.Append( &quot; &lt;DocumentProperties xmlns=\\&quot;urn:schemas-microsoft-com:office:office\\&quot;&gt;\\r\\n&quot; ); OutFileContent.Append( &quot; &lt;Author&gt;panss&lt;/Author&gt;\\r\\n&quot; ); OutFileContent.Append( &quot; &lt;LastAuthor&gt;ĞÒ‘Â¶ĞĞ¢Ğµ&lt;/LastAuthor&gt;\\r\\n&quot; ); OutFileContent.Append( &quot; &lt;Created&gt;2004-12-31T03:40:31Z&lt;/Created&gt;\\r\\n&quot; ); OutFileContent.Append( &quot; &lt;Company&gt;Prcedu&lt;/Company&gt;\\r\\n&quot; ); OutFileContent.Append( &quot; &lt;Version&gt;12.00&lt;/Version&gt;\\r\\n&quot; ); OutFileContent.Append( &quot; &lt;/DocumentProperties&gt;\\r\\n&quot; ); OutFileContent.Append( &quot; &lt;OfficeDocumentSettings xmlns=\\&quot;urn:schemas-microsoft-com:office:office\\&quot;&gt;\\r\\n&quot; ); OutFileContent.Append( &quot; &lt;DownloadComponents/&gt;\\r\\n&quot; ); OutFileContent.Append( &quot; &lt;LocationOfComponents HRef=\\&quot;file:///F:\\\\Tools\\\\OfficeXP\\\\OfficeXP\\\\\\&quot;/&gt;\\r\\n&quot; ); OutFileContent.Append( &quot; &lt;/OfficeDocumentSettings&gt;\\r\\n&quot; ); OutFileContent.Append( &quot; &lt;ExcelWorkbook xmlns=\\&quot;urn:schemas-microsoft-com:office:excel\\&quot;&gt;\\r\\n&quot; ); OutFileContent.Append( &quot; &lt;WindowHeight&gt;9000&lt;/WindowHeight&gt;\\r\\n&quot; ); OutFileContent.Append( &quot; &lt;WindowWidth&gt;10620&lt;/WindowWidth&gt;\\r\\n&quot; ); OutFileContent.Append( &quot; &lt;WindowTopX&gt;480&lt;/WindowTopX&gt;\\r\\n&quot; ); OutFileContent.Append( &quot; &lt;WindowTopY&gt;45&lt;/WindowTopY&gt;\\r\\n&quot; ); OutFileContent.Append( &quot; &lt;ProtectStructure&gt;False&lt;/ProtectStructure&gt;\\r\\n&quot; ); OutFileContent.Append( &quot; &lt;ProtectWindows&gt;False&lt;/ProtectWindows&gt;\\r\\n&quot; ); OutFileContent.Append( &quot; &lt;/ExcelWorkbook&gt;\\r\\n&quot; ); OutFileContent.Append( &quot; &lt;Styles&gt;\\r\\n&quot; ); OutFileContent.Append( &quot; &lt;Style ss:ID=\\&quot;Default\\&quot; ss:Name=\\&quot;Normal\\&quot;&gt;\\r\\n&quot; ); OutFileContent.Append( &quot; &lt;Alignment ss:Vertical=\\&quot;Center\\&quot; /&gt;\\r\\n&quot; ); OutFileContent.Append( &quot; &lt;Borders/&gt;\\r\\n&quot; ); OutFileContent.Append( &quot; &lt;Font ss:FontName=\\&quot;Ğ›ĞĞœĞµ\\&quot; x:CharSet=\\&quot;134\\&quot; ss:Size=\\&quot;12\\&quot;/&gt;\\r\\n&quot; ); OutFileContent.Append( &quot; &lt;Interior/&gt;\\r\\n&quot; ); OutFileContent.Append( &quot; &lt;NumberFormat/&gt;\\r\\n&quot; ); OutFileContent.Append( &quot; &lt;Protection/&gt;\\r\\n&quot; ); OutFileContent.Append( &quot; &lt;/Style&gt;\\r\\n&quot; ); OutFileContent.Append( &quot; &lt;Style ss:ID=\\&quot;s62\\&quot;&gt;\\r\\n&quot; ); OutFileContent.Append( &quot; &lt;Alignment ss:Vertical=\\&quot;Center\\&quot; ss:Horizontal=\\&quot;Center\\&quot; ss:WrapText=\\&quot;1\\&quot;/&gt;\\r\\n&quot; ); OutFileContent.Append( &quot; &lt;Font ss:FontName=\\&quot;Ğ›ĞĞœĞµ\\&quot; x:CharSet=\\&quot;134\\&quot; ss:Size=\\&quot;9\\&quot;/&gt;\\r\\n&quot; ); OutFileContent.Append( &quot; &lt;/Style&gt;\\r\\n&quot; ); OutFileContent.Append( &quot; &lt;Style ss:ID=\\&quot;s74\\&quot;&gt;\\r\\n&quot; ); OutFileContent.Append( &quot; &lt;Alignment ss:Horizontal=\\&quot;Center\\&quot; ss:Vertical=\\&quot;Center\\&quot;/&gt;\\r\\n&quot; ); OutFileContent.Append( &quot; &lt;Borders&gt;\\r\\n&quot; ); OutFileContent.Append( &quot; &lt;Border ss:Position=\\&quot;Bottom\\&quot; ss:LineStyle=\\&quot;Continuous\\&quot; ss:Weight=\\&quot;1\\&quot;/&gt;\\r\\n&quot; ); OutFileContent.Append( &quot; &lt;Border ss:Position=\\&quot;Left\\&quot; ss:LineStyle=\\&quot;Continuous\\&quot; ss:Weight=\\&quot;1\\&quot;/&gt;\\r\\n&quot; ); OutFileContent.Append( &quot; &lt;Border ss:Position=\\&quot;Right\\&quot; ss:LineStyle=\\&quot;Continuous\\&quot; ss:Weight=\\&quot;1\\&quot;/&gt;\\r\\n&quot; ); OutFileContent.Append( &quot; &lt;Border ss:Position=\\&quot;Top\\&quot; ss:LineStyle=\\&quot;Continuous\\&quot; ss:Weight=\\&quot;1\\&quot;/&gt;\\r\\n&quot; ); OutFileContent.Append( &quot; &lt;/Borders&gt;\\r\\n&quot; ); OutFileContent.Append( &quot; &lt;Font ss:FontName=\\&quot;Ğ›ĞĞœĞµ\\&quot; x:CharSet=\\&quot;134\\&quot; ss:Size=\\&quot;12\\&quot; ss:Bold=\\&quot;1\\&quot;/&gt;\\r\\n&quot; ); OutFileContent.Append( &quot; &lt;Interior ss:Color=\\&quot;#BFBFBF\\&quot; ss:Pattern=\\&quot;Solid\\&quot;/&gt;\\r\\n&quot; ); OutFileContent.Append( &quot; &lt;/Style&gt;\\r\\n&quot; ); OutFileContent.Append( &quot; &lt;/Styles&gt;\\r\\n&quot; ); OutFileContent.Append( &quot; &lt;Worksheet ss:Name=\\&quot;Sheet1\\&quot;&gt;\\r\\n&quot; ); OutFileContent.Append( &quot; &lt;Table ss:ExpandedColumnCount=\\&quot;255\\&quot; x:FullColumns=\\&quot;1\\&quot; \\r\\n&quot; ); OutFileContent.Append( &quot;x:FullRows=\\&quot;1\\&quot; ss:StyleID=\\&quot;s62\\&quot; ss:DefaultColumnWidth=\\&quot;75\\&quot; ss:DefaultRowHeight=\\&quot;20.25\\&quot;&gt;\\r\\n&quot; ); OutFileContent.Append( &quot;&lt;Column ss:StyleID=\\&quot;s62\\&quot; ss:AutoFitWidth=\\&quot;0\\&quot; ss:Width=\\&quot;112.5\\&quot;/&gt;\\r\\n&quot; ); return(OutFileContent); &#125; /* * / &lt;summary&gt; * / &lt;summary&gt; * / å†™è¡¨æ ¼å°¾éƒ¨ * / &lt;/summary&gt; * / &lt;param name=&quot;OutFileContent&quot;&gt;&lt;/param&gt; * / &lt;returns&gt;&lt;/returns&gt; */ private StringBuilder AddEndFile( StringBuilder OutFileContent ) &#123; OutFileContent.Append( &quot;&lt;/Table&gt;\\r\\n&quot; ); OutFileContent.Append( &quot;&lt;WorksheetOptions xmlns=\\&quot;urn:schemas-microsoft-com:office:excel\\&quot;&gt;\\r\\n&quot; ); OutFileContent.Append( &quot;&lt;Unsynced/&gt;\\r\\n&quot; ); OutFileContent.Append( &quot;&lt;Print&gt;\\r\\n&quot; ); OutFileContent.Append( &quot; &lt;ValidPrinterInfo/&gt;\\r\\n&quot; ); OutFileContent.Append( &quot; &lt;PaperSizeIndex&gt;9&lt;/PaperSizeIndex&gt;\\r\\n&quot; ); OutFileContent.Append( &quot; &lt;HorizontalResolution&gt;600&lt;/HorizontalResolution&gt;\\r\\n&quot; ); OutFileContent.Append( &quot; &lt;VerticalResolution&gt;0&lt;/VerticalResolution&gt;\\r\\n&quot; ); OutFileContent.Append( &quot;&lt;/Print&gt;\\r\\n&quot; ); OutFileContent.Append( &quot;&lt;Selected/&gt;\\r\\n&quot; ); OutFileContent.Append( &quot;&lt;Panes&gt;\\r\\n&quot; ); OutFileContent.Append( &quot; &lt;Pane&gt;\\r\\n&quot; ); OutFileContent.Append( &quot; &lt;Number&gt;3&lt;/Number&gt;\\r\\n&quot; ); OutFileContent.Append( &quot; &lt;RangeSelection&gt;R1:R65536&lt;/RangeSelection&gt;\\r\\n&quot; ); OutFileContent.Append( &quot; &lt;/Pane&gt;\\r\\n&quot; ); OutFileContent.Append( &quot;&lt;/Panes&gt;\\r\\n&quot; ); OutFileContent.Append( &quot;&lt;ProtectObjects&gt;False&lt;/ProtectObjects&gt;\\r\\n&quot; ); OutFileContent.Append( &quot;&lt;ProtectScenarios&gt;False&lt;/ProtectScenarios&gt;\\r\\n&quot; ); OutFileContent.Append( &quot;&lt;/WorksheetOptions&gt;\\r\\n&quot; ); OutFileContent.Append( &quot;&lt;/Worksheet&gt;\\r\\n&quot; ); OutFileContent.Append( &quot;&lt;Worksheet ss:Name=\\&quot;Sheet2\\&quot;&gt;\\r\\n&quot; ); OutFileContent.Append( &quot;&lt;Table ss:ExpandedColumnCount=\\&quot;1\\&quot; ss:ExpandedRowCount=\\&quot;1\\&quot; x:FullColumns=\\&quot;1\\&quot;\\r\\n&quot; ); OutFileContent.Append( &quot;x:FullRows=\\&quot;1\\&quot; ss:DefaultColumnWidth=\\&quot;54\\&quot; ss:DefaultRowHeight=\\&quot;14.25\\&quot;&gt;\\r\\n&quot; ); OutFileContent.Append( &quot;&lt;Row ss:AutoFitHeight=\\&quot;0\\&quot;/&gt;\\r\\n&quot; ); OutFileContent.Append( &quot;&lt;/Table&gt;\\r\\n&quot; ); OutFileContent.Append( &quot;&lt;WorksheetOptions xmlns=\\&quot;urn:schemas-microsoft-com:office:excel\\&quot;&gt;\\r\\n&quot; ); OutFileContent.Append( &quot;&lt;Unsynced/&gt;\\r\\n&quot; ); OutFileContent.Append( &quot;&lt;ProtectObjects&gt;False&lt;/ProtectObjects&gt;\\r\\n&quot; ); OutFileContent.Append( &quot;&lt;ProtectScenarios&gt;False&lt;/ProtectScenarios&gt;\\r\\n&quot; ); OutFileContent.Append( &quot;&lt;/WorksheetOptions&gt;\\r\\n&quot; ); OutFileContent.Append( &quot;&lt;/Worksheet&gt;\\r\\n&quot; ); OutFileContent.Append( &quot;&lt;Worksheet ss:Name=\\&quot;Sheet3\\&quot;&gt;\\r\\n&quot; ); OutFileContent.Append( &quot;&lt;Table ss:ExpandedColumnCount=\\&quot;1\\&quot; ss:ExpandedRowCount=\\&quot;1\\&quot; x:FullColumns=\\&quot;1\\&quot;\\r\\n&quot; ); OutFileContent.Append( &quot;x:FullRows=\\&quot;1\\&quot; ss:DefaultColumnWidth=\\&quot;54\\&quot; ss:DefaultRowHeight=\\&quot;14.25\\&quot;&gt;\\r\\n&quot; ); OutFileContent.Append( &quot;&lt;Row ss:AutoFitHeight=\\&quot;0\\&quot;/&gt;\\r\\n&quot; ); OutFileContent.Append( &quot;&lt;/Table&gt;\\r\\n&quot; ); OutFileContent.Append( &quot;&lt;WorksheetOptions xmlns=\\&quot;urn:schemas-microsoft-com:office:excel\\&quot;&gt;\\r\\n&quot; ); OutFileContent.Append( &quot;&lt;Unsynced/&gt;\\r\\n&quot; ); OutFileContent.Append( &quot;&lt;ProtectObjects&gt;False&lt;/ProtectObjects&gt;\\r\\n&quot; ); OutFileContent.Append( &quot;&lt;ProtectScenarios&gt;False&lt;/ProtectScenarios&gt;\\r\\n&quot; ); OutFileContent.Append( &quot;&lt;/WorksheetOptions&gt;\\r\\n&quot; ); OutFileContent.Append( &quot;&lt;/Worksheet&gt;\\r\\n&quot; ); OutFileContent.Append( &quot;&lt;/Workbook&gt;\\r\\n&quot; ); return(OutFileContent); &#125; private StringBuilder AddContentFile( StringBuilder OutFileContent, DataTable ds ) &#123; /* å†™åˆ—å¤´ */ OutFileContent.Append( &quot;&lt;Row ss:AutoFitHeight=\\&quot;0\\&quot;&gt;&quot; ); for ( int i = 0; i &lt; ds.Columns.Count; i++ ) &#123; OutFileContent.Append( &quot;&lt;Cell&gt;&lt;Data ss:Type=\\&quot;String\\&quot;&gt;&quot; + ds.Columns[i].ColumnName + &quot;&lt;/Data&gt;&lt;/Cell&gt;&quot; ); &#125; OutFileContent.Append( &quot;&lt;/Row&gt;&quot; ); /* å†™å†…å®¹ */ foreach ( DataRow row in ds.Rows ) &#123; OutFileContent.Append( &quot;&lt;Row ss:AutoFitHeight=\\&quot;0\\&quot;&gt;&quot; ); for ( int i = 0; i &lt; ds.Columns.Count; i++ ) &#123; OutFileContent.Append( &quot;&lt;Cell&gt;&lt;Data ss:Type=\\&quot;String\\&quot;&gt;&quot; + row[i].ToString() + &quot;&lt;/Data&gt;&lt;/Cell&gt;&quot; ); &#125; OutFileContent.Append( &quot;&lt;/Row&gt;&quot; ); &#125; return(OutFileContent); &#125;&#125; å¦å¤–è¿˜çŸ¥é“çš„ä¸¤ä¸ªæ–¹æ³•openxmlå’ŒEPPLUS","tags":[{"name":"è®¾è®¡æ¨¡å¼","slug":"è®¾è®¡æ¨¡å¼","permalink":"https://joker208.github.io/tags/è®¾è®¡æ¨¡å¼/"}]},{"title":"è®¾è®¡æ¨¡å¼åˆæ¢ä¹‹å•ä¾‹æ¨¡å¼","date":"2017-03-16T06:02:01.000Z","path":"2017/03/16/è®¾è®¡æ¨¡å¼åˆæ¢ä¹‹å•ä¾‹æ¨¡å¼/","text":"å•ä¾‹æ¨¡å¼ å®šä¹‰ ä¿è¯ä¸€ä¸ªç±»ä»…æœ‰ä¸€ä¸ªå®ä¾‹ï¼Œå¹¶æä¾›ä¸€ä¸ªè®¿é—®å®ƒçš„å…¨å±€è®¿é—®ç‚¹ ç›®çš„ å•ä¾‹æ¨¡å¼çš„ç›®çš„å°±æ˜¯è¦æ§åˆ¶ç‰¹å®šçš„ç±»åªäº§ç”Ÿä¸€ä¸ªå¯¹è±¡ï¼Œå½“ç„¶ä¹Ÿå…è®¸åœ¨ä¸€å®šæƒ…å†µä¸‹çµæ´»çš„æ”¹å˜å¯¹è±¡çš„ä¸ªæ•° ç‰¹ç‚¹ å•ä¾‹ç±»åªèƒ½æœ‰ä¸€ä¸ªå®ä¾‹ å•ä¾‹ç±»å¿…é¡»è‡ªå·±åˆ›å»ºè‡ªå·±çš„å”¯ä¸€å®ä¾‹ å•ä¾‹ç±»å¿…é¡»ç»™æ‰€æœ‰å…¶å®ƒå¯¹è±¡æä¾›è¿™ä¸€å®ä¾‹ åº”ç”¨ æ¯å°è®¡ç®—æœºå¯ä»¥æœ‰è‹¥å¹²ä¸ªæ‰“å°æœºï¼Œä½†åªèƒ½æœ‰ä¸€ä¸ªPrinter Spoolerï¼Œé¿å…ä¸¤ä¸ªæ‰“å°ä½œä¸šåŒæ—¶è¾“å‡ºåˆ°æ‰“å°æœº ä¸€ä¸ªå…·æœ‰è‡ªåŠ¨ç¼–å·ä¸»é”®çš„è¡¨å¯ä»¥æœ‰å¤šä¸ªç”¨æˆ·åŒæ—¶ä½¿ç”¨ï¼Œä½†æ•°æ®åº“ä¸­åªèƒ½æœ‰ä¸€ä¸ªåœ°æ–¹åˆ†é…ä¸‹ä¸€ä¸ªä¸»é”®ç¼–å·ï¼Œå¦åˆ™ä¼šå‡ºç°ä¸»é”®é‡å¤ ä¸‹é¢çš„æ˜¯C#ä¸­å•ä¾‹æ¨¡å¼çš„ä¸‰ç§å†™æ³• 1234567891011121314151617181920212223242526272829303132333435363738394041424344public class Singleton1&#123; private static Singleton1 _instance = null; private Singleton1() &#123; &#125; public static Singleton1 CreateInstance() &#123; if ( _instance == null ) &#123; _instance = new Singleton1(); &#125; return(_instance); &#125;&#125;public class Singleton2&#123; private volatile static Singleton2 _instance = null; private static readonly object lockHelper = new object(); private Singleton2() &#123; &#125; public static Singleton2 CreateInstance() &#123; if ( _instance == null ) &#123; lock ( lockHelper ) &#123; if ( _instance == null ) _instance = new Singleton2(); &#125; &#125; return(_instance); &#125;&#125;sealed class Singleton3&#123; private Singleton3() &#123; &#125; public static readonly Singleton3 instance = new Singleton3();&#125; å…¶ä¸­ç¬¬ä¸‰ç§å®ç°æ–¹æ³•ä¸ºC#ä¸­ç‹¬æœ‰çš„ ä½¿å¾—ä»£ç å‡å°‘äº†è®¸å¤šï¼ŒåŒæ—¶ä¹Ÿè§£å†³äº†çº¿ç¨‹é—®é¢˜å¸¦æ¥çš„æ€§èƒ½ä¸ŠæŸå¤± å®ƒçš„å·¥ä½œåŸç†åˆæ˜¯ä»€ä¹ˆå‘¢ï¼Ÿ Singletonç±»è¢«å£°æ˜ä¸ºsealedï¼Œä»¥æ­¤ä¿è¯å®ƒè‡ªå·±ä¸ä¼šè¢«ç»§æ‰¿å…¶æ¬¡æ²¡æœ‰äº†Instanceçš„æ–¹æ³•ï¼Œå°†åŸæ¥_instanceæˆå‘˜å˜é‡å˜æˆpublic readonlyï¼Œå¹¶åœ¨å£°æ˜æ—¶è¢«åˆå§‹åŒ–é€šè¿‡è¿™äº›æ”¹å˜ï¼Œæˆ‘ä»¬ç¡®å®å¾—åˆ°äº†Singletonçš„æ¨¡å¼ï¼ŒåŸå› æ˜¯åœ¨JITçš„å¤„ç†è¿‡ç¨‹ä¸­å¦‚æœç±»ä¸­çš„staticå±æ€§è¢«ä»»ä½•æ–¹æ³•ä½¿ç”¨æ—¶ï¼Œ.NET Frameworkå°†å¯¹è¿™ä¸ªå±æ€§è¿›è¡Œåˆå§‹åŒ–äºæ˜¯åœ¨åˆå§‹åŒ–Instanceå±æ€§çš„åŒæ—¶Singletonç±»å®ä¾‹å¾—ä»¥åˆ›å»ºå’Œè£…è½½è€Œç§æœ‰çš„æ„é€ å‡½æ•°å’Œreadonly(åªè¯»)ä¿è¯äº†Singletonä¸ä¼šè¢«å†æ¬¡å®ä¾‹åŒ–è¿™æ­£æ˜¯Singletonè®¾è®¡æ¨¡å¼çš„æ„å›¾ ä¸è¿‡è¿™ä¹Ÿå¸¦æ¥äº†ä¸€äº›é—®é¢˜ï¼Œæ¯”å¦‚æ— æ³•ç»§æ‰¿ï¼Œå®ä¾‹åœ¨ç¨‹åºä¸€è¿è¡Œå°±è¢«åˆå§‹åŒ–ï¼Œæ— æ³•å®ç°å»¶è¿Ÿåˆå§‹åŒ–ç­‰ å•åˆ©æ¨¡å¼å°±å…ˆä»‹ç»åˆ°è¿™é‡Œï¼Œä»¥åè¿˜ä¼šç»§ç»­è¡¥å……ï¼Œå¸Œæœ›å¤§å®¶å¤šææ„è§ãƒ½(ï¿£Ï‰ï¿£(ï¿£Ï‰ï¿£ã€ƒ)ã‚ æ–‡ç« å‚è€ƒ ã€Šæ·±å…¥æµ…å‡ºè®¾è®¡æ¨¡å¼ã€‹ ä»c#çš„singletonè®¾è®¡æ¨¡å¼ c#è®¾è®¡æ¨¡å¼-å•ä¾‹æ¨¡å¼","tags":[{"name":"è®¾è®¡æ¨¡å¼","slug":"è®¾è®¡æ¨¡å¼","permalink":"https://joker208.github.io/tags/è®¾è®¡æ¨¡å¼/"}]},{"title":".NETéªŒè¯ç ","date":"2017-03-01T07:56:27.000Z","path":"2017/03/01/netéªŒè¯ç /","text":"ç½‘ä¸Šçš„éªŒè¯ç æ€»æ˜¯ä¸å¤ªå¥½ç”¨ æœ€è¿‘å…¬å¸åšçš„ä¸€ä¸ªç½‘ç«™è¢«ç”¨ä½œçŸ­ä¿¡è½°ç‚¸ éœ€è¦åŠ ä¸Šå›¾ç‰‡éªŒè¯ç  åˆ†äº«ä¸€ä¸‹.NETéªŒè¯ç çš„Demo ä¹Ÿç®—åšä¸ªå¤‡ä»½ï¼Œ(à¹‘â€¢Ì€ã…‚â€¢Ì)Ùˆâœ§ validatecode.aspx1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556575859606162636465666768697071727374757677787980818283&lt;%@ WebHandler Language=&quot;C#&quot; Class=&quot;validatecode&quot; %&gt;using System;using System.Web;using System.Drawing;public class validatecode : IHttpHandler, System.Web.SessionState.IRequiresSessionState&#123; public string charSet = &quot;0,1,2,3,4,5,6,8,9,A,B,C,D,E,F,G,H,J,K,M,N,P,R,S,U,W,X,Y&quot;; public void ProcessRequest(HttpContext context) &#123; string validateCode = CreateRandomCode(4); context.Session[&quot;ValidateCode&quot;] = validateCode; context.Response.SetCookie(new HttpCookie(&quot;ValidateCode&quot;, validateCode)); CreateImage(validateCode, context); &#125; public bool IsReusable &#123; get &#123; return false; &#125; &#125; /// &lt;summary&gt; /// ç”ŸæˆéªŒè¯ç  /// &lt;param name=&quot;n&quot;&gt;ä½æ•°&lt;/param&gt; /// &lt;returns&gt;éªŒè¯ç å­—ç¬¦ä¸²&lt;/returns&gt; private string CreateRandomCode(int n) &#123; string[] CharArray = charSet.Split(&apos;,&apos;); string randomCode = &quot;&quot;; int temp = -1; Random rand = new Random(); for (int i = 0; i &lt; n; i++) &#123; if (temp != -1) &#123; rand = new Random(i * temp * ((int)DateTime.Now.Ticks)); &#125; int t = rand.Next(CharArray.Length - 1); if (temp == t) &#123; return CreateRandomCode(n); &#125; temp = t; randomCode += CharArray[t]; &#125; return randomCode; &#125; private void CreateImage(string checkCode, HttpContext context) &#123; int iwidth = (int)(checkCode.Length * 13); System.Drawing.Bitmap image = new System.Drawing.Bitmap(iwidth, 23); Graphics g = Graphics.FromImage(image); Font f = new System.Drawing.Font(&quot;Arial&quot;, 12, (System.Drawing.FontStyle.Italic | System.Drawing.FontStyle.Bold)); // å‰æ™¯è‰² Brush b = new System.Drawing.SolidBrush(Color.Black); // èƒŒæ™¯è‰² g.Clear(Color.White); // å¡«å……æ–‡å­— g.DrawString(checkCode, f, b, 0, 1); // éšæœºçº¿æ¡ Pen linePen = new Pen(Color.Gray, 0); Random rand = new Random(); for (int i = 0; i &lt; 5; i++) &#123; int x1 = rand.Next(image.Width); int y1 = rand.Next(image.Height); int x2 = rand.Next(image.Width); int y2 = rand.Next(image.Height); g.DrawLine(linePen, x1, y1, x2, y2); &#125; // éšæœºç‚¹ for (int i = 0; i &lt; 30; i++) &#123; int x = rand.Next(image.Width); int y = rand.Next(image.Height); image.SetPixel(x, y, Color.Gray); &#125; // è¾¹æ¡† g.DrawRectangle(new Pen(Color.Gray), 0, 0, image.Width - 1, image.Height - 1); // è¾“å‡ºå›¾ç‰‡ System.IO.MemoryStream ms = new System.IO.MemoryStream(); image.Save(ms, System.Drawing.Imaging.ImageFormat.Jpeg); context.Response.ClearContent(); context.Response.ContentType = &quot;image/Jpeg&quot;; context.Response.BinaryWrite(ms.ToArray()); g.Dispose(); image.Dispose(); &#125;&#125; index.aspx123456789101112131415161718192021222324&lt;span&gt;éªŒè¯ç ï¼š&lt;/span&gt;&lt;input type=&quot;text&quot; id=&quot;input&quot; /&gt;&lt;a href=&quot;javascript:;&quot;&gt; &lt;img src=&quot;validatecode.ashx&quot; id=&quot;codeImg&quot; onclick=&quot;this.src=&apos;validatecode.ashx?time=&apos;+new Date().getTime()&quot;&gt;&lt;/a&gt;&lt;a class=&quot;submit&quot;&gt;æäº¤&lt;/a&gt;&lt;script type=&quot;text/javascript&quot;&gt; $(&quot;.submit&quot;).click(function()&#123; if ($(&quot;#input&quot;).val().toUpperCase().trim() != GetCookie(&quot;ValidateCode&quot;)) &#123; $(&quot;#codeImg&quot;).attr(&quot;src&quot;, &quot;validatecode.ashx?time=&quot; + new Date().getTime()); alert(&quot;éªŒè¯ç é”™è¯¯&quot;); return; &#125; else &#123; alert(&quot;éªŒè¯ç æ­£ç¡®&quot;); return; &#125; &#125;) function GetCookie(sMainName) &#123; var re = new RegExp((sMainName + &quot;=([^;$]*)&quot;), &quot;i&quot;); return re.test(unescape(document.cookie)) ? RegExp[&quot;$1&quot;] : &quot;&quot;; &#125;&lt;/script&gt;","tags":[{"name":".NET","slug":"NET","permalink":"https://joker208.github.io/tags/NET/"},{"name":"éªŒè¯ç ","slug":"éªŒè¯ç ","permalink":"https://joker208.github.io/tags/éªŒè¯ç /"}]},{"title":"è®¾è®¡æ¨¡å¼åˆæ¢","date":"2017-02-21T10:03:54.000Z","path":"2017/02/21/è®¾è®¡æ¨¡å¼åˆæ¢/","text":"å‰è¨€åˆšåˆ°å…¬å¸æ—¶ æˆ‘å°±å‘æˆ‘ä»¬çš„ä¸»ç®¡æœå“¥é—®è¿‡ä¸€ä¸ªé—®é¢˜ ä»æˆ‘è¿™æ ·çš„åˆçº§å¼€å‘åˆ°æ‚¨è¿™æ ·çš„å¼€å‘å¤§ç‰›éƒ½éœ€è¦å­¦ä¹ äº›ä»€ä¹ˆï¼Ÿ æ˜¯éœ€è¦çŸ¥é“æ¯”å¦‚è¯´clrè¿™äº›åº•å±‚çš„ä¸œè¥¿å—ï¼Ÿ æœå“¥è¯´ï¼Œä½ å…ˆå»çœ‹çœ‹è®¾è®¡æ¨¡å¼å§ äºæ˜¯æœæ–­å¼€å§‹ç ”ç©¶â€œè®¾è®¡æ¨¡å¼â€ å…ˆä»åŸºæœ¬çš„æ¦‚å¿µè¯´èµ·~ æ¨¡å¼â€œè®¾è®¡æ¨¡å¼â€çš„æ¦‚å¿µæ˜¯ä»â€œæ¨¡å¼â€è¿™ä¸ªè¯å¼•ç”¨è¿‡æ¥çš„ â€œæ¨¡å¼â€ä¸€æ¬¡æœ€æ—©åº”ç”¨äºå»ºç­‘å­¦ Christopher Alexanderï¼Œå“ˆä½›å¤§å­¦å»ºç­‘å­¦åšå£«ä»–å’Œä»–çš„å›¢é˜Ÿç”¨20å¹´çš„æ—¶é—´å¯¹ä½å®…å’Œå‘¨è¾¹ç¯å¢ƒè¿›è¡Œç ”ç©¶å‘ç°äººä»¬å¯¹èˆ’é€‚ä½å®…å’ŒåŸå¸‚ç¯å¢ƒå­˜åœ¨ä¸€äº›å…±åŒçš„è®¤åŒè§„å¾‹å¹¶æŠŠè¿™äº›è®¤åŒè§„å¾‹å½’çº³ä¸º253ä¸ªæ¨¡å¼ æ¨¡å¼æ˜¯åœ¨ç‰¹å®šç¯å¢ƒä¸‹äººä»¬è§£å†³æŸç±»é‡å¤å‡ºç°é—®é¢˜çš„ä¸€å¥—æˆåŠŸæˆ–æœ‰æ•ˆçš„è§£å†³æ–¹æ¡ˆ è®¾è®¡æ¨¡å¼GoF(Gang of Four)(Erich Gammaã€Richard Helmã€Ralph Johnsonã€John Vlissides)å°†æ¨¡å¼çš„æ¦‚å¿µå¼•å…¥è½¯ä»¶å·¥ç¨‹é¢†åŸŸï¼Œæ ‡å¿—ç€è½¯ä»¶æ¨¡å¼çš„è¯ç”Ÿã€‚ è®¾è®¡æ¨¡å¼æ˜¯ä¸€å¥—è¢«åå¤ä½¿ç”¨ã€å¤šæ•°äººçŸ¥æ™“çš„ã€ç»è¿‡åˆ†ç±»ç¼–ç›®çš„ã€ä»£ç è®¾è®¡ç»éªŒçš„æ€»ç»“ä½¿ç”¨è®¾è®¡æ¨¡å¼æ˜¯ä¸ºäº†å¯é‡ç”¨ä»£ç ã€è®©ä»£ç å…±å®¹æ˜“è¢«ä»–äººç†è§£å¹¶ä¸”ä¿è¯ä»£ç å¯é æ€§","tags":[{"name":"è®¾è®¡æ¨¡å¼","slug":"è®¾è®¡æ¨¡å¼","permalink":"https://joker208.github.io/tags/è®¾è®¡æ¨¡å¼/"}]},{"title":"è®¾è®¡æ¨¡å¼åˆæ¢ä¹‹å·¥å‚æ¨¡å¼","date":"2017-02-21T10:03:54.000Z","path":"2017/02/21/è®¾è®¡æ¨¡å¼åˆæ¢ä¹‹å·¥å‚æ¨¡å¼/","text":"è®¾è®¡æ¨¡å¼æ˜¯å¾ˆæŠ½è±¡çš„ä¸œè¥¿ æ˜¯å„ä½ç¼–ç¨‹å±Šå‰è¾ˆä¸æ–­å®è·µæ€»ç»“ï¼Œä¸æ–­æ¢ç´¢å‡ºæ¥çš„ æ˜¯è§„åˆ™ æ˜¯ç»éªŒ å¤ªæŠ½è±¡çš„ä¸œè¥¿å¾€å¾€ä¸å®¹æ˜“ç†è§£ é‚£ä¹ˆå°±ç”¨ç®€å•çš„äº‹ä¾‹æ¥æŠŠæŠ½è±¡çš„ä¸œè¥¿å…·ä½“åŒ– æ•…äº‹è¦ä»å¾ˆä¹…å¾ˆä¹…ä»¥å‰è¯´èµ· (ï¿£oï¿£) . z Z è¯è¯´æœ‰ä¸€ä¸ªæš´å‘æˆ·ä»–å®¶æœ‰ä¸‰è¾†æ±½è½¦â€”â€”Benz å¥”é©°ã€ Bmw å®é©¬ã€ Audi å¥¥è¿ªè¿˜é›‡äº†å¸æœºä¸ºä»–å¼€è½¦ä¸è¿‡ï¼Œæš´å‘æˆ·åè½¦æ—¶æ€»æ˜¯æ€ªæ€ªçš„ä¸Š Benz è½¦åè·Ÿå¸æœºè¯´â€œå¼€å¥”é©°è½¦ï¼â€åä¸Š Bmw åä»–è¯´â€œå¼€å®é©¬è½¦ï¼ â€åä¸Š Audi è¯´â€œå¼€å¥¥è¿ªè½¦ï¼ â€ä½ ä¸€å®šè¯´ï¼šè¿™äººæœ‰ç—…ï¼ç›´æ¥è¯´å¼€è½¦ä¸å°±è¡Œäº†ï¼Ÿï¼è€Œå½“æŠŠè¿™ä¸ªæš´å‘æˆ·çš„è¡Œä¸ºæ”¾åˆ°æˆ‘ä»¬ç¨‹åºè®¾è®¡ä¸­æ¥æ—¶ä¼šå‘ç°è¿™æ˜¯ä¸€ä¸ªæ™®éå­˜åœ¨çš„ç°è±¡ ç”¨ä»£ç è¡¨ç°å‡ºæ¥å°±æ˜¯è¿™æ ·è‰²å„¿åœ° 12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455565758/* æŠ½è±¡äº§å“è§’è‰² */public interface Car &#123; void drive();&#125;/* å…·ä½“äº§å“è§’è‰² */public class Benz : Car &#123; public void drive() &#123; Console.WriteLine( &quot;Driving Benz&quot; ); &#125;&#125;public class Bmw : Car &#123; public void drive() &#123; Console.WriteLine( &quot;Driving Bmw&quot; ); &#125;&#125;public class Audi : Car &#123; public void drive() &#123; Console.WriteLine( &quot;Driving Audi&quot; ); &#125;&#125;/* å·¥å‚ç±»è§’è‰² */public class Driver &#123; public static Car driverCar( String s ) &#123; if ( s == &quot;Benz&quot; ) return(new Benz() ); else if ( s == &quot;Bmw&quot; ) return(new Bmw() ); else if ( s == &quot;Audi&quot; ) return(new Audi() ); else throw new Exception(); &#125;&#125;class Program&#123; static void Main( string[] args ) &#123; try &#123; /* å‘Šè¯‰å¸æœºä»Šå¤©åå¥”é©° */ Car car = Driver.driverCar( &quot;Benz&quot; ); /*ä¸‹å‘½ä»¤ï¼šå¼€è½¦ */ car.drive(); &#125; catch ( Exception e ) &#123; Console.WriteLine( e ); &#125; finally &#123; Console.ReadKey(); &#125; &#125;&#125; å·¥å‚æ¨¡å¼å·¥å‚æ¨¡å¼ä¸»è¦æ˜¯ä¸ºåˆ›å»ºå¯¹è±¡æä¾›è¿‡æ¸¡æ¥å£ ä»¥ä¾¿å°†åˆ›å»ºå¯¹è±¡çš„å…·ä½“è¿‡ç¨‹å±è”½éš”ç¦»èµ·æ¥ è¾¾åˆ°æé«˜çµæ´»æ€§çš„ç›®çš„ å·¥å‚æ¨¡å¼å¯åˆ†ä¸ºä¸‰ç§åˆ†åˆ«æ˜¯ ç®€å•å·¥å‚æ¨¡å¼ å·¥å‚æ–¹æ³•æ¨¡å¼ æŠ½è±¡å·¥å‚æ¨¡å¼ ç®€å•å·¥å‚æ¨¡å¼ å®šä¹‰ ç®€å•å·¥å‚æ¨¡å¼åˆç§°é™æ€å·¥å‚æ–¹æ³•æ¨¡å¼ å®šä¹‰ä¸€ä¸ªç”¨äºåˆ›å»ºå¯¹è±¡çš„æ¥å£ ç»„æˆ å·¥å‚ç±»è§’è‰²ï¼šè¿™æ˜¯æœ¬æ¨¡å¼çš„æ ¸å¿ƒï¼Œå«æœ‰ä¸€å®šçš„å•†ä¸šé€»è¾‘å’Œåˆ¤æ–­é€»è¾‘ æŠ½è±¡äº§å“è§’è‰²ï¼šå®ƒä¸€èˆ¬æ˜¯å…·ä½“äº§å“ç»§æ‰¿çš„çˆ¶ç±»æˆ–è€…å®ç°çš„æ¥å£ å…·ä½“äº§å“è§’è‰²ï¼šå·¥å‚ç±»æ‰€åˆ›å»ºçš„å¯¹è±¡å°±æ˜¯æ­¤è§’è‰²çš„å®ä¾‹ ç¼ºé™·åˆ†æ å¯¹äº§å“éƒ¨åˆ†æ¥è¯´ï¼Œå®ƒæ˜¯ç¬¦åˆå¼€é—­åŸåˆ™çš„ ä½†æ˜¯å·¥å‚éƒ¨åˆ†å¥½åƒä¸å¤ªç†æƒ³ï¼Œå› ä¸ºæ¯å¢åŠ ä¸€è¾†è½¦ï¼Œéƒ½è¦åœ¨å·¥å‚ç±»ä¸­å¢åŠ ç›¸åº”çš„ä¸šåŠ¡é€»è¾‘æˆ–è€…åˆ¤æ–­é€»è¾‘ï¼Œè¿™æ˜¾ç„¶æ˜¯è¿èƒŒå¼€é—­åŸåˆ™çš„ å¯æƒ³è€ŒçŸ¥å¯¹äºæ–°äº§å“çš„åŠ å…¥ï¼Œå·¥å‚ç±»æ˜¯å¾ˆè¢«åŠ¨çš„ å·¥å‚æ–¹æ³•æ¨¡å¼æˆ‘ä»¬æ¥ç»§ç»­è®²æ•…äº‹ æš´å‘æˆ·ç”Ÿæ„è¶Šåšè¶Šå¤§ï¼Œè‡ªå·±çš„çˆ±è½¦ä¹Ÿè¶Šæ¥è¶Šå¤šã€‚è¿™å¯è‹¦äº†é‚£ä½å¸æœºå¸ˆå‚…äº†ï¼Œä»€ä¹ˆè½¦å®ƒéƒ½è¦è®°å¾—ï¼Œç»´æŠ¤ï¼Œéƒ½è¦ç»è¿‡ä»–æ¥ä½¿ç”¨ äºæ˜¯æš´å‘æˆ·åŒæƒ…ä»–è¯´ï¼šçœ‹ä½ è·Ÿæˆ‘è¿™ä¹ˆå¤šå¹´çš„ä»½ä¸Šï¼Œä»¥åä½ ä¸ç”¨è¿™ä¹ˆè¾›è‹¦äº†ï¼Œæˆ‘ç»™ä½ åˆ†é…å‡ ä¸ªäººæ‰‹ï¼Œä½ åªç®¡ç®¡å¥½ä»–ä»¬å°±è¡Œäº†ï¼ äºæ˜¯ï¼Œå·¥å‚æ–¹æ³•æ¨¡å¼çš„ç®¡ç†å‡ºç°äº† 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556575859606162636465666768697071/* æŠ½è±¡äº§å“è§’è‰² */public interface Car&#123; void drive();&#125;/* å…·ä½“äº§å“è§’è‰² */public class Benz : Car&#123; public void drive() &#123; Console.WriteLine( &quot;Driving Benz&quot; ); &#125;&#125;public class Bmw : Car&#123; public void drive() &#123; Console.WriteLine( &quot;Driving Bmw&quot; ); &#125;&#125;public class Audi : Car&#123; public void drive() &#123; Console.WriteLine( &quot;Driving Audi&quot; ); &#125;&#125;/* æŠ½è±¡å·¥å‚è§’è‰² */public interface Driver &#123; Car driverCar();&#125;public class BenzDriver : Driver &#123; public Car driverCar() &#123; return(new Benz() ); &#125;&#125;public class BmwDriver : Driver &#123; public Car driverCar() &#123; return(new Bmw() ); &#125;&#125;public class AudiDriver : Driver &#123; public Car driverCar() &#123; return(new Audi() ); &#125;&#125;class Program&#123; static void Main( string[] args ) &#123; try &#123; Driver driver = new BenzDriver(); /* å‘Šè¯‰å¸æœºåå¥”é©° */ Car car = driver.driverCar(); /*ä¸‹å‘½ä»¤ å¼€è½¦ */ car.drive(); &#125; catch ( Exception e ) &#123; Console.WriteLine( e ); &#125; finally &#123; Console.ReadKey(); &#125; &#125;&#125; ç›®çš„ å·¥å‚æ–¹æ³•æ¨¡å¼å»æ‰äº†ç®€å•å·¥å‚æ¨¡å¼ä¸­å·¥å‚æ–¹æ³•çš„é™æ€å±æ€§ï¼Œä½¿å¾—å®ƒå¯ä»¥è¢«å­ç±»ç»§æ‰¿ è¿™æ ·åœ¨ç®€å•å·¥å‚æ¨¡å¼é‡Œé›†ä¸­åœ¨å·¥å‚æ–¹æ³•ä¸Šçš„å‹åŠ›å¯ä»¥ç”±å·¥å‚æ–¹æ³•æ¨¡å¼é‡Œä¸åŒçš„å·¥å‚å­ç±»æ¥åˆ†æ‹… ç»„æˆ æŠ½è±¡å·¥å‚è§’è‰²ï¼š è¿™æ˜¯å·¥å‚æ–¹æ³•æ¨¡å¼çš„æ ¸å¿ƒï¼Œå®ƒä¸åº”ç”¨ç¨‹åºæ— å…³ å…·ä½“å·¥å‚è§’è‰²ï¼šå®ƒå«æœ‰å’Œå…·ä½“ä¸šåŠ¡é€»è¾‘æœ‰å…³çš„ä»£ç ï¼Œç”±åº”ç”¨ç¨‹åºè°ƒç”¨ä»¥åˆ›å»ºå¯¹åº”çš„å…·ä½“äº§å“çš„å¯¹è±¡ æŠ½è±¡äº§å“è§’è‰²ï¼šå®ƒæ˜¯å…·ä½“äº§å“ç»§æ‰¿çš„çˆ¶ç±»æˆ–è€…æ˜¯å®ç°çš„æ¥å£ å…·ä½“äº§å“è§’è‰²ï¼šå…·ä½“å·¥å‚è§’è‰²æ‰€åˆ›å»ºçš„å¯¹è±¡å°±æ˜¯æ­¤è§’è‰²çš„å®ä¾‹ é€‚ç”¨èŒƒå›´ å½“å®¢æˆ·ç¨‹åºä¸éœ€è¦çŸ¥é“è¦ä½¿ç”¨å¯¹è±¡çš„åˆ›å»ºè¿‡ç¨‹ å®¢æˆ·ç¨‹åºä½¿ç”¨çš„å¯¹è±¡å­˜åœ¨å˜åŠ¨çš„å¯èƒ½ï¼Œæˆ–è€…æ ¹æœ¬å°±ä¸çŸ¥é“ä½¿ç”¨å“ªä¸€ä¸ªå…·ä½“çš„å¯¹è±¡ æŠ½è±¡å·¥å‚æ¨¡å¼ ç›®çš„ ç»™å®¢æˆ·ç«¯æä¾›ä¸€ä¸ªæ¥å£ï¼Œå¯ä»¥åˆ›å»ºå¤šä¸ªäº§å“æ—ä¸­çš„äº§å“å¯¹è±¡ï¼Œè€Œä¸”ä½¿ç”¨æŠ½è±¡å·¥å‚æ¨¡å¼è¿˜è¦æ»¡è¶³ä¸€ä¸‹æ¡ä»¶ï¼š 1) ç³»ç»Ÿä¸­æœ‰å¤šä¸ªäº§å“æ—ï¼Œè€Œç³»ç»Ÿä¸€æ¬¡åªå¯èƒ½æ¶ˆè´¹å…¶ä¸­ä¸€æ—äº§å“ 2) åŒå±äºåŒä¸€ä¸ªäº§å“æ—çš„äº§å“ä»¥å…¶ä½¿ç”¨ ç»„æˆ æŠ½è±¡å·¥å‚è§’è‰²ï¼š è¿™æ˜¯å·¥å‚æ–¹æ³•æ¨¡å¼çš„æ ¸å¿ƒï¼Œå®ƒä¸åº”ç”¨ç¨‹åºæ— å…³ å…·ä½“å·¥å‚è§’è‰²ï¼šå®ƒå«æœ‰å’Œå…·ä½“ä¸šåŠ¡é€»è¾‘æœ‰å…³çš„ä»£ç ï¼Œç”±åº”ç”¨ç¨‹åºè°ƒç”¨ä»¥åˆ›å»ºå¯¹åº”çš„å…·ä½“äº§å“çš„å¯¹è±¡ æŠ½è±¡äº§å“è§’è‰²ï¼šå®ƒæ˜¯å…·ä½“äº§å“ç»§æ‰¿çš„çˆ¶ç±»æˆ–è€…æ˜¯å®ç°çš„æ¥å£ å…·ä½“äº§å“è§’è‰²ï¼šå…·ä½“å·¥å‚è§’è‰²æ‰€åˆ›å»ºçš„å¯¹è±¡å°±æ˜¯æ­¤è§’è‰²çš„å®ä¾‹ å·¥å‚æ¨¡å¼åŒºåˆ«ç®€å•å·¥å‚æ¨¡å¼ï¼š ç”¨æ¥ç”Ÿäº§åŒä¸€ç­‰çº§ç»“æ„ä¸­çš„ä»»æ„äº§å“ï¼ˆå¯¹äºå¢åŠ æ–°çš„äº§å“ï¼Œæ— èƒ½ä¸ºåŠ›ï¼‰ å·¥å‚æ–¹æ³•æ¨¡å¼ï¼šç”¨æ¥ç”Ÿäº§åŒä¸€ç­‰çº§ç»“æ„ä¸­çš„å›ºå®šäº§å“ï¼ˆæ”¯æŒå¢åŠ ä»»æ„äº§å“ï¼‰ æŠ½è±¡å·¥å‚æ¨¡å¼ ï¼šç”¨æ¥ç”Ÿäº§ä¸åŒäº§å“æ—çš„å…¨éƒ¨äº§å“ï¼ˆå¯¹äºå¢åŠ æ–°çš„äº§å“ï¼Œæ— èƒ½ä¸ºåŠ›ï¼›æ”¯æŒå¢åŠ äº§å“æ—ï¼‰ å‚è€ƒæ–‡ç«  ã€Šæ·±å…¥æµ…å‡ºè®¾è®¡æ¨¡å¼ã€‹","tags":[{"name":"è®¾è®¡æ¨¡å¼","slug":"è®¾è®¡æ¨¡å¼","permalink":"https://joker208.github.io/tags/è®¾è®¡æ¨¡å¼/"}]},{"title":"ä½ è§è¿‡æœ€ä¸æ±‚ä¸Šè¿›çš„äººæ˜¯ä»€ä¹ˆæ ·å­ï¼Ÿ","date":"2017-02-20T14:51:02.000Z","path":"2017/02/20/ä½ è§è¿‡æœ€ä¸æ±‚ä¸Šè¿›çš„äººæ˜¯ä»€ä¹ˆæ ·å­ï¼Ÿ/","text":"ä»Šå¤©åœ¨çŸ¥ä¹çœ‹åˆ°@å¸ƒè¡£å¿å…³äºè¿™ä¸ªé—®é¢˜çš„å›ç­” æˆ‘æƒ³æ‹¿è¿‡æ¥æ”¾åœ¨é¦–é¡µï¼Œæ—¶æ—¶æƒŠé†’ å…±å‹‰æˆ‘è§è¿‡çš„æœ€ä¸æ±‚ä¸Šè¿›çš„äººï¼Œæ—¢ä¸æ˜¯å­¦éœ¸åˆä¸å…¨ç®—å­¦æ¸£ã€‚ ä»–ä»¬è¯¾å¬çš„è¿·è¿·ç³Šç³Šï¼Œä½œä¸šåšä¸€äº›æŠ„ä¸€äº›ã€‚ æƒ³é€ƒè¯¾åˆå¿ƒå­˜é¡¾å¿Œï¼Œè¡Œä¸ºä¹Ÿä¸å…¬å¼€å¯¹æŠ—è§„èŒƒçºªå¾‹ã€‚ ä¸ºç°çŠ¶ç„¦è™‘ï¼Œåˆæ²¡æœ‰æ¯…åŠ›è·µè¡Œå†³å¿ƒå»æ”¹å˜è‡ªå·±ã€‚ ä¸‰åˆ†é’Ÿçƒ­åº¦ï¼Œæ—¶å¸¸æ†æ¶è‡ªå·±çš„ä¸äº‰æ°”ï¼ŒåšæŒæœ€å¤šçš„äº‹æƒ…å°±æ˜¯åšæŒä¸ä¸‹å»ã€‚ å¯¹æ„Ÿæƒ…æŠ±æœ‰æ¸´æœ›ï¼Œåˆç–²äºç”¨å¿ƒè¿½å¯»ä¸ç»è¥ã€‚ å¯¹æ›¾ç»çš„çè§†ç‚¹åˆ°å³æ­¢ï¼Œç›´åˆ°æ¸æ¸æ¾æ‰‹ï¼Œæ·¡æ¼ åˆç–ç¦»ã€‚ å°šæœªæ‹¥æœ‰ç™¾æ¯’ä¸ä¾µçš„å†…å¿ƒï¼Œå´æå‰ä¸§å¤±äº†çƒ­æ³ªç›ˆçœ¶çš„èƒ½åŠ›ã€‚ å¶å°”é—²æš‡æ—¶é—´æƒ³çº¦äººä¸€èµ·ï¼Œæ›´å¤šæ—¶å€™æ— äººå¯çº¦å°±ä¸€ä¸ªäººä¸”è¶´ä¸”è¶Ÿçªä¸Šä¸€å¤©ã€‚ æœ¬æƒ³åœ¨æœ‰é™çš„ç”Ÿå‘½é‡Œä½“éªŒå¾ˆå¤šç§ç”Ÿæ´»ï¼Œå´åªä¼šæŠŠåŒæ ·çš„æ—¥å­æœºæ¢°é‡å¤å¾ˆå¤šå¹´ã€‚ åˆ·ç€çŸ¥ä¹æƒ³çª¥è§åˆ«äººçš„ç”Ÿæ´»å¯»æ±‚æ¿€åŠ±ï¼Œå…³é—­å®¢æˆ·ç«¯è¿˜æ˜¯è¯¥å¹²å˜›å¹²å˜›å»ã€‚ ç»ˆæ—¥æ··è¿¹ç¤¾äº¤ç½‘ç»œï¼Œè„¸è‰²èœ¡é»„åœ°å¯¹ç€æ‰‹æœºå’Œç”µè„‘çš„å†·å…‰å±ï¼Œå¯ä»¥è¯´ä¸Šå‡ å¥è¯çš„äººå´å¯¥å¯¥æ— å‡ ã€‚ ä¸æ›¾ç»å†è¿‡çœŸæ­£æ²§æ¡‘ï¼Œå´è¿˜å¤±å®ˆäº†æœ€åä¸€ç‚¹å°‘å¹´æ„æ°”ã€‚ ä»–ä»¬ä»¥æœ€æ™®é€šçš„èº«ä»½åŸ‹æ²¡åœ¨äººç¾¤ä¸­ï¼Œå´è¿‡ç€æœ€æœ€ç…ç†¬çš„æ—¥å­ã€‚ æ–‡ç« æ¥æºï¼š ä½ è§è¿‡æœ€ä¸æ±‚ä¸Šè¿›çš„äººæ˜¯ä»€ä¹ˆæ ·å­ï¼Ÿ - å›ç­”ä½œè€…: å¸ƒè¡£å¿","tags":[{"name":"é¸¡æ±¤","slug":"é¸¡æ±¤","permalink":"https://joker208.github.io/tags/é¸¡æ±¤/"}]},{"title":"Hashtableå®ç”¨æ¡ˆä¾‹","date":"2017-02-16T08:46:33.000Z","path":"2017/02/16/Hashtableå®ç”¨æ¡ˆä¾‹/","text":"ä»Šå¤©åœ¨ç¿»çœ‹ä»¥å‰çš„é¡¹ç›®çš„æ—¶å€™å‘ç°äº†é¡¹ç›®ä¸­å¯¹Hashtableçš„ä½¿ç”¨ å€Ÿè¿™ä¸ªæœºä¼šå·©å›ºä¸€ä¸‹Hashtableçš„çŸ¥è¯† Hashtableæ˜¯éæ³›å‹çš„é›†åˆï¼Œæ‰€ä»¥åœ¨æ£€ç´¢å’Œå­˜å‚¨å€¼ç±»å‹æ—¶é€šå¸¸ä¼šå‘ç”Ÿè£…ç®±ä¸æ‹†ç®±çš„æ“ä½œ å½“æŠŠæŸä¸ªå…ƒç´ æ·»åŠ åˆ° Hashtable æ—¶ï¼Œå°†æ ¹æ®é”®çš„å“ˆå¸Œä»£ç å°†è¯¥å…ƒç´ æ”¾å…¥å­˜å‚¨æ¡¶ä¸­ï¼Œç”±äºæ˜¯æ•£åˆ—ç®—æ³•æ‰€ä»¥ä¼šå‡ºç°ä¸€ä¸ªå“ˆå¸Œå‡½æ•°èƒ½å¤Ÿä¸ºä¸¤ä¸ªä¸åŒçš„é”®ç”Ÿæˆç›¸åŒçš„å“ˆå¸Œä»£ç ï¼Œè¯¥é”®çš„åç»­æŸ¥æ‰¾å°†ä½¿ç”¨é”®çš„å“ˆå¸Œä»£ç åªåœ¨ä¸€ä¸ªç‰¹å®šå­˜å‚¨æ¡¶ä¸­æœç´¢ï¼Œè¿™å°†å¤§å¤§å‡å°‘ä¸ºæŸ¥æ‰¾ä¸€ä¸ªå…ƒç´ æ‰€éœ€çš„é”®æ¯”è¾ƒçš„æ¬¡æ•° Hashtable çš„åŠ è½½å› å­ç¡®å®šå…ƒç´ ä¸Hashtable å¯æ‹¥æœ‰çš„å…ƒç´ æ•°çš„æœ€å¤§æ¯”ç‡ã€‚åŠ è½½å› å­è¶Šå°ï¼Œå¹³å‡æŸ¥æ‰¾é€Ÿåº¦è¶Šå¿«ï¼Œä½†æ¶ˆè€—çš„å†…å­˜ä¹Ÿå¢åŠ ã€‚é»˜è®¤çš„åŠ è½½å› å­ 0.72é€šå¸¸æä¾›é€Ÿåº¦å’Œå¤§å°ä¹‹é—´çš„æœ€ä½³å¹³è¡¡ã€‚å½“åˆ›å»º Hashtable æ—¶ï¼Œä¹Ÿå¯ä»¥æŒ‡å®šå…¶ä»–åŠ è½½å› å­ å…ƒç´ æ€»é‡/ Hashtable å¯æ‹¥æœ‰çš„å…ƒç´ æ•°=åŠ è½½å› å­ å½“å‘ Hashtable æ·»åŠ å…ƒç´ æ—¶ï¼ŒHashtable çš„å®é™…åŠ è½½å› å­å°†å¢åŠ ã€‚å½“å®é™…åŠ è½½å› å­è¾¾åˆ°æŒ‡å®šçš„åŠ è½½å› å­æ—¶ï¼ŒHashtable ä¸­å­˜å‚¨æ¡¶çš„æ•°ç›®è‡ªåŠ¨å¢åŠ åˆ°å¤§äºå½“å‰ Hashtable å­˜å‚¨æ¡¶æ•°ä¸¤å€çš„æœ€å°ç´ æ•° è™½ç„¶Hashå…·æœ‰O(1)çš„æ•°æ®æ£€ç´¢æ•ˆç‡ï¼Œä½†å®ƒç©ºé—´å¼€é”€å´é€šå¸¸å¾ˆå¤§ï¼Œæ˜¯ä»¥ç©ºé—´æ¢å–æ—¶é—´ã€‚æ‰€ä»¥Hashtableé€‚ç”¨äºè¯»å–æ“ä½œé¢‘ç¹ï¼Œå†™å…¥æ“ä½œå¾ˆå°‘çš„æ“ä½œç±»å‹ ä¸»è¦è®°å½•ä¸€ä¸‹ä½¿ç”¨çš„åœºæ™¯ä»¥åŠæ–¹æ³•ï¼Œä¸ºä»¥åä½œå‚ç…§ æ ¹æ®å…¶æŸ¥æ‰¾æ•ˆç‡é«˜çš„ç‰¹ç‚¹ç”¨ä½œæ¯”è¾ƒå»é‡ 1234567891011121314DataSet ds = app.Ds;Hashtable htData = new Hashtable();foreach (DataRow row in ds.Tables[0].Rows)&#123; string title = row[&quot;Title&quot;].ToString(); if (htData.Contains(title)) &#123; row.Delete(); &#125; else &#123; htData.Add(title, &quot;&quot;); &#125;&#125; æ–‡ç« å‚è€ƒ Hashtable_ç™¾åº¦ç™¾ç§‘ hashtableè¯¦ç»†ä»‹ç» C#ä¸­HashTableçš„ç”¨æ³•","tags":[{"name":"Hashtable","slug":"Hashtable","permalink":"https://joker208.github.io/tags/Hashtable/"}]},{"title":"jQueryå®ç°ç®€å•åˆ†é¡µ","date":"2017-02-16T07:17:54.000Z","path":"2017/02/16/jQueryå®ç°ç®€å•åˆ†é¡µ/","text":"ä»Šå¤©åšçš„ä¸€ä¸ªé¦–é¡µä¸‹æ–¹çš„åˆ—è¡¨éœ€è¦åŠ ä¸€ä¸ªåˆ†é¡µåŠŸèƒ½ ä¸éœ€è¦ç‰¹åˆ«å¤šåŠŸèƒ½ï¼Œåªè¦æœ‰é¡µæ•°å°±è¡Œï¼Œç½‘ä¸Šçš„åˆ†é¡µæ’ä»¶åŠŸèƒ½å¤ªå¤šåå€’ç´¯èµ˜ äºæ˜¯å°±è‡ªå·±å†™äº†ä¸€ä¸ªç®€å•çš„åˆ†é¡µæ§ä»¶ éšä¾¿ç»ƒä¹ ä¸€ä¸‹jQuery è´´ä»£ç å¦‚ä¸‹ 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556575859606162636465666768&lt;html&gt;&lt;head&gt;&lt;/head&gt;&lt;body&gt;&lt;ul&gt;&lt;li&gt;1&lt;/li&gt;&lt;li&gt;2&lt;/li&gt;&lt;li&gt;3&lt;/li&gt;&lt;li&gt;4&lt;/li&gt;&lt;li&gt;5&lt;/li&gt;&lt;li&gt;6&lt;/li&gt;&lt;li&gt;7&lt;/li&gt;&lt;li&gt;8&lt;/li&gt;&lt;li&gt;9&lt;/li&gt;&lt;li&gt;10&lt;/li&gt;&lt;/ul&gt;&lt;div class=&quot;fanye&quot;&gt;&lt;a class=&quot;up&quot; href=&quot;#&quot;&gt;upup&lt;/a&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&lt;a class=&quot;down&quot; href=&quot;#&quot;&gt;downdown&lt;/a&gt;&lt;/div&gt;&lt;script src=&quot;http://apps.bdimg.com/libs/jquery/2.1.1/jquery.min.js&quot;&gt;&lt;/script&gt;&lt;script&gt; $(&quot;ul li&quot;).hide(); $(&quot;ul li:lt(4)&quot;).show(); var nowPage=1;//å½“å‰é¡µ var countRecord=$(&quot;ul li&quot;).length;//æ€»è®°å½•æ•° if(countRecord&lt;5) &#123; $(&quot;.fanye a&quot;).hide(); &#125; var countPage=Math.ceil(countRecord/4); if(nowPage==1)&#123;$(&quot;.up&quot;).attr(&quot;style&quot;,&quot;visibility:hidden;&quot;);&#125; $(&quot;.fanye a&quot;).click(function()&#123; var classValue=$(this).attr(&quot;class&quot;); if(&quot;up&quot;==classValue)&#123; if(nowPage&gt;1)&#123; nowPage--; &#125; &#125;else if(&quot;down&quot;==classValue)&#123; if(nowPage&lt;countPage)&#123; nowPage++; &#125; &#125; if(nowPage==1)&#123;$(&quot;.up&quot;).attr(&quot;style&quot;,&quot;visibility:hidden;&quot;);&#125;else&#123;$(&quot;.up&quot;).attr(&quot;style&quot;,&quot;visibility:visible;&quot;);&#125; if(nowPage==countPage)&#123;$(&quot;.down&quot;).attr(&quot;style&quot;,&quot;visibility:hidden;&quot;);&#125;else&#123;$(&quot;.down&quot;).attr(&quot;style&quot;,&quot;visibility:visible;&quot;);&#125; startIndex=(nowPage-1)*4+1;//è·å–æ¯é¡µå¼€å§‹è®°å½•æ•° endIndex=nowPage*4;//è·å–æ¯é¡µç»“æŸè®°å½•æ•° $(&quot;ul li:gt(&quot;+(startIndex-1)+&quot;)&quot;).show(); $(&quot;ul li:lt(&quot;+(endIndex-1)+&quot;)&quot;).show(); //éšè—æ“ä½œ //è®¾ç½®éšè—è¶…å‡ºé¡µæ•°ä¹‹å¤–çš„æ•°æ® $(&quot;ul li:lt(&quot;+(startIndex-1)+&quot;)&quot;).css(&quot;display&quot;,&quot;none&quot;); $(&quot;ul li:gt(&quot;+(endIndex-1)+&quot;)&quot;).css(&quot;display&quot;,&quot;none&quot;); &#125;) &lt;/script&gt;&lt;/body&gt;&lt;/html&gt;","tags":[{"name":"å‰ç«¯","slug":"å‰ç«¯","permalink":"https://joker208.github.io/tags/å‰ç«¯/"},{"name":"jQuery","slug":"jQuery","permalink":"https://joker208.github.io/tags/jQuery/"},{"name":"åˆ†é¡µ","slug":"åˆ†é¡µ","permalink":"https://joker208.github.io/tags/åˆ†é¡µ/"}]},{"title":".NETå‘é€é‚®ä»¶","date":"2017-02-15T09:36:00.000Z","path":"2017/02/15/dot NETå‘é€é‚®ä»¶/","text":"åˆ†äº«ä¸€ä¸ª.NETåå°å‘é€é‚®ä»¶çš„æ–¹æ³• Demoå¦‚ä¸‹ è¿™ä¸ªDemoçš„ä½¿ç”¨æƒ…æ™¯æ˜¯ ç½‘ç«™ç”¨æˆ·ä¿®æ”¹å¯†ç æ—¶çš„ç»‘å®šé‚®ç®±éªŒè¯ 123456789101112131415161718192021222324252627/// &lt;summary&gt;/// å‘é€é‚®ä»¶/// &lt;/summary&gt;/// &lt;param name=&quot;Email&quot;&gt;ç”¨æˆ·é‚®ç®±åœ°å€&lt;/param&gt;/// &lt;param name=&quot;RanDom&quot;&gt;éšæœºéªŒè¯ç &lt;/param&gt;/// &lt;param name=&quot;Name&quot;&gt;ç”¨æˆ·å&lt;/param&gt;public static void SendEmail(string Email, string RanDom, string Name)&#123; MailMessage mail = new MailMessage(); mail.To.Add(new MailAddress(Email)); mail.Subject = &quot;é‚®ä»¶æ ‡é¢˜&quot;; mail.SubjectEncoding = System.Text.Encoding.UTF8; mail.Body = &quot;å°Šæ•¬çš„ç”¨æˆ·:&quot; + Name + &quot;ã€‚ä¿®æ”¹å¯†ç ç»™ä½ å‘çš„éªŒè¯ç æ˜¯ï¼š&quot; + RanDom + &quot;.è¯¥éªŒè¯ç æœ‰æ•ˆæ—¶é—´ä¸º30åˆ†é’Ÿï¼Œè¯·æ³¨æ„è‡ªå·±çš„å¸å·å®‰å…¨ï¼Œä¸è¦å¤–æ³„å¯†ç ï¼ï¼&quot;; mail.BodyEncoding = System.Text.Encoding.UTF8; mail.IsBodyHtml = true; mail.Priority = MailPriority.High; SmtpClient smtpclient = new SmtpClient(); smtpclient.UseDefaultCredentials = true; string EmailClass = Email.Substring(Email.LastIndexOf(&apos;@&apos;)); smtpclient.Host = &quot;smtp&quot; + EmailClass; mail.From = new MailAddress(&quot;å‘é€é‚®ä»¶çš„é‚®ç®±åœ°å€&quot;); smtpclient.Credentials = new System.Net.NetworkCredential(&quot;å‘é€é‚®ä»¶çš„é‚®ç®±åœ°å€&quot;, &quot;å¯†ç &quot;); smtpclient.Send(mail);&#125;","tags":[{"name":".NET","slug":"NET","permalink":"https://joker208.github.io/tags/NET/"},{"name":"é‚®ä»¶","slug":"é‚®ä»¶","permalink":"https://joker208.github.io/tags/é‚®ä»¶/"}]},{"title":"CarouFredSelæ’ä»¶å®ç°å›¾ç‰‡è½®æ’­","date":"2017-02-15T08:17:48.000Z","path":"2017/02/15/CarouFredSelæ’ä»¶å®ç°é¼ æ ‡ç§»å…¥åœæ­¢/","text":"å…¬å¸åšåŒ—å¤§çš„ä¸€ä¸ªç½‘ç«™ é‡Œé¢æœ‰ä¸€ä¸ªè½®æ’­æ•ˆæœ ä½¿ç”¨äº†CarouFredSelæ’ä»¶æ¥å®ç° å€Ÿè¿™ä¸ªæœºä¼šå¥½å¥½æ¥ç ”ç©¶ä¸€ä¸‹è¿™ä¸ªæ’ä»¶ å…ˆé™„ä¸ŠDemo 1234567891011121314151617&lt;ul id=&quot;time_ul&quot;&gt; &lt;li class=&quot;time_li&quot; style=&quot;height:398px;width:400px;&quot;&gt; &lt;div class=&quot;zhanlan_a&quot;&gt; &lt;img class=&quot;zh_pic&quot; src=&quot;../upload/images/&lt;%=pic %&gt;&quot;&gt; &lt;/div&gt; &lt;/li&gt; &lt;li class=&quot;time_li&quot; style=&quot;height:398px;width:400px;&quot;&gt; &lt;div class=&quot;zhanlan_a&quot;&gt; &lt;img class=&quot;zh_pic&quot; src=&quot;../upload/images/&lt;%=pic %&gt;&quot;&gt; &lt;/div&gt; &lt;/li&gt; &lt;li class=&quot;time_li&quot; style=&quot;height:398px;width:400px;&quot;&gt; &lt;div class=&quot;zhanlan_a&quot;&gt; &lt;img class=&quot;zh_pic&quot; src=&quot;../upload/images/&lt;%=pic %&gt;&quot;&gt; &lt;/div&gt; &lt;/li&gt;&lt;/ul&gt; 1234567891011121314151617&lt;script type=&quot;text/javascript&quot;&gt;$(&apos;#time_ul&apos;).carouFredSel(&#123; auto:true, direction: &apos;up&apos;, items: &#123; visible: 1, height: 398 &#125;, scroll: &#123; items:1, duration: 2000, timeoutDuration: 2500, pauseOnHover: true &#125;, pagination: &apos;#paginations&apos; &#125;);&lt;/script&gt; CarouFredSelçš„ä¸€äº›é‡è¦å‚æ•°è¯´æ˜circular true å¾ªç¯æ¨¡å¼ï¼Œtrueä¸ºæ— é™å¾ªç¯ï¼Œfalseä¸ºå•è½®å¾ªç¯ã€‚ infinite true æ˜¯å¦å¯ç”¨å¾ªç¯ï¼Œé»˜è®¤èµ·ç”¨ã€‚å½“circularè®¾ç½®ä¸ºfalseçš„æ—¶å€™ï¼Œå†æŠŠinfiniteè®¾ç½®ä¸ºfalseï¼Œå°±å¯ä»¥å…³é—­å¾ªç¯ direction â€œleftâ€ æ»šåŠ¨æ–¹å‘ï¼Œå¯é€‰å€¼ï¼šâ€rightâ€, â€œleftâ€, â€œupâ€ , â€œdownâ€ width null å†…å®¹çš„å®½åº¦ï¼Œå¦‚æœä¸ºnullï¼Œå®½åº¦è‡ªåŠ¨è®¡ç®— height null å†…å®¹çš„é«˜åº¦ï¼Œå¦‚æœä¸ºnullï¼Œé«˜åº¦è‡ªåŠ¨è®¡ç®— padding 0 å†…å®¹åŒºåŸŸçš„padding items 5 æ˜¾ç¤ºä¸ªæ•°ã€‚é»˜è®¤æ˜¾ç¤º5ä¸ª scroll é»˜è®¤ç­‰äºæ˜¾ç¤ºçš„ä¸ªæ•° ä¸€æ¬¡æ»šåŠ¨ä¸ªæ•° auto true æ˜¯å¦è‡ªåŠ¨æ’­æ”¾ã€‚è®¾ç½®æˆfalseï¼Œä¸è‡ªåŠ¨æ’­æ”¾ prev null æŒ‡å®šæŸä¸€å…ƒç´ æ§åˆ¶å†…å®¹å‘å‰ next null æŒ‡å®šæŸä¸€å…ƒç´ æ§åˆ¶å†…å®¹å‘å (â€œâ–”â–¡â–”)/(â€œâ–”â–¡â–”)/(â€œâ–”â–¡â–”)/ å¦å¤–ï¼Œè¿˜å­¦äº†ä¸€æ‹›â€“å»é™¤è½®æ’­æ•ˆæœ $(&apos;#time_ul&apos;).trigger(&apos;destroy&apos;);","tags":[{"name":"å‰ç«¯","slug":"å‰ç«¯","permalink":"https://joker208.github.io/tags/å‰ç«¯/"},{"name":"CarouFredSel","slug":"CarouFredSel","permalink":"https://joker208.github.io/tags/CarouFredSel/"}]},{"title":"å›¾ç‰‡å¤–åŠ aæ ‡ç­¾å¯¼è‡´å›¾ç‰‡æ— æ³•æ˜¾ç¤ºå®Œæ•´","date":"2017-02-15T07:19:05.000Z","path":"2017/02/15/å‰ç«¯å°æŠ€å·§/","text":"åœ¨å…¬å¸ä¸»è¦åšç½‘ç«™åç«¯å¼€å‘ ä¸å¯é¿å…çš„ä¼šç”¨åˆ°å‰ç«¯çš„ä¸œè¥¿ æ­£å·§å…¬å¸åˆ¶ä½œé‡Œæœ‰ä½å¤§è…¿ æ²¡äº‹å¤šæŠ±æŠ±ï¼ˆ@ï¿£ï¸¶ï¿£@ï¼‰ æœ€è¿‘å°±é‡åˆ°é—®é¢˜äº† é—®é¢˜æè¿°ï¼š å½“ç»™å›¾ç‰‡æ·»åŠ é“¾æ¥çš„æ—¶å€™ï¼Œæˆ‘ä¼šç”¨ä¸€ä¸ªaæ ‡ç­¾æ¥åŒ…è£¹imgæ ‡ç­¾ ä½†æ˜¯è¿™æ ·ä¼šå¯¼è‡´å›¾ç‰‡æ— æ³•å®Œå…¨æ˜¾ç¤º &lt;a href=&quot;#&quot;&gt;&lt;img src=&quot;&quot;&gt;&lt;/a&gt; è§£å†³æ–¹æ³•ï¼š 123&lt;a style=&quot;display:block;width:100%;height:100%;&quot; href=&quot;#&quot;&gt;&lt;img src=&quot;&quot;&gt;&lt;/a&gt; å¼€å‘è¿™ä¸€è¡Œæ³¨é‡ç»éªŒï¼Œå¤šç§¯ç´¯ï¼Œå¤šæ•´ç†ï¼Œäº‰å–æ—©æ—¥å˜æˆå¤§è…¿","tags":[{"name":"å‰ç«¯","slug":"å‰ç«¯","permalink":"https://joker208.github.io/tags/å‰ç«¯/"},{"name":"css","slug":"css","permalink":"https://joker208.github.io/tags/css/"}]},{"title":"Pythonå­¦ä¹ ç¬”è®°ï¼ˆä¸€ï¼‰","date":"2016-12-16T07:08:21.000Z","path":"2016/12/16/Pythonå­¦ä¹ ç¬”è®°ï¼ˆä¸€ï¼‰/","text":"æ•°æ®ç»“æ„ list tuple dict set list å®šä¹‰ ç”¨ä¸­æ‹¬å·å®šä¹‰ å¯ä»¥æ˜¯ç©ºçš„ å¯ä»¥å­˜åœ¨ä¸åŒæ•°æ®ç±»å‹ è®¿é—® indexç´¢å¼•å€¼ï¼ˆæ³¨æ„ä¸è¦è¶Šç•Œï¼‰ ç´¢å¼•å€¼å¯ä¸ºè´Ÿæ•°ï¼ˆå€’æ•°ï¼‰ æ·»åŠ å…ƒç´  append()æ·»åŠ åˆ°å°¾éƒ¨ insert(value,index)æ·»åŠ åˆ°æŒ‡å®šä½ç½® åˆ é™¤å…ƒç´  pop()åˆ é™¤å°¾éƒ¨å…ƒç´  pop(index) å¯ä»¥æ›¿æ¢å…ƒç´  L[index]=value Tuple å®šä¹‰ ç”¨å°æ‹¬å·å®šä¹‰ å¯ä»¥æ˜¯ç©º å¯ä»¥å­˜åœ¨ä¸åŒæ•°æ®ç±»å‹ ä¸èƒ½é‡æ–°èµ‹å€¼æ›¿æ¢ åˆ›å»ºå•å…ƒç´ æ—¶è¦æ³¨æ„t=(1,)é˜²æ­¢å°æ‹¬å·å•å€¼æ­§ä¹‰ tupleçš„ä¸å¯å˜æŒ‡çš„æ˜¯æŒ‡é’ˆæŒ‡å‘ä½ç½®çš„ä¸å¯å˜ï¼Œå½“åŒ…å«listæ—¶ï¼Œlistä¸­çš„å…ƒç´ å¯ä»¥æ”¹å˜ Dict å®šä¹‰ ç”¨èŠ±æ‹¬å·å®šä¹‰ æ ¼å¼ä¸ºKey-Valueé”®å€¼å¯¹ï¼Œç±»ä¼¼äºHashMap æ·»åŠ  å¯ä»¥ç›´æ¥é€šè¿‡é”®å€¼å¯¹æ–¹å¼æ·»åŠ dictä¸­çš„å…ƒç´  è®¿é—® Keyé”®(ä¸å¯é‡å¤)è®¿é—®( å­—ç¬¦ä¸²ã€æ•´å‹ã€æµ®ç‚¹å‹å’Œå…ƒç»„tupleéƒ½å¯ä»¥ä½œä¸ºdictçš„key ) åˆ¤æ–­æ˜¯å¦å­˜åœ¨ç”¨ in ç‰¹ç‚¹ 1.æŸ¥æ‰¾é€Ÿåº¦å¿«ï¼Œä»¥ç©ºé—´æ¢æ—¶é—´ 2.æ— åº åˆå¹¶ 1234567891011121314&gt;&gt;&gt; d1 = &#123;&apos;mike&apos;:12, &apos;jack&apos;:19&#125;&gt;&gt;&gt; d2 = &#123;&apos;jone&apos;:22, &apos;ivy&apos;:17&#125;&gt;&gt;&gt; dMerge = dict(d1.items() + d2.items())&gt;&gt;&gt; print dMerge&#123;&apos;mike&apos;: 12, &apos;jack&apos;: 19, &apos;jone&apos;: 22, &apos;ivy&apos;: 17&#125;&gt;&gt;&gt; dMerge2 = dict(d1, **d2)&gt;&gt;&gt; print dMerge2&#123;&apos;mike&apos;: 12, &apos;jack&apos;: 19, &apos;jone&apos;: 22, &apos;ivy&apos;: 17&#125;&gt;&gt;&gt; dMerge3 = dict(d1)&gt;&gt;&gt; dMerge3.update(d2)&gt;&gt;&gt; print dMerge&#123;&apos;mike&apos;: 12, &apos;jack&apos;: 19, &apos;jone&apos;: 22, &apos;ivy&apos;: 17&#125; set å®šä¹‰ set([]) æ²¡æœ‰valueå€¼çš„dict å…ƒç´ æ— åºä¸”ä¸å¯é‡å¤ è®¿é—® åªèƒ½æŸ¥çœ‹æŸä¸ªå…ƒç´ æ˜¯å¦åœ¨è¿™ä¸ªé›†åˆé‡Œé¢(in) å¤§å°å†™æ•æ„Ÿ æ“ä½œ add() remove() å¤šç”¨äºåˆ¤æ–­ä¸€ä¸ªå…ƒç´ æ˜¯å¦åœ¨ä¸€äº›ä¸åŒçš„æ¡ä»¶å†…ç¬¦åˆ","tags":[{"name":"Python","slug":"Python","permalink":"https://joker208.github.io/tags/Python/"}]},{"title":"jså¤©æ°”æ’ä»¶","date":"2016-10-28T08:50:35.000Z","path":"2016/10/28/jså¤©æ°”æ’ä»¶/","text":"æ›¾å­æ›°ï¼šâ€œå¾æ—¥ä¸‰çœå¾èº«â€”â€”ä¸ºäººè°‹è€Œä¸å¿ ä¹ï¼Ÿä¸æœ‹å‹äº¤è€Œä¸ä¿¡ä¹ï¼Ÿä¼ ä¸ä¹ ä¹ï¼Ÿâ€ è‡ªä»åšå®¢åˆ›å»ºèµ·æ¥ä»¥åå°±æ²¡æœ‰å†æ›´æ–°è¿‡ æƒ³æ¥ä¹Ÿæ˜¯ååˆ†æƒ­æ„§ å·¥ä½œè¿™ä¹ˆé•¿æ—¶é—´ç§¯æ”’äº†ä¸å°‘å€¼å¾—è®°å½•çš„ä¸œè¥¿ å¿ƒé‡Œä¹Ÿä¸€ç›´æƒ³ç€è¦åšæŒæ›´æ–°æ‰è¡Œ çœ‹æ¥è¿˜æ˜¯æ˜¯æ‡’ é€‰æ‹©æ¥åˆ°å¤§åŸå¸‚å°±æ˜¯ä¸ºäº†èƒ½ä¸€ç›´é­ç­–è‡ªå·±ä¸æ–­è¿›æ­¥ ä½†æ˜¯ä¸€ç¨³å®šä¸‹æ¥å°±ä¸æƒ³åŠªåŠ›äº† ä»¥åè¿˜æ˜¯è¦æ—¥çœå¾èº«ï¼Œä¿æŒä¸€é¢—æ‹¼æçš„å¿ƒã€‚ è¿›å…¥æ­£é¢˜ å‰æ®µæ—¶é—´ä¸€ä¸ªç½‘ç«™é¡¹ç›®é‡Œè¦åŠ å…¥å¤©æ°”æ’ä»¶ ç”±äºæ˜¯å®šåˆ¶åŒ–çš„é¡µé¢ ç½‘ä¸Šç°æœ‰çš„æ’ä»¶éƒ½æ²¡æ³•ç›´æ¥ç”¨ äºæ˜¯æ‰¾äº†ä¸€ä¸ªajaxç›´æ¥è·å–å¤©æ°”æ•°æ®çš„æ–¹æ³• å‰ç«¯ä»£ç  12&lt;div id=&quot;location&quot;&gt;&lt;/div&gt;&lt;div id=&quot;weather&quot;&gt;&lt;/div&gt; jsä»£ç  12345678910111213141516var cityUrl = &apos;http://int.dpool.sina.com.cn/iplookup/iplookup.php?format=js&apos;;//è·å–ipæ‰€åœ¨åœ°åŒº$.getScript(cityUrl, function (script, textStatus, jqXHR) &#123;var citytq = remote_ip_info.city;// è·å–åŸå¸‚var url = &quot;http://php.weather.sina.com.cn/iframe/index/w_cl.php?code=js&amp;city=&quot; + citytq + &quot;&amp;day=0&amp;dfc=3&quot;;//sinaæä¾›çš„å¤©æ°”æ¥å£$.ajax(&#123; url: url, dataType: &quot;script&quot;, scriptCharset: &quot;gbk&quot;, success: function (data) &#123; var _w = window.SWther.w[citytq][0]; var tq = _w.s1 + &quot; &quot; + _w.t1 + &quot;â„ƒï½&quot; + _w.t2 + &quot;â„ƒ &quot;; $(&apos;#location&apos;).html(citytq + &apos;åœ°åŒºï¼š&apos;); $(&apos;#weather&apos;).html(tq); &#125; &#125;); &#125;); è¯´æ˜ åœ¨ä¸Šæ®µä»£ç ä¸­çš„urlé‡Œï¼Œå°†å˜é‡citytqèµ‹å€¼ä¸ºåŒ—äº¬ï¼švar url = &quot;http://php.weather.sina.com.cn/iframe/index/w_cl.php?code=js&amp;city=åŒ—äº¬&amp;day=0&amp;dfc=3&quot;; å¯è·å¾—å¦‚ä¸‹æ•°æ®ï¼š(function(){var w=[];w[&#39;åŒ—äº¬&#39;]=[{s1:&#39;æ™´&#39;,s2:&#39;æ™´&#39;,f1:&#39;qing&#39;,f2:&#39;qing&#39;,t1:&#39;13&#39;,t2:&#39;2&#39;,p1:&#39;3-4&#39;,p2:&#39;â‰¤3&#39;,d1:&#39;åŒ—é£&#39;,d2:&#39;æ— æŒç»­é£å‘&#39;}];var add={now:&#39;2016-10-28 20:21:07&#39;,time:&#39;1477657267&#39;,update:&#39;åŒ—äº¬æ—¶é—´10æœˆ28æ—¥07:58æ›´æ–°&#39;,error:&#39;0&#39;,total:&#39;1&#39;};window.SWther={w:w,add:add};})();//0","tags":[{"name":"js","slug":"js","permalink":"https://joker208.github.io/tags/js/"},{"name":"å¤©æ°”æ’ä»¶","slug":"å¤©æ°”æ’ä»¶","permalink":"https://joker208.github.io/tags/å¤©æ°”æ’ä»¶/"}]},{"title":"ç»å‘½æ¯’å¸ˆå½±è¯„","date":"2016-08-15T06:25:08.000Z","path":"2016/08/15/ç»å‘½æ¯’å¸ˆå½±è¯„/","text":"ä»Šå¤©ç»ˆäºæŠŠç»å‘½æ¯’å¸ˆçœ‹å®Œäº† ä»ç¬¬ä¸€å­£åˆ°ç¬¬äº”å­£æ•´ä¸ªå½±ç‰‡åŸºè°ƒå‹æŠ‘çš„è®©äººé€ä¸è¿‡æ°” ä½œä¸ºä¸€ä¸ªä¸­å¹´åŒ–å­¦æ•™å¸ˆ è€ç™½ å…¢å…¢ä¸šä¸šï¼Œå”¯å”¯è¯ºè¯ºï¼Œä¸€äº‹æ— æˆï¼Œèº«æ‚£ç»ç—‡ ä¸ºäº†å®¶äººï¼Œä¸ºäº†å„¿å­ï¼Œèµ°ä¸Šåˆ¶æ¯’ä¹‹è·¯ï¼Œé™©è±¡ç¯ç”Ÿ å´è¢«å‘¨å›´äººå”¾å¼ƒ ä»–ä¸€ç›´åœ¨å¤‡å—ç…ç†¬ å½“å½±ç‰‡æœ€åï¼Œå½“baby blueæ­Œå£°å“èµ· å½“è€ç™½å€’ä¸‹ï¼Œé¡¿æ—¶æœ‰ä¸€ç§è§£è„±çš„è½»æ¾ ç”šè‡³ä¸ç”±è‡ªä¸»çš„çƒ­æ³ªç›ˆçœ¶ ç¢Œç¢Œæ— ä¸ºäº”åå¹´ åœ¨ç”Ÿå‘½çš„æœ€åæ—¶é—´ èƒ½å¤Ÿå‘ç°è‡ªå·±æœ€çƒ­çˆ±çš„ä¸œè¥¿ èƒ½å¤Ÿæˆå°±ä¸€ç•ªäº‹ä¸š å¹¶ä¸”ä¾ç„¶æ·±çˆ±ç€è‡ªå·±çš„å®¶äºº æœ€ç»ˆæ­»åœ¨è‡ªå·±å¿ƒçˆ±çš„å®éªŒå®¤é‡Œ å°±åƒè€ç™½è¯´çš„é‚£æ ·â€I was aliveâ€ å€¼äº†","tags":[{"name":"å½±è¯„","slug":"å½±è¯„","permalink":"https://joker208.github.io/tags/å½±è¯„/"}]},{"title":"ç½‘é¡µä¸€é”®åˆ†äº«åŠŸèƒ½","date":"2016-08-02T07:44:17.000Z","path":"2016/08/02/ç½‘é¡µä¸€é”®åˆ†äº«åŠŸèƒ½/","text":"å…¬å¸ç”¨çš„ä¸€èˆ¬éƒ½æ˜¯ç°æˆçš„åˆ†äº«æ’ä»¶ æ¨èç»™å¤§å®¶JiaThis ç°æœ‰æ’ä»¶çš„ç¼ºç‚¹å¾ˆæ˜æ˜¾ï¼Œæ ·å¼å·²ç»å›ºå®šï¼Œä¸èƒ½æ»¡è¶³å®šåˆ¶åŒ–ç½‘ç«™çš„éœ€æ±‚ ä¸‹é¢ç”¨jsæ¥å®ç°ç½‘é¡µçš„ä¸€é”®åˆ†äº«åŠŸèƒ½ 123&lt;a href=&quot;javascript:void(0)&quot; onClick=&quot;Share.sinaWeiBo(&apos;æµ‹è¯•æµ‹è¯•æµ‹è¯•åˆ†äº«åˆ°å¾®åš,åœ°å€&apos;,&apos;http://www.baidu.com&apos;,&apos;http://09.imgmini.eastday.com/mobile/20160712/20160712191443_b7a55523e3bfc750a28992a67b664332_1.jpeg&apos;);&quot; title=&quot;åˆ†äº«åˆ°æ–°æµªå¾®åš&quot;&gt;ä¸€é”®è½¬å‘æ–°æµªå¾®åš&lt;/a&gt;&lt;a href=&quot;javascript:void(0)&quot; onClick=&quot;Share.qqWeiBo(&apos;æµ‹è¯•æµ‹è¯•æµ‹è¯•åˆ†äº«åˆ°è…¾è®¯å¾®åš&apos;,&apos;http://www.baidu.com&apos;,&apos;http://www.yn.xinhuanet.com/ent/2006-11/10/xin_351103101047078339115.jpg&apos;);&quot; class=&quot;tmblog q&quot; title=&quot;åˆ†äº«åˆ°è…¾è®¯å¾®åš&quot;&gt;ä¸€é”®è½¬å‘è…¾è®¯å¾®åš&lt;/a&gt;&lt;a href=&quot;javascript:void(0)&quot; onClick=&quot;Share.qqZone(&apos;æµ‹è¯•æµ‹è¯•æµ‹è¯•åˆ†äº«åˆ°QQç©ºé—´,åœ°å€&apos;,&apos;http://www.baidu.com&apos;,&apos;http://www.yn.xinhuanet.com/ent/2006-11/10/xin_351103101047078339115.jpg&apos;);&quot; class=&quot;tmblog q&quot; title=&quot;åˆ†äº«åˆ°è…¾è®¯å¾®åš&quot;&gt;ä¸€é”®è½¬å‘QQç©ºé—´&lt;/a&gt; 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657&lt;script type=&quot;text/javascript&quot;&gt; /**åˆ†äº«åˆ°æ–°æµªå¾®åšï¼Œè…¾è®¯å¾®åšï¼ŒQQç©ºé—´ï¼Œå¾®ä¿¡æœ‹å‹åœˆ */var Share =&#123; //æ–°æµªå¾®åš sinaWeiBo:function(title,url,pic)&#123; var _w = 72 , _h = 16; var param = &#123; url:url, type:&apos;3&apos;, count:&apos;1&apos;, /**æ˜¯å¦æ˜¾ç¤ºåˆ†äº«æ•°ï¼Œ1æ˜¾ç¤º(å¯é€‰)*/ appkey:&apos;&apos;, /**æ‚¨ç”³è¯·çš„åº”ç”¨appkey,æ˜¾ç¤ºåˆ†äº«æ¥æº(å¯é€‰)*/ title:title, /**åˆ†äº«çš„æ–‡å­—å†…å®¹(å¯é€‰ï¼Œé»˜è®¤ä¸ºæ‰€åœ¨é¡µé¢çš„title)*/ pic:pic, /**åˆ†äº«å›¾ç‰‡çš„è·¯å¾„(å¯é€‰)*/ ralateUid:&apos;&apos;, /**å…³è”ç”¨æˆ·çš„UIDï¼Œåˆ†äº«å¾®åšä¼š@è¯¥ç”¨æˆ·(å¯é€‰)*/ rnd:new Date().valueOf() &#125; var temp = []; for( var p in param )&#123; temp.push(p + &apos;=&apos; + encodeURIComponent( param[p] || &apos;&apos; ) ) &#125; var target_url = &quot;http://service.weibo.com/share/share.php?&quot;+temp.join(&apos;&amp;&apos;); window.open(target_url,&apos;sinaweibo&apos;,&apos;height=430, width=400&apos;); &#125;, //qqå¾®åš qqWeiBo:function(title,url,pic)&#123; var _t = encodeURI(title); var _url = encodeURIComponent(url); var _appkey = encodeURI(&apos;appkey&apos;);//ä½ ä»è…¾è®¯è·å¾—çš„appkey var _pic = encodeURI(pic);//ï¼ˆä¾‹å¦‚ï¼švar _pic=&apos;å›¾ç‰‡url1|å›¾ç‰‡url2|å›¾ç‰‡url3....ï¼‰ var _site = &apos;http://rt.xoyo.com&apos;;//ä½ çš„ç½‘ç«™åœ°å€ var _u = &apos;http://v.t.qq.com/share/share.php?url=&apos;+_url+&apos;&amp;appkey=&apos;+_appkey+&apos;&amp;site=&apos;+_site+&apos;&amp;pic=&apos;+_pic+&apos;&amp;title=&apos;+_t; window.open( _u,&apos;&apos;, &apos;width=700, height=680, top=0, left=0, toolbar=no, menubar=no, scrollbars=no, location=yes, resizable=no, status=no&apos; ); &#125;, //qqç©ºé—´ qqZone:function(title,url,pic)&#123; var p = &#123; url:url, showcount:&apos;0&apos;,/*æ˜¯å¦æ˜¾ç¤ºåˆ†äº«æ€»æ•°,æ˜¾ç¤ºï¼š&apos;1&apos;ï¼Œä¸æ˜¾ç¤ºï¼š&apos;0&apos; */ desc:&apos;&apos;,/*é»˜è®¤åˆ†äº«ç†ç”±(å¯é€‰)*/ summary:&apos;&apos;,/*åˆ†äº«æ‘˜è¦(å¯é€‰)*/ title:title,/*åˆ†äº«æ ‡é¢˜(å¯é€‰)*/ site:&apos;&apos;,/*åˆ†äº«æ¥æº å¦‚ï¼šè…¾è®¯ç½‘(å¯é€‰)*/ pics:pic, /*åˆ†äº«å›¾ç‰‡çš„è·¯å¾„(å¯é€‰)*/ style:&apos;203&apos;, width:22, height:22 &#125;; var s = []; for(var i in p)&#123; s.push(i + &apos;=&apos; + encodeURIComponent(p[i]||&apos;&apos;)); &#125; var shareURL = &apos;http://sns.qzone.qq.com/cgi-bin/qzshare/cgi_qzshare_onekey?&apos;+s.join(&apos;&amp;&apos;); window.open(shareURL,&apos;newwindow&apos;,&apos;height=400,width=400,top=100,left=100&apos;); &#125;,&#125;;&lt;/script&gt; å¦å¾®ä¿¡æ²¡æœ‰ä¸“é—¨çš„åˆ†äº«æ¥å£ ä¸€èˆ¬çš„è§£å†³æ–¹æ¡ˆæ˜¯æŠŠè¦åˆ†äº«çš„é¡µé¢åšæˆäºŒç»´ç  é€šè¿‡å¾®ä¿¡æ‰«ä¸€æ‰«æ‰“å¼€ åœ¨å¾®ä¿¡å³ä¸Šè§’æœ‰åˆ†äº«çš„åŠŸèƒ½","tags":[{"name":"js","slug":"js","permalink":"https://joker208.github.io/tags/js/"},{"name":"ä¸€é”®åˆ†äº«","slug":"ä¸€é”®åˆ†äº«","permalink":"https://joker208.github.io/tags/ä¸€é”®åˆ†äº«/"}]},{"title":"hexoå¸¸ç”¨å‘½ä»¤","date":"2016-06-10T09:07:55.000Z","path":"2016/06/10/hexoå¸¸ç”¨å‘½ä»¤/","text":"å®‰è£…bashnpm install hexo -g #å®‰è£…npm update hexo -g #å‡çº§hexo init #åˆå§‹åŒ– ç®€å†™hexo n â€œæˆ‘çš„åšå®¢â€ == hexo new â€œæˆ‘çš„åšå®¢â€ #æ–°å»ºæ–‡ç« hexo p == hexo publishhexo g == hexo generate#ç”Ÿæˆhexo s == hexo server #å¯åŠ¨æœåŠ¡é¢„è§ˆhexo d == hexo deploy#éƒ¨ç½² æœåŠ¡å™¨hexo server #Hexo ä¼šç›‘è§†æ–‡ä»¶å˜åŠ¨å¹¶è‡ªåŠ¨æ›´æ–°ï¼Œæ‚¨æ— é¡»é‡å¯æœåŠ¡å™¨ã€‚hexo server -s #é™æ€æ¨¡å¼hexo server -p 5000 #æ›´æ”¹ç«¯å£hexo server -i 192.168.1.1 #è‡ªå®šä¹‰ IP hexo clean #æ¸…é™¤ç¼“å­˜ ç½‘é¡µæ­£å¸¸æƒ…å†µä¸‹å¯ä»¥å¿½ç•¥æ­¤æ¡å‘½ä»¤hexo g #ç”Ÿæˆé™æ€ç½‘é¡µhexo d #å¼€å§‹éƒ¨ç½² ç›‘è§†æ–‡ä»¶å˜åŠ¨hexo generate #ä½¿ç”¨ Hexo ç”Ÿæˆé™æ€æ–‡ä»¶å¿«é€Ÿè€Œä¸”ç®€å•hexo generate â€“watch #ç›‘è§†æ–‡ä»¶å˜åŠ¨ å®Œæˆåéƒ¨ç½²ä¸¤ä¸ªå‘½ä»¤çš„ä½œç”¨æ˜¯ç›¸åŒçš„hexo generate â€“deployhexo deploy â€“generate hexo deploy -ghexo server -g è‰ç¨¿hexo publish [layout] æ¨¡ç‰ˆhexo new â€œpostNameâ€ #æ–°å»ºæ–‡ç« hexo new page â€œpageNameâ€ #æ–°å»ºé¡µé¢hexo generate #ç”Ÿæˆé™æ€é¡µé¢è‡³publicç›®å½•hexo server #å¼€å¯é¢„è§ˆè®¿é—®ç«¯å£ï¼ˆé»˜è®¤ç«¯å£4000ï¼Œâ€™ctrl + câ€™å…³é—­serverï¼‰hexo deploy #å°†.deployç›®å½•éƒ¨ç½²åˆ°GitHub hexo new [layout] hexo new photo â€œMy Galleryâ€hexo new â€œHello Worldâ€ â€“lang tw æ¨¡ç‰ˆï¼ˆScaffoldï¼‰hexo new photo â€œMy Galleryâ€ è®¾ç½®æ–‡ç« æ‘˜è¦ä»¥ä¸Šæ˜¯æ–‡ç« æ‘˜è¦ ä»¥ä¸‹æ˜¯ä½™ä¸‹å…¨æ–‡ å†™ä½œhexo new page hexo new post æ¨é€åˆ°æœåŠ¡å™¨ä¸Šhexo n #å†™æ–‡ç« hexo g #ç”Ÿæˆhexo d #éƒ¨ç½² #å¯ä¸hexo gåˆå¹¶ä¸º hexo d -g å®‰è£…RSSæ’ä»¶npm install hexo-generator-feed â€“save å¼€å¯RSSåŠŸèƒ½ç¼–è¾‘hexo/_config.ymlï¼Œæ·»åŠ å¦‚ä¸‹ä»£ç ï¼š rss: /atom.xml #rssåœ°å€ é»˜è®¤å³å¯","tags":[{"name":"hexo","slug":"hexo","permalink":"https://joker208.github.io/tags/hexo/"}]},{"title":"HEXO+githubpageæ­å»ºåšå®¢","date":"2016-06-07T06:26:54.000Z","path":"2016/06/07/HEXO-githubpageæ­å»ºåšå®¢/","text":"ä¸€ã€å‰è¨€ä¸€åƒä¸ªäººçœ¼ä¸­æœ‰ä¸€åƒä¸ªå“ˆå§†é›·ç‰¹è™½ç„¶ç½‘ä¸Šå·²ç»ä¸ä¹ç›¸å…³çš„æ•™ç¨‹ï¼Œæˆ‘è¿˜æ˜¯æŠŠæˆ‘çš„æ­å»ºæ­¥éª¤å’Œå¤§å®¶åˆ†äº«ï¼Œæˆ‘çš„ç”µè„‘æ˜¯windowsç³»ç»Ÿï¼Œæœ‰é—®é¢˜çš„è¯å¯ä»¥ç•™è¨€ï¼Œæˆ‘ä»¬ä¸€èµ·æ¥è®¨è®ºå“ˆ~ äºŒã€å‡†å¤‡å·¥ä½œæ­å»ºåšå®¢é¦–å…ˆè¦äº†è§£ä¸€ä¸‹å‡ ä¸ªåŸºæœ¬æ¦‚å¿µï¼ˆå…¶å®æˆ‘ä¹Ÿæ²¡æœ‰çœ‹å®Œï¼‰ Git GitHub Pages Hexo Markdown ç„¶åéœ€è¦ä¸‹è½½å‡ ä¸ªå®‰è£…åŒ…ï¼Œæœ‰äº›å®‰è£…åŒ…éœ€è¦ç¿»å¢™ä¸å¥½ä¸‹è½½ï¼Œç›´æ¥ç”¨æˆ‘çš„ç™¾åº¦äº‘åˆ†äº« Node.jsï¼ˆnode-v6.9.5-x64.msiï¼‰ Gitï¼ˆGit-2.11.1-64-bit.exeï¼‰ æœ€åï¼Œè®°å¾—åœ¨Githubä¸Šæ³¨å†Œä¸ªå¸å·okï¼Œå‡†å¤‡å·¥ä½œå°±åšå¥½äº† ä¸‰ã€æ­å»ºåšå®¢ç¬¬ä¸€æ­¥ï¼ŒæŠŠä¸Šé¢æåˆ°çš„ä¸¤ä¸ªå®‰è£…åŒ…å…ˆç»™å®‰è£…äº† ç¬¬äºŒæ­¥ï¼Œå°†ä½ çš„Githubå¸å·ä¸ä½ çš„ç”µè„‘ç»‘å®š å…ˆæ£€æŸ¥ä½ çš„ç”µè„‘é‡Œæœ‰æ²¡æœ‰SSH keysåœ¨ç”µè„‘çš„æ¡Œé¢ä¸Šç‚¹é¼ æ ‡å³é”®ï¼Œé€‰æ‹©Git Bash Hereï¼Œå°±ä¼šå‡ºæ¥é»‘æ¡†æ¡†ï¼Œé”®å…¥ä¸‹é¢ä»£ç 1$ ls -al ~/.ssh é»˜è®¤æƒ…å†µä¸‹ï¼Œpublic keysçš„æ–‡ä»¶åæ˜¯ä»¥ä¸‹çš„æ ¼å¼ä¹‹ä¸€ï¼šid_dsa.pubã€id_ecdsa.pubã€id_ed25519.pubã€id_rsa.pubå¦‚æœæ²¡æœ‰SSH keyï¼Œåˆ™ç”Ÿæˆæ–°çš„SSH key1$ ssh-keygen -t rsa -C \"your_email@example.com\" è¿™é‡Œçš„é‚®ç®±æ˜¯ä½ ç”³è¯·Githubå¸å·æ—¶çš„é‚®ç®±æˆåŠŸåä¼šåœ¨C:\\Users\\ç”¨æˆ·å\\ .sshè·¯å¾„ä¸‹ç”Ÿæˆä¸¤ä¸ªæ–‡ä»¶id_rsa ä»¥åŠid_rsa.pubä¹‹ååœ¨githubæ·»åŠ SSH Key,åœ¨ä»»æ„ç•Œé¢å³ä¸Šè§’ï¼Œç‚¹å‡»ä½ çš„å¤´åƒï¼Œé€‰æ‹©Settings-&gt; SSH keys-&gt;New SSH keyå°†id_rsa.pubé‡Œé¢çš„å†…å®¹å…¨éƒ¨å¤åˆ¶åˆ°Keyæ¡†é‡Œé¢ okï¼Œç»‘å®šæˆåŠŸ~ ç¬¬ä¸‰æ­¥ï¼Œæ­å»ºæœ¬åœ°åšå®¢åœ¨æœ¬åœ°æ–°å»ºä¸€ä¸ªæ–‡ä»¶å¤¹ï¼Œæ¯”å¦‚Blogï¼Œæ–‡ä»¶å³é”®ï¼Œé€‰æ‹©Git Bash Hereè¾“å…¥æŒ‡ä»¤å®‰è£…hexo1$ npm install -g hexo ç¨ç­‰ç‰‡åˆ»ã€‚ã€‚ã€‚å®‰è£…å®Œæˆåï¼Œè¾“å…¥ä»¥ä¸‹æŒ‡ä»¤1$ hexo init è¯¥å‘½ä»¤ä¼šåœ¨ç›®æ ‡æ–‡ä»¶å¤¹å†…å»ºç«‹ç½‘ç«™æ‰€éœ€è¦çš„æ‰€æœ‰æ–‡ä»¶æ¥ä¸‹æ¥æ˜¯å®‰è£…ä¾èµ–åŒ…1$ npm install éƒ¨ç½²å½¢æˆæ–‡ä»¶1$ hexo generate å†æ¥ä¸‹æ¥è¿è¡Œserver è·‘èµ·hexoæœåŠ¡1$ hexo server è¿™æ ·åšå®¢åœ¨æœ¬åœ°å·²ç»æ­å»ºå¥½äº†ï¼Œæˆ‘ä»¬å¯ä»¥æ‰“å¼€æµè§ˆå™¨ï¼Œè¾“å…¥http://localhost:4000/ä¾¿å¯çœ‹åˆ°é»˜è®¤çš„åšå®¢äº† é¼“æŒï¼ˆ/â‰§â–½â‰¦/ï¼‰ï¼Œç­‰ç­‰ï¼Œå…¶å®è¿˜æœ‰ç¬¬å››æ­¥ ç¬¬å››æ­¥ï¼Œåšå®¢ä¸Šçº¿ ç™»å½•Githubï¼Œç‚¹å‡»â€New repositoryâ€ï¼Œæ–°å»ºä¸€ä¸ªç‰ˆæœ¬åº“è¾“å…¥ä»“åº“åï¼šä½ çš„Githubåç§°.github.ioç„¶åç‚¹å‡»Create repositoryè¿™é‡Œçš„Repository nameä¸€å®šè¦ç”¨çš„githubçš„ç”¨æˆ·åï¼Œä¸ç„¶æ˜¾ç¤ºä¸å‡ºæ¥ï¼Œå› ä¸ºgithubPageåªèƒ½ä½ çš„ç”¨æˆ·åæ¥ä¸‹æ¥ï¼Œç‚¹å‡»å³è¾¹çš„â€œSettingâ€èœå•è¿›å…¥è®¾ç½®,ç‚¹å‡»â€Launch automatic page generatorâ€è¿›å…¥ä¹‹åç‚¹å‡»åº•éƒ¨çš„â€Continue to layoutsâ€ä¹‹åé€‰æ‹©ä¸€ä¸ªéšæ„æ¨¡ç‰ˆï¼Œç‚¹å‡»â€Publish pageâ€,å‘å¸ƒgithubé»˜è®¤ç”Ÿæˆçš„ä¸€ä¸ªé™æ€ç«™ç‚¹okï¼Œçº¿ä¸Šçš„å·¥ä½œå®Œæˆï¼Œæ¥ä¸‹æ¥ä¿®æ”¹ä¸€ä¸‹æœ¬åœ°æ–‡ä»¶ æ‰“å¼€æœ¬åœ°åšå®¢æ ¹ç›®å½•ä¸‹çš„é…ç½®æ–‡ä»¶_config.ymlç¼–è¾‘æœ€åé¢çš„deployå±æ€§ï¼ŒåŠ å…¥ä»£ç 123type: gitrepository: git@github.com:username/username.github.io.gitbranch: master è¿™é‡Œåˆ—ä¸¾é…ç½®æ–‡ä»¶_config.ymlçš„éƒ¨åˆ†å…³é”®é…ç½®ï¼Œå¯è‡ªè¡Œä¿®æ”¹123456789101112131415161718192021222324252627# Hexo Configuration## Docs: https://hexo.io/docs/configuration.html## Source: https://github.com/hexojs/hexo/# Sitetitle: #ç½‘ç«™çš„æ ‡é¢˜subtitle: #å‰¯æ ‡é¢˜description: #æè¿°author: #ä½œè€…ä¿¡æ¯avatar: #å¤´åƒï¼Œå›¾ç‰‡ä½ç½®åœ¨ç›¸åº”ä¸»é¢˜ç›®å½•ä¸‹çš„imageslanguage: zh-Hans #ä¸­æ–‡ç®€ä½“email: timezone:# Extensions## Plugins: https://hexo.io/plugins/## Themes: https://hexo.io/themes/theme: #é…ç½®ä¸»é¢˜stylus: compress: true #è‡ªé€‚åº”å¸ƒå±€# Deployment## Docs: https://hexo.io/docs/deployment.htmldeploy: type: git #éƒ¨ç½²ç¯å¢ƒï¼ŒåŸºäºhexo+githubpage,æ‰€ä»¥è¿™é‡Œä½¿ç”¨gitã€‚æ³¨æ„ï¼šä¸åŒç‰ˆæœ¬çš„hexoï¼Œtypeæœ‰å¯èƒ½ä¸åŒï¼Œ3.xä»¥ååº”ä½¿ç”¨git,å…·ä½“å‚çœ‹å®˜æ–¹æ–‡æ¡£ repository: git@github.com:username/username.github.io.git #gitä»“åº“åœ°å€ï¼Œæ›¿æ¢æˆä½ çš„usernameå³å¯ï¼Œå…¶ä»–ä¿æŒä¸å˜ï¼Œåé¢ä¼šæåˆ°å¦‚ä½•åˆ›å»ºgitä»“åº“ branch: master å®‰è£…hexo-deployer-gitæ’ä»¶1npm install hexo-deployer-git --save éƒ¨ç½²ä½ æœ¬åœ°çš„ä¸»é¢˜åˆ°githubä¸Š123hexo cleanhexo generator #ç®€å†™ hexo ghexo deploy #ç®€å†™ hexo d æœ€åï¼Œå°±å¯ä»¥åœ¨çº¿ä¸ŠæŸ¥çœ‹æ­å»ºå¥½çš„åšå®¢äº†https://username.github.io è¿™æ¬¡ï¼Œåšå®¢çœŸçš„å°±æ­å»ºå®Œæˆäº†ï¼Œå¹²æ¯!~( ã‚œâ–½ã‚œ)ã¤ãƒ­ å¯¹äº†ï¼Œé™„é€æˆ‘ç”¨çš„ä¸»é¢˜ä»¥åŠçŸ¥ä¹ä¸Šçš„ä¸»é¢˜æ”¶é›† hexo-theme-yilia æœ‰å“ªäº›å¥½çœ‹çš„ Hexo ä¸»é¢˜ï¼Ÿ-çŸ¥ä¹ æ–‡ç« å‚è€ƒ http://crazymilk.github.io/ http://blog.csdn.net/wx_jin/article/details/51027783 è¡¥å……ï¼šHEXOé‡Œé¢ä¸€å®šè¦æ³¨æ„ç©ºæ ¼ï¼Œé…ç½®æ–‡ä»¶_config.ymlä¸­çš„å±æ€§ä¸€å®šè¦åœ¨å†’å·åé¢ç©ºä¸€æ ¼ï¼Œä¸ç„¶ä¼šæŠ¥é”™ã€‚","tags":[{"name":"github","slug":"github","permalink":"https://joker208.github.io/tags/github/"},{"name":"hexo","slug":"hexo","permalink":"https://joker208.github.io/tags/hexo/"}]}]